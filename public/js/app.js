function $fetch(t,e,i){return new Promise(function(n,r){fetch($apiUri+t+"/"+$sid,{headers:{Accept:"application/json","Content-Type":"application/json"},method:e,body:i?JSON.stringify(i):{}}).then(function(t){return t.json()}).then(function(t){t&&t.result&&n(t.result)})["catch"](function(t){r(t)})})}var Zepto=function(){function t(t){return null==t?String(t):q[J.call(t)]||"object"}function e(e){return"function"==t(e)}function i(t){return null!=t&&t==t.window}function n(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function a(t){return r(t)&&!i(t)&&Object.getPrototypeOf(t)==Object.prototype}function o(t){return"number"==typeof t.length}function s(t){return A.call(t,function(t){return null!=t})}function c(t){return t.length>0?k.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(t){return t in L?L[t]:L[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function d(t,e){return"number"!=typeof e||D[l(t)]?e:e+"px"}function h(t){var e,i;return P[t]||(e=R.createElement(t),R.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),P[t]=i),P[t]}function f(t){return"children"in t?C.call(t.children):k.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function p(t,e){var i,n=t?t.length:0;for(i=0;n>i;i++)this[i]=t[i];this.length=n,this.selector=e||""}function _(t,e,i){for(S in e)i&&(a(e[S])||Q(e[S]))?(a(e[S])&&!a(t[S])&&(t[S]={}),Q(e[S])&&!Q(t[S])&&(t[S]=[]),_(t[S],e[S],i)):e[S]!==x&&(t[S]=e[S])}function m(t,e){return null==e?k(t):k(t).filter(e)}function v(t,i,n,r){return e(i)?i.call(t,n,r):i}function g(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function y(t,e){var i=t.className||"",n=i&&i.baseVal!==x;return e===x?n?i.baseVal:i:void(n?i.baseVal=e:t.className=e)}function b(t){try{return t?"true"==t||("false"==t?!1:"null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?k.parseJSON(t):t):t}catch(e){return t}}function w(t,e){e(t);for(var i=0,n=t.childNodes.length;n>i;i++)w(t.childNodes[i],e)}var x,S,k,T,E,O,N=[],M=N.concat,A=N.filter,C=N.slice,R=window.document,P={},L={},D={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},Y=/^\s*<(\w+|!)[^>]*>/,I=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,j=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,H=/^(?:body|html)$/i,$=/([A-Z])/g,F=["val","css","html","text","data","width","height","offset"],z=["after","prepend","before","append"],U=R.createElement("table"),B=R.createElement("tr"),G={tr:R.createElement("tbody"),tbody:U,thead:U,tfoot:U,td:B,th:B,"*":R.createElement("div")},X=/complete|loaded|interactive/,W=/^[\w-]*$/,q={},J=q.toString,V={},Z=R.createElement("div"),K={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Q=Array.isArray||function(t){return t instanceof Array};return V.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,r=t.parentNode,a=!r;return a&&(r=Z).appendChild(t),n=~V.qsa(r,e).indexOf(t),a&&Z.removeChild(t),n},E=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},O=function(t){return A.call(t,function(e,i){return t.indexOf(e)==i})},V.fragment=function(t,e,i){var n,r,o;return I.test(t)&&(n=k(R.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(j,"<$1></$2>")),e===x&&(e=Y.test(t)&&RegExp.$1),e in G||(e="*"),o=G[e],o.innerHTML=""+t,n=k.each(C.call(o.childNodes),function(){o.removeChild(this)})),a(i)&&(r=k(n),k.each(i,function(t,e){F.indexOf(t)>-1?r[t](e):r.attr(t,e)})),n},V.Z=function(t,e){return new p(t,e)},V.isZ=function(t){return t instanceof V.Z},V.init=function(t,i){var n;if(!t)return V.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&Y.test(t))n=V.fragment(t,RegExp.$1,i),t=null;else{if(i!==x)return k(i).find(t);n=V.qsa(R,t)}else{if(e(t))return k(R).ready(t);if(V.isZ(t))return t;if(Q(t))n=s(t);else if(r(t))n=[t],t=null;else if(Y.test(t))n=V.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==x)return k(i).find(t);n=V.qsa(R,t)}}return V.Z(n,t)},k=function(t,e){return V.init(t,e)},k.extend=function(t){var e,i=C.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach(function(i){_(t,i,e)}),t},V.qsa=function(t,e){var i,n="#"==e[0],r=!n&&"."==e[0],a=n||r?e.slice(1):e,o=W.test(a);return t.getElementById&&o&&n?(i=t.getElementById(a))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:C.call(o&&!n&&t.getElementsByClassName?r?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},k.contains=R.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},k.type=t,k.isFunction=e,k.isWindow=i,k.isArray=Q,k.isPlainObject=a,k.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},k.inArray=function(t,e,i){return N.indexOf.call(e,t,i)},k.camelCase=E,k.trim=function(t){return null==t?"":String.prototype.trim.call(t)},k.uuid=0,k.support={},k.expr={},k.noop=function(){},k.map=function(t,e){var i,n,r,a=[];if(o(t))for(n=0;n<t.length;n++)i=e(t[n],n),null!=i&&a.push(i);else for(r in t)i=e(t[r],r),null!=i&&a.push(i);return c(a)},k.each=function(t,e){var i,n;if(o(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t},k.grep=function(t,e){return A.call(t,e)},window.JSON&&(k.parseJSON=JSON.parse),k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){q["[object "+e+"]"]=e.toLowerCase()}),k.fn={constructor:V.Z,length:0,forEach:N.forEach,reduce:N.reduce,push:N.push,sort:N.sort,splice:N.splice,indexOf:N.indexOf,concat:function(){var t,e,i=[];for(t=0;t<arguments.length;t++)e=arguments[t],i[t]=V.isZ(e)?e.toArray():e;return M.apply(V.isZ(this)?this.toArray():this,i)},map:function(t){return k(k.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return k(C.apply(this,arguments))},ready:function(t){return X.test(R.readyState)&&R.body?t(k):R.addEventListener("DOMContentLoaded",function(){t(k)},!1),this},get:function(t){return t===x?C.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return N.every.call(this,function(e,i){return t.call(e,i,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):k(A.call(this,function(e){return V.matches(e,t)}))},add:function(t,e){return k(O(this.concat(k(t,e))))},is:function(t){return this.length>0&&V.matches(this[0],t)},not:function(t){var i=[];if(e(t)&&t.call!==x)this.each(function(e){t.call(this,e)||i.push(this)});else{var n="string"==typeof t?this.filter(t):o(t)&&e(t.item)?C.call(t):k(t);this.forEach(function(t){n.indexOf(t)<0&&i.push(t)})}return k(i)},has:function(t){return this.filter(function(){return r(t)?k.contains(this,t):k(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:k(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:k(t)},find:function(t){var e,i=this;return e=t?"object"==typeof t?k(t).filter(function(){var t=this;return N.some.call(i,function(e){return k.contains(e,t)})}):1==this.length?k(V.qsa(this[0],t)):this.map(function(){return V.qsa(this,t)}):k()},closest:function(t,e){var i=this[0],r=!1;for("object"==typeof t&&(r=k(t));i&&!(r?r.indexOf(i)>=0:V.matches(i,t));)i=i!==e&&!n(i)&&i.parentNode;return k(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=k.map(i,function(t){return(t=t.parentNode)&&!n(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return m(e,t)},parent:function(t){return m(O(this.pluck("parentNode")),t)},children:function(t){return m(this.map(function(){return f(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||C.call(this.childNodes)})},siblings:function(t){return m(this.map(function(t,e){return A.call(f(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return k.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=h(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var i=e(t);if(this[0]&&!i)var n=k(t).get(0),r=n.parentNode||this.length>1;return this.each(function(e){k(this).wrapAll(i?t.call(this,e):r?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){k(this[0]).before(t=k(t));for(var e;(e=t.children()).length;)t=e.first();k(t).append(this)}return this},wrapInner:function(t){var i=e(t);return this.each(function(e){var n=k(this),r=n.contents(),a=i?t.call(this,e):t;r.length?r.wrapAll(a):n.append(a)})},unwrap:function(){return this.parent().each(function(){k(this).replaceWith(k(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=k(this);(t===x?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return k(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return k(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var i=this.innerHTML;k(this).empty().append(v(this,t,e,i))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var i=v(this,t,e,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,e){var i;return"string"!=typeof t||1 in arguments?this.each(function(i){if(1===this.nodeType)if(r(t))for(S in t)g(this,S,t[S]);else g(this,t,v(this,e,i,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(i=this[0].getAttribute(t))&&t in this[0]?this[0][t]:i:x},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){g(this,t)},this)})},prop:function(t,e){return t=K[t]||t,1 in arguments?this.each(function(i){this[t]=v(this,e,i,this[t])}):this[0]&&this[0][t]},data:function(t,e){var i="data-"+t.replace($,"-$1").toLowerCase(),n=1 in arguments?this.attr(i,e):this.attr(i);return null!==n?b(n):x},val:function(t){return 0 in arguments?this.each(function(e){this.value=v(this,t,e,this.value)}):this[0]&&(this[0].multiple?k(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=k(this),n=v(this,t,e,i.offset()),r=i.offsetParent().offset(),a={top:n.top-r.top,left:n.left-r.left};"static"==i.css("position")&&(a.position="relative"),i.css(a)});if(!this.length)return null;if(!k.contains(R.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,i){if(arguments.length<2){var n,r=this[0];if(!r)return;if(n=getComputedStyle(r,""),"string"==typeof e)return r.style[E(e)]||n.getPropertyValue(e);if(Q(e)){var a={};return k.each(e,function(t,e){a[e]=r.style[E(e)]||n.getPropertyValue(e)}),a}}var o="";if("string"==t(e))i||0===i?o=l(e)+":"+d(e,i):this.each(function(){this.style.removeProperty(l(e))});else for(S in e)e[S]||0===e[S]?o+=l(S)+":"+d(S,e[S])+";":this.each(function(){this.style.removeProperty(l(S))});return this.each(function(){this.style.cssText+=";"+o})},index:function(t){return t?this.indexOf(k(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?N.some.call(this,function(t){return this.test(y(t))},u(t)):!1},addClass:function(t){return t?this.each(function(e){if("className"in this){T=[];var i=y(this),n=v(this,t,e,i);n.split(/\s+/g).forEach(function(t){k(this).hasClass(t)||T.push(t)},this),T.length&&y(this,i+(i?" ":"")+T.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===x)return y(this,"");T=y(this),v(this,t,e,T).split(/\s+/g).forEach(function(t){T=T.replace(u(t)," ")}),y(this,T.trim())}})},toggleClass:function(t,e){return t?this.each(function(i){var n=k(this),r=v(this,t,i,y(this));r.split(/\s+/g).forEach(function(t){(e===x?!n.hasClass(t):e)?n.addClass(t):n.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===x?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===x?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=H.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(k(t).css("margin-top"))||0,i.left-=parseFloat(k(t).css("margin-left"))||0,n.top+=parseFloat(k(e[0]).css("border-top-width"))||0,n.left+=parseFloat(k(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||R.body;t&&!H.test(t.nodeName)&&"static"==k(t).css("position");)t=t.offsetParent;return t})}},k.fn.detach=k.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});k.fn[t]=function(r){var a,o=this[0];return r===x?i(o)?o["inner"+e]:n(o)?o.documentElement["scroll"+e]:(a=this.offset())&&a[t]:this.each(function(e){o=k(this),o.css(t,v(this,r,e,o[t]()))})}}),z.forEach(function(e,i){var n=i%2;k.fn[e]=function(){var e,r,a=k.map(arguments,function(i){return e=t(i),"object"==e||"array"==e||null==i?i:V.fragment(i)}),o=this.length>1;return a.length<1?this:this.each(function(t,e){r=n?e:e.parentNode,e=0==i?e.nextSibling:1==i?e.firstChild:2==i?e:null;var s=k.contains(R.documentElement,r);a.forEach(function(t){if(o)t=t.cloneNode(!0);else if(!r)return k(t).remove();r.insertBefore(t,e),s&&w(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},k.fn[n?e+"To":"insert"+(i?"Before":"After")]=function(t){return k(t)[e](this),this}}),V.Z.prototype=p.prototype=k.fn,V.uniq=O,V.deserializeValue=b,k.zepto=V,k}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function e(e,i,n){var r=t.Event(i);return t(e).trigger(r,n),!r.isDefaultPrevented()}function i(t,i,n,r){return t.global?e(i||g,n,r):void 0}function n(e){e.global&&0===t.active++&&i(e,null,"ajaxStart")}function r(e){e.global&&!--t.active&&i(e,null,"ajaxStop")}function a(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||i(e,n,"ajaxBeforeSend",[t,e])===!1?!1:void i(e,n,"ajaxSend",[t,e])}function o(t,e,n,r){var a=n.context,o="success";n.success.call(a,t,o,e),r&&r.resolveWith(a,[t,o,e]),i(n,a,"ajaxSuccess",[e,n,t]),c(o,e,n)}function s(t,e,n,r,a){var o=r.context;r.error.call(o,n,e,t),a&&a.rejectWith(o,[n,e,t]),i(r,o,"ajaxError",[n,r,t||e]),c(e,n,r)}function c(t,e,n){var a=n.context;n.complete.call(a,e,t),i(n,a,"ajaxComplete",[e,n]),r(n)}function l(){}function u(t){return t&&(t=t.split(";",2)[0]),t&&(t==S?"html":t==x?"json":b.test(t)?"script":w.test(t)&&"xml")||"text"}function d(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function h(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=d(e.url,e.data),e.data=void 0)}function f(e,i,n,r){return t.isFunction(i)&&(r=n,n=i,i=void 0),t.isFunction(n)||(r=n,n=void 0),{url:e,data:i,success:n,dataType:r}}function p(e,i,n,r){var a,o=t.isArray(i),s=t.isPlainObject(i);t.each(i,function(i,c){a=t.type(c),r&&(i=n?r:r+"["+(s||"object"==a||"array"==a?i:"")+"]"),!r&&o?e.add(c.name,c.value):"array"==a||!n&&"object"==a?p(e,c,n,i):e.add(i,c)})}var _,m,v=0,g=window.document,y=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,x="application/json",S="text/html",k=/^\s*$/,T=g.createElement("a");T.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var n,r,c=e.jsonpCallback,l=(t.isFunction(c)?c():c)||"jsonp"+ ++v,u=g.createElement("script"),d=window[l],h=function(e){t(u).triggerHandler("error",e||"abort")},f={abort:h};return i&&i.promise(f),t(u).on("load error",function(a,c){clearTimeout(r),t(u).off().remove(),"error"!=a.type&&n?o(n[0],f,e,i):s(null,c||"error",f,e,i),window[l]=d,n&&t.isFunction(d)&&d(n[0]),d=n=void 0}),a(f,e)===!1?(h("abort"),f):(window[l]=function(){n=arguments},u.src=e.url.replace(/\?(.+)=\?/,"?$1="+l),g.head.appendChild(u),e.timeout>0&&(r=setTimeout(function(){h("timeout")},e.timeout)),f)},t.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:x,xml:"application/xml, text/xml",html:S,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var i,r,c=t.extend({},e||{}),f=t.Deferred&&t.Deferred();for(_ in t.ajaxSettings)void 0===c[_]&&(c[_]=t.ajaxSettings[_]);n(c),c.crossDomain||(i=g.createElement("a"),i.href=c.url,i.href=i.href,c.crossDomain=T.protocol+"//"+T.host!=i.protocol+"//"+i.host),c.url||(c.url=window.location.toString()),(r=c.url.indexOf("#"))>-1&&(c.url=c.url.slice(0,r)),h(c);var p=c.dataType,v=/\?.+=\?/.test(c.url);if(v&&(p="jsonp"),c.cache!==!1&&(e&&e.cache===!0||"script"!=p&&"jsonp"!=p)||(c.url=d(c.url,"_="+Date.now())),"jsonp"==p)return v||(c.url=d(c.url,c.jsonp?c.jsonp+"=?":c.jsonp===!1?"":"callback=?")),t.ajaxJSONP(c,f);var y,b=c.accepts[p],w={},x=function(t,e){w[t.toLowerCase()]=[t,e]},S=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,E=c.xhr(),O=E.setRequestHeader;if(f&&f.promise(E),c.crossDomain||x("X-Requested-With","XMLHttpRequest"),x("Accept",b||"*/*"),(b=c.mimeType||b)&&(b.indexOf(",")>-1&&(b=b.split(",",2)[0]),E.overrideMimeType&&E.overrideMimeType(b)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&x("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(m in c.headers)x(m,c.headers[m]);if(E.setRequestHeader=x,E.onreadystatechange=function(){if(4==E.readyState){E.onreadystatechange=l,clearTimeout(y);var e,i=!1;if(E.status>=200&&E.status<300||304==E.status||0==E.status&&"file:"==S){if(p=p||u(c.mimeType||E.getResponseHeader("content-type")),"arraybuffer"==E.responseType||"blob"==E.responseType)e=E.response;else{e=E.responseText;try{"script"==p?(0,eval)(e):"xml"==p?e=E.responseXML:"json"==p&&(e=k.test(e)?null:t.parseJSON(e))}catch(n){i=n}if(i)return s(i,"parsererror",E,c,f)}o(e,E,c,f)}else s(E.statusText||null,E.status?"error":"abort",E,c,f)}},a(E,c)===!1)return E.abort(),s(null,"abort",E,c,f),E;if(c.xhrFields)for(m in c.xhrFields)E[m]=c.xhrFields[m];var N="async"in c?c.async:!0;E.open(c.type,c.url,N,c.username,c.password);for(m in w)O.apply(E,w[m]);return c.timeout>0&&(y=setTimeout(function(){E.onreadystatechange=l,E.abort(),s(null,"timeout",E,c,f)},c.timeout)),E.send(c.data?c.data:null),E},t.get=function(){return t.ajax(f.apply(null,arguments))},t.post=function(){var e=f.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=f.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,n){if(!this.length)return this;var r,a=this,o=e.split(/\s/),s=f(e,i,n),c=s.success;return o.length>1&&(s.url=o[0],r=o[1]),s.success=function(e){a.html(r?t("<div>").html(e.replace(y,"")).find(r):e),c&&c.apply(a,arguments)},t.ajax(s),this};var E=encodeURIComponent;t.param=function(e,i){var n=[];return n.add=function(e,i){t.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(E(e)+"="+E(i))},p(n,e,i),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){function e(e,n){var c=e[s],l=c&&r[c];if(void 0===n)return l||i(e);if(l){if(n in l)return l[n];var u=o(n);if(u in l)return l[u]}return a.call(t(e),n)}function i(e,i,a){var c=e[s]||(e[s]=++t.uuid),l=r[c]||(r[c]=n(e));return void 0!==i&&(l[o(i)]=a),l}function n(e){var i={};return t.each(e.attributes||c,function(e,n){0==n.name.indexOf("data-")&&(i[o(n.name.replace("data-",""))]=t.zepto.deserializeValue(n.value))}),i}var r={},a=t.fn.data,o=t.camelCase,s=t.expando="Zepto"+ +new Date,c=[];t.fn.data=function(n,r){return void 0===r?t.isPlainObject(n)?this.each(function(e,r){t.each(n,function(t,e){i(r,t,e)})}):0 in this?e(this[0],n):void 0:this.each(function(){i(this,n,r)})},t.fn.removeData=function(e){return"string"==typeof e&&(e=e.split(/\s+/)),this.each(function(){var i=this[s],n=i&&r[i];n&&t.each(e||n,function(t){delete n[e?o(this):t]})})},["remove","empty"].forEach(function(e){var i=t.fn[e];t.fn[e]=function(){var t=this.find("*");return"remove"===e&&(t=t.add(this)),t.removeData(),i.call(this)}})}(Zepto),function(t){function e(t,e){var i=this.os={},n=this.browser={},r=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),a=t.match(/(Android);?[\s\/]+([\d.]+)?/),o=!!t.match(/\(Macintosh\; Intel /),s=t.match(/(iPad).*OS\s([\d_]+)/),c=t.match(/(iPod)(.*OS\s([\d_]+))?/),l=!s&&t.match(/(iPhone\sOS)\s([\d_]+)/),u=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),d=/Win\d{2}|Windows/.test(e),h=t.match(/Windows Phone ([\d.]+)/),f=u&&t.match(/TouchPad/),p=t.match(/Kindle\/([\d.]+)/),_=t.match(/Silk\/([\d._]+)/),m=t.match(/(BlackBerry).*Version\/([\d.]+)/),v=t.match(/(BB10).*Version\/([\d.]+)/),g=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),y=t.match(/PlayBook/),b=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),w=t.match(/Firefox\/([\d.]+)/),x=t.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),S=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),k=!b&&t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),T=k||t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(n.webkit=!!r)&&(n.version=r[1]),a&&(i.android=!0,i.version=a[2]),l&&!c&&(i.ios=i.iphone=!0,i.version=l[2].replace(/_/g,".")),s&&(i.ios=i.ipad=!0,i.version=s[2].replace(/_/g,".")),c&&(i.ios=i.ipod=!0,i.version=c[3]?c[3].replace(/_/g,"."):null),h&&(i.wp=!0,i.version=h[1]),u&&(i.webos=!0,i.version=u[2]),f&&(i.touchpad=!0),m&&(i.blackberry=!0,i.version=m[2]),v&&(i.bb10=!0,i.version=v[2]),g&&(i.rimtabletos=!0,i.version=g[2]),y&&(n.playbook=!0),p&&(i.kindle=!0,i.version=p[1]),_&&(n.silk=!0,n.version=_[1]),!_&&i.android&&t.match(/Kindle Fire/)&&(n.silk=!0),b&&(n.chrome=!0,n.version=b[1]),w&&(n.firefox=!0,n.version=w[1]),x&&(i.firefoxos=!0,i.version=x[1]),S&&(n.ie=!0,n.version=S[1]),T&&(o||i.ios||d)&&(n.safari=!0,i.ios||(n.version=T[1])),k&&(n.webview=!0),i.tablet=!!(s||y||a&&!t.match(/Mobile/)||w&&t.match(/Tablet/)||S&&!t.match(/Phone/)&&t.match(/Touch/)),i.phone=!(i.tablet||i.ipod||!(a||l||u||m||v||b&&t.match(/Android/)||b&&t.match(/CriOS\/([\d.]+)/)||w&&t.match(/Mobile/)||S&&t.match(/Touch/)))}e.call(t,navigator.userAgent,navigator.platform),t.__detect=e}(Zepto),function(t){function e(t){return t._zid||(t._zid=h++)}function i(t,i,a,o){if(i=n(i),i.ns)var s=r(i.ns);return(m[e(t)]||[]).filter(function(t){return t&&(!i.e||t.e==i.e)&&(!i.ns||s.test(t.ns))&&(!a||e(t.fn)===e(a))&&(!o||t.sel==o)})}function n(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function r(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function a(t,e){return t.del&&!g&&t.e in y||!!e}function o(t){return b[t]||g&&y[t]||t}function s(i,r,s,c,u,h,f){var p=e(i),_=m[p]||(m[p]=[]);r.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(s);var r=n(e);r.fn=s,r.sel=u,r.e in b&&(s=function(e){var i=e.relatedTarget;return!i||i!==this&&!t.contains(this,i)?r.fn.apply(this,arguments):void 0}),r.del=h;var p=h||s;r.proxy=function(t){if(t=l(t),!t.isImmediatePropagationStopped()){t.data=c;var e=p.apply(i,t._args==d?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},r.i=_.length,_.push(r),"addEventListener"in i&&i.addEventListener(o(r.e),r.proxy,a(r,f))})}function c(t,n,r,s,c){var l=e(t);(n||"").split(/\s/).forEach(function(e){i(t,e,r,s).forEach(function(e){delete m[l][e.i],"removeEventListener"in t&&t.removeEventListener(o(e.e),e.proxy,a(e,c))})})}function l(e,i){return(i||!e.isDefaultPrevented)&&(i||(i=e),t.each(k,function(t,n){var r=i[t];e[t]=function(){return this[n]=w,r&&r.apply(i,arguments)},e[n]=x}),(i.defaultPrevented!==d?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=w)),e}function u(t){var e,i={originalEvent:t};for(e in t)S.test(e)||t[e]===d||(i[e]=t[e]);return l(i,t)}var d,h=1,f=Array.prototype.slice,p=t.isFunction,_=function(t){return"string"==typeof t},m={},v={},g="onfocusin"in window,y={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",t.event={add:s,remove:c},t.proxy=function(i,n){var r=2 in arguments&&f.call(arguments,2);if(p(i)){var a=function(){return i.apply(n,r?r.concat(f.call(arguments)):arguments)};return a._zid=e(i),a}if(_(n))return r?(r.unshift(i[n],i),t.proxy.apply(null,r)):t.proxy(i[n],i);throw new TypeError("expected function")},t.fn.bind=function(t,e,i){return this.on(t,e,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var w=function(){return!0},x=function(){return!1},S=/^([A-Z]|returnValue$|layer[XY]$)/,k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,i){return this.on(e,t,i)},t.fn.undelegate=function(t,e,i){return this.off(e,t,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,n,r,a){var o,l,h=this;return e&&!_(e)?(t.each(e,function(t,e){h.on(t,i,n,e,a)}),h):(_(i)||p(r)||r===!1||(r=n,n=i,i=d),(r===d||n===!1)&&(r=n,n=d),r===!1&&(r=x),h.each(function(d,h){a&&(o=function(t){return c(h,t.type,r),r.apply(this,arguments)}),i&&(l=function(e){var n,a=t(e.target).closest(i,h).get(0);return a&&a!==h?(n=t.extend(u(e),{currentTarget:a,liveFired:h}),(o||r).apply(a,[n].concat(f.call(arguments,1)))):void 0}),s(h,e,r,n,i,l||o)}))},t.fn.off=function(e,i,n){var r=this;return e&&!_(e)?(t.each(e,function(t,e){r.off(t,i,e)}),r):(_(i)||p(n)||n===!1||(n=i,i=d),n===!1&&(n=x),r.each(function(){c(this,e,n,i)}))},t.fn.trigger=function(e,i){return e=_(e)||t.isPlainObject(e)?t.Event(e):l(e),e._args=i,this.each(function(){e.type in y&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,n){var r,a;return this.each(function(o,s){r=u(_(e)?t.Event(e):e),r._args=n,r.target=s,t.each(i(s,e.type||e),function(t,e){return a=e.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),a},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){_(t)||(e=t,t=e.type);var i=document.createEvent(v[t]||"Events"),n=!0;if(e)for(var r in e)"bubbles"==r?n=!!e[r]:i[r]=e[r];return i.initEvent(t,n,!0),l(i)}}(Zepto),function(t){t.fn.serializeArray=function(){var e,i,n=[],r=function(t){return t.forEach?t.forEach(r):void n.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(n,a){i=a.type,e=a.name,e&&"fieldset"!=a.nodeName.toLowerCase()&&!a.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||a.checked)&&r(t(a).val())}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){function e(t){return"tagName"in t?t:t.parentNode}if(t.os.ios){var i,n={};t(document).bind("gesturestart",function(t){var r=Date.now();r-(n.last||r),n.target=e(t.target),i&&clearTimeout(i),n.e1=t.scale,n.last=r}).bind("gesturechange",function(t){n.e2=t.scale}).bind("gestureend",function(e){n.e2>0?(0!=Math.abs(n.e1-n.e2)&&t(n.target).trigger("pinch")&&t(n.target).trigger("pinch"+(n.e1-n.e2>0?"In":"Out")),n.e1=n.e2=n.last=0):"last"in n&&(n={})}),["pinch","pinchIn","pinchOut"].forEach(function(e){t.fn[e]=function(t){return this.bind(e,t)}})}}(Zepto),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t){try{return e(t)}catch(i){return null}}}}(),function(t){String.prototype.trim===t&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===t&&(Array.prototype.reduce=function(e){if(void 0===this||null===this)throw new TypeError;var i,n=Object(this),r=n.length>>>0,a=0;if("function"!=typeof e)throw new TypeError;if(0==r&&1==arguments.length)throw new TypeError;if(arguments.length>=2)i=arguments[1];else for(;;){if(a in n){i=n[a++];break}if(++a>=r)throw new TypeError}for(;r>a;)a in n&&(i=e.call(t,i,n[a],a,n)),a++;return i})}(),function(t){function e(e){return e=t(e),!(!e.width()&&!e.height())&&"none"!==e.css("display")}function i(t,e){t=t.replace(/=#\]/g,'="#"]');var i,n,r=s.exec(t);if(r&&r[2]in o&&(i=o[r[2]],n=r[3],t=r[1],n)){var a=Number(n);n=isNaN(a)?n.replace(/^["']|["']$/g,""):a}return e(t,i,n)}var n=t.zepto,r=n.qsa,a=n.matches,o=t.expr[":"]={visible:function(){return e(this)?this:void 0},hidden:function(){return e(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(t){return 0===t?this:void 0},last:function(t,e){return t===e.length-1?this:void 0},eq:function(t,e,i){return t===i?this:void 0},contains:function(e,i,n){return t(this).text().indexOf(n)>-1?this:void 0},has:function(t,e,i){return n.qsa(this,i).length?this:void 0}},s=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),c=/^\s*>/,l="Zepto"+ +new Date;n.qsa=function(e,a){return i(a,function(i,o,s){try{var u;!i&&o?i="*":c.test(i)&&(u=t(e).addClass(l),i="."+l+" "+i);var d=r(e,i)}catch(h){throw console.error("error performing selector: %o",a),h}finally{u&&u.removeClass(l)}return o?n.uniq(t.map(d,function(t,e){return o.call(t,e,d,s)})):d})},n.matches=function(t,e){return i(e,function(e,i,n){return(!e||a(t,e))&&(!i||i.call(t,null,n)===t)})}}(Zepto),function(t){function e(t,e,i,n){return Math.abs(t-e)>=Math.abs(i-n)?t-e>0?"Left":"Right":i-n>0?"Up":"Down"}function i(){u=null,h.last&&(h.el.trigger("longTap"),h={})}function n(){u&&clearTimeout(u),u=null}function r(){s&&clearTimeout(s),c&&clearTimeout(c),l&&clearTimeout(l),u&&clearTimeout(u),s=c=l=u=null,h={}}function a(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function o(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}var s,c,l,u,d,h={},f=750;t(document).ready(function(){var p,_,m,v,g=0,y=0;"MSGesture"in window&&(d=new MSGesture,d.target=document.body),t(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;
e&&(h.el.trigger("swipe"),h.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(e){(!(v=o(e,"down"))||a(e))&&(m=v?e:e.touches[0],e.touches&&1===e.touches.length&&h.x2&&(h.x2=void 0,h.y2=void 0),p=Date.now(),_=p-(h.last||p),h.el=t("tagName"in m.target?m.target:m.target.parentNode),s&&clearTimeout(s),h.x1=m.pageX,h.y1=m.pageY,_>0&&250>=_&&(h.isDoubleTap=!0),h.last=p,u=setTimeout(i,f),d&&v&&d.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(t){(!(v=o(t,"move"))||a(t))&&(m=v?t:t.touches[0],n(),h.x2=m.pageX,h.y2=m.pageY,g+=Math.abs(h.x1-h.x2),y+=Math.abs(h.y1-h.y2))}).on("touchend MSPointerUp pointerup",function(i){(!(v=o(i,"up"))||a(i))&&(n(),h.x2&&Math.abs(h.x1-h.x2)>30||h.y2&&Math.abs(h.y1-h.y2)>30?l=setTimeout(function(){h.el.trigger("swipe"),h.el.trigger("swipe"+e(h.x1,h.x2,h.y1,h.y2)),h={}},0):"last"in h&&(30>g&&30>y?c=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=r,h.el.trigger(e),h.isDoubleTap?(h.el&&h.el.trigger("doubleTap"),h={}):s=setTimeout(function(){s=null,h.el&&h.el.trigger("singleTap"),h={}},250)},0):h={}),g=y=0)}).on("touchcancel MSPointerCancel pointercancel",r),t(window).on("scroll",r)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto),function(t,e){"use strict";function i(t,e,i){var n={};return n[t.key]=e,t.pos&&(n[t.pos]=i),n}function n(t,e){for(var i,n=e.length,r=t.length;n>r;)i=e[--n],e.splice(n,1),i.unmount()}function r(t,e){Object.keys(t.tags).forEach(function(i){var n=t.tags[i];C(n)?_(n,function(t){k(t,i,e)}):k(n,i,e)})}function a(t,e,i){var n,r=t._root;for(t._virts=[];r;)n=r.nextSibling,i?e.insertBefore(r,i._root):e.appendChild(r),t._virts.push(r),r=n}function o(t,e,i,n){for(var r,a=t._root,o=0;n>o;o++)r=a.nextSibling,e.insertBefore(a,i._root),a=r}function s(t,e,s){g(t,"each");var c,l=typeof b(t,"no-reorder")!==et||g(t,"no-reorder"),d=N(t),h=q[d]||{tmpl:t.outerHTML},f=at.test(d),p=t.parentNode,_=document.createTextNode(""),m=x(t),v="option"===d.toLowerCase(),y=[],w=[],S="VIRTUAL"==t.tagName;s=lt.loopKeys(s),p.insertBefore(_,t),e.one("before-mount",function(){t.parentNode.removeChild(t),p.stub&&(p=e.root)}).on("update",function(){var g=lt(s.val,e),b=document.createDocumentFragment();C(g)||(c=g||!1,g=c?Object.keys(g).map(function(t){return i(s,t,g[t])}):[]);for(var x=0,k=g.length;k>x;x++){var T=g[x],E=l&&T instanceof Object&&!c,N=w.indexOf(T),M=~N&&E?N:x,A=y[M];T=!c&&s.key?i(s,T,x):T,!E&&!A||E&&!~N||!A?(A=new u(h,{parent:e,isLoop:!0,hasImpl:!!q[d],root:f?p:t.cloneNode(),item:T},t.innerHTML),A.mount(),S&&(A._root=A.root.firstChild),x!=y.length&&y[x]?(S?a(A,p,y[x]):p.insertBefore(A.root,y[x].root),w.splice(x,0,T)):S?a(A,b):b.appendChild(A.root),y.splice(x,0,A),M=x):A.update(T,!0),M!==x&&E&&y[x]&&(S?o(A,p,y[x],t.childNodes.length):p.insertBefore(A.root,y[x].root),s.pos&&(A[s.pos]=x),y.splice(x,0,y.splice(M,1)[0]),w.splice(x,0,w.splice(M,1)[0]),!m&&A.tags&&r(A,x)),A._item=T,O(A,"_parent",e)}if(n(g,y),v){if(p.appendChild(b),p.length){var R,P=p.options;for(p.selectedIndex=R=-1,x=0;x<P.length;x++)(P[x].selected=P[x].__selected)&&0>R&&(p.selectedIndex=R=x)}}else p.insertBefore(b,_);m&&(e.tags[d]=y),w=g.slice()})}function c(t,e,i,n){L(t,function(t){if(1==t.nodeType){if(t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||b(t,"each")?1:0,i){var r=x(t);r&&!t.isLoop&&i.push(T(r,{root:t,parent:e},t.innerHTML,e))}t.isLoop&&!n||z(t,e,[])}})}function l(t,e,i){function n(t,e,n){lt.hasExpr(e)&&i.push(M({dom:t,expr:e},n))}L(t,function(t){var i,r=t.nodeType;return 3==r&&"STYLE"!=t.parentNode.tagName&&n(t,t.nodeValue),1==r?(i=b(t,"each"))?(s(t,e,i),!1):(_(t.attributes,function(e){var i=e.name,r=i.split("__")[1];return n(t,e.value,{attr:r||i,bool:r}),r?(g(t,i),!1):void 0}),x(t)?!1:void 0):void 0})}function u(t,i,n){function r(){var t=S&&x?h:b||h;_(L.attributes,function(e){var i=e.value;f[y(e.name)]=lt.hasExpr(i)?lt(i,t):i}),_(Object.keys(j),function(e){f[y(e)]=lt(j[e],t)})}function a(t){for(var e in k)typeof h[e]!==nt&&R(h,e)&&(h[e]=t[e])}function o(){h.parent&&x&&_(Object.keys(h.parent),function(t){var e=!A(ot,t)&&A(H,t);(typeof h[t]===nt||e)&&(e||H.push(t),h[t]=h.parent[t])})}function s(t){h.update(t,!0)}function u(t){if(_(N,function(e){e[t?"mount":"unmount"]()}),b){var e=t?"on":"off";x?b[e]("unmount",h.unmount):b[e]("update",s)[e]("unmount",h.unmount)}}var d,h=G.observable(this),f=$(i.opts)||{},b=i.parent,x=i.isLoop,S=i.hasImpl,k=P(i.item),T=[],N=[],L=i.root,I=L.tagName.toLowerCase(),j={},H=[];t.name&&L._tag&&L._tag.unmount(!0),this.isMounted=!1,L.isLoop=x,L._tag=this,O(this,"_riot_id",++X),M(this,{parent:b,root:L,opts:f,tags:{}},k),_(L.attributes,function(t){var e=t.value;lt.hasExpr(e)&&(j[t.name]=e)}),d=ut(t.tmpl,n),O(this,"update",function(t,e){return t=P(t),o(),t&&v(k)&&(a(t),k=t),M(h,t),r(),h.trigger("update",t),p(T,h),e&&h.parent?h.parent.one("updated",function(){h.trigger("updated")}):ht(function(){h.trigger("updated")}),this}),O(this,"mixin",function(){return _(arguments,function(t){var e;t=typeof t===et?G.mixin(t):t,m(t)?(e=new t,t=t.prototype):e=t,_(Object.getOwnPropertyNames(t),function(t){"init"!=t&&(h[t]=m(e[t])?e[t].bind(h):e[t])}),e.init&&e.init.bind(h)()}),this}),O(this,"mount",function(){r();var e=G.mixin(Z);if(e&&h.mixin(e),t.fn&&t.fn.call(h,f),l(d,h,T),u(!0),t.attrs&&D(t.attrs,function(t,e){w(L,t,e)}),(t.attrs||S)&&l(h.root,h,T),h.parent&&!x||h.update(k),h.trigger("before-mount"),x&&!S)L=d.firstChild;else{for(;d.firstChild;)L.appendChild(d.firstChild);L.stub&&(L=b.root)}O(h,"root",L),x&&c(h.root,h.parent,null,!0),!h.parent||h.parent.isMounted?(h.isMounted=!0,h.trigger("mount")):h.parent.one("mount",function(){Y(h.root)||(h.parent.isMounted=h.isMounted=!0,h.trigger("mount"))})}),O(this,"unmount",function(t){var i,n=L,r=n.parentNode,a=W.indexOf(h);if(h.trigger("before-unmount"),~a&&W.splice(a,1),this._virts&&_(this._virts,function(t){t.parentNode&&t.parentNode.removeChild(t)}),r){if(b)i=E(b),C(i.tags[I])?_(i.tags[I],function(t,e){t._riot_id==h._riot_id&&i.tags[I].splice(e,1)}):i.tags[I]=e;else for(;n.firstChild;)n.removeChild(n.firstChild);t?g(r,"riot-tag"):r.removeChild(n)}h.trigger("unmount"),u(),h.off("*"),h.isMounted=!1,delete L._tag}),c(d,this,N)}function d(e,i,n,r){if(i.className){i._tag=n,i._handler=e;var a=i.className.replace(/\s/g,".").replace(/\.?\{.+\}/g,"");V[n.parent.root.tagName+"__"+a]||(V[n.parent.root.tagName+"__"+a]=a,J(n.parent.root).on(clickEvent,"."+a,function(e){if(this.getAttribute("riot-item")){var n=J(this.getAttribute("riot-item"));this.getAttribute("riot-addClass")?n.addClass(this.getAttribute("riot-addClass")):this.getAttribute("riot-removeClass")&&n.removeClass(this.getAttribute("riot-removeClass"))}var a,o=this._tag,s=o._parent,c=o._item;if(!c)for(;s&&!c;)c=s._item,s=s._parent;e=e||t.event,R(e,"currentTarget")&&(e.currentTarget=i),R(e,"target")&&(e.target=e.srcElement),R(e,"which")&&(e.which=e.charCode||e.keyCode),e.item=c,this._handler.call(o,e)===!0||/radio|check/.test(i.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),!e.preventUpdate&&r&&(a="all"===r&&c?E(s):o,a.update())}))}}function h(e,i,n,r){n[e]=function(e){var a,o=r._parent,s=r._item;if(!s)for(;o&&!s;)s=o._item,o=o._parent;e=e||t.event,R(e,"currentTarget")&&(e.currentTarget=n),R(e,"target")&&(e.target=e.srcElement),R(e,"which")&&(e.which=e.charCode||e.keyCode),e.item=s,i.call(r,e)===!0||/radio|check/.test(n.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),e.preventUpdate||(a=s?E(o):r,a.update())}}function f(t,e,i){t&&(t.insertBefore(i,e),t.removeChild(e))}function p(t,e){_(t,function(t,i){var n=t.dom,r=t.attr,a=lt(t.expr,e),o=t.dom.parentNode;if(t.bool?(a=!!a,"selected"===r&&(n.__selected=a)):null==a&&(a=""),t.value!==a){if(t.value=a,!r)return a+="",void(o&&("TEXTAREA"===o.tagName?(o.value=a,st||(n.nodeValue=a)):n.nodeValue=a));if("value"===r)return void(n.value=a);if("class"!==r&&g(n,r),m(a))"onclickdelegate"===r?d(a,n,e,!1):"onclickdelegateupdate"===r?d(a,n,e,!0):"onclickdelegateupdateall"===r?d(a,n,e,"all"):h(r,a,n,e);else if("if"==r){var s=t.stub,c=function(){f(s.parentNode,s,n)},l=function(){f(n.parentNode,n,s)};a?s&&(c(),n.inStub=!1,Y(n)||L(n,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(s=t.stub=s||document.createTextNode(""),n.parentNode?l():(e.parent||e).one("updated",l),n.inStub=!0)}else"show"===r?n.style.display=a?"":"none":"hide"===r?n.style.display=a?"none":"":t.bool?(n[r]=a,a&&w(n,r,r)):(0===a||a&&typeof a!==it)&&(U(r,K)&&r!=Q&&(r=r.slice(K.length)),w(n,r,a))}})}function _(t,e){for(var i,n=t?t.length:0,r=0;n>r;r++)i=t[r],null!=i&&e(i,r)===!1&&r--;return t}function m(t){return typeof t===rt||!1}function v(t){return t&&typeof t===it}function g(t,e){t.removeAttribute(e)}function y(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function b(t,e){return t.getAttribute(e)}function w(t,e,i){t.setAttribute(e,i)}function x(t){return t.tagName&&q[b(t,tt)||b(t,Q)||t.tagName.toLowerCase()]}function S(t,e,i){var n=i.tags[e];n?(C(n)||n!==t&&(i.tags[e]=[n]),A(i.tags[e],t)||i.tags[e].push(t)):i.tags[e]=t}function k(t,e,i){var n,r=t.parent;r&&(n=r.tags[e],C(n)?n.splice(i,0,n.splice(n.indexOf(t),1)[0]):S(t,e,r))}function T(t,e,i,n){var r=new u(t,e,i),a=N(e.root),o=E(n);return r.parent=o,r._parent=n,S(r,a,o),o!==n&&S(r,a,n),e.root.innerHTML="",r}function E(t){for(var e=t;!x(e.root)&&e.parent;)e=e.parent;return e}function O(t,e,i,n){return Object.defineProperty(t,e,M({value:i,enumerable:!1,writable:!1,configurable:!1},n)),t}function N(t){var e=x(t),i=b(t,"name"),n=i&&!lt.hasExpr(i)?i:e?e.name:t.tagName.toLowerCase();return n}function M(t){for(var e,i=arguments,n=1;n<i.length;++n)if(e=i[n])for(var r in e)R(t,r)&&(t[r]=e[r]);return t}function A(t,e){return~t.indexOf(e)}function C(t){return Array.isArray(t)||t instanceof Array}function R(t,e){var i=Object.getOwnPropertyDescriptor(t,e);return typeof t[e]===nt||i&&i.writable}function P(t){if(!(t instanceof u||t&&typeof t.trigger==rt))return t;var e={};for(var i in t)A(ot,i)||(e[i]=t[i]);return e}function L(t,e){if(t){if(e(t)===!1)return;for(t=t.firstChild;t;)L(t,e),t=t.nextSibling}}function D(t,e){for(var i,n=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;i=n.exec(t);)e(i[1].toLowerCase(),i[2]||i[3]||i[4])}function Y(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function I(t){return document.createElement(t)}function j(t,e){return(e||document).querySelectorAll(t)}function H(t,e){return(e||document).querySelector(t)}function $(t){function e(){}return e.prototype=t,new e}function F(t){return b(t,"id")||b(t,"name")}function z(t,e,i){var n=F(t),r=function(r){A(i,n)||(e[n]=t)};n&&(lt.hasExpr(n)?e.one("mount",function(){n=F(t),r(e[n])}):r(e[n]))}function U(t,e){return t.slice(0,e.length)===e}function B(t,e,i){var n=q[e],r=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",n&&t&&(n=new u(n,{root:t,opts:i},r)),n&&n.mount&&(n.mount(),A(W,n)||W.push(n)),n}var G={version:"v2.3.17",settings:{}},X=0,W=[],q={},J=t.Zepto||t.jQuery,V={},Z="__global_mixin",K="riot-",Q=K+"tag",tt="data-is",et="string",it="object",nt="undefined",rt="function",at=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,ot=["_item","_id","_parent","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],st=0|(t&&t.document||{}).documentMode;G.observable=function(t){t=t||{};var e={},i=Array.prototype.slice,n=function(t,e){t.replace(/\S+/g,e)};return Object.defineProperties(t,{on:{value:function(i,r){return"function"!=typeof r?t:(n(i,function(t,i){(e[t]=e[t]||[]).push(r),r.typed=i>0}),t)},enumerable:!1,writable:!1,configurable:!1},off:{value:function(i,r){return"*"!=i||r?n(i,function(t){if(r)for(var i,n=e[t],a=0;i=n&&n[a];++a)i==r&&n.splice(a--,1);else delete e[t]}):e={},t},enumerable:!1,writable:!1,configurable:!1},one:{value:function(e,i){function n(){t.off(e,n),i.apply(t,arguments)}return t.on(e,n)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(r){for(var a,o=arguments.length-1,s=new Array(o),c=0;o>c;c++)s[c]=arguments[c+1];return n(r,function(n){a=i.call(e[n]||[],0);for(var r,o=0;r=a[o];++o){if(r.busy)return;r.busy=1,r.apply(t,r.typed?[n].concat(s):s),a[o]!==r&&o--,r.busy=0}e["*"]&&"*"!=n&&t.trigger.apply(t,["*",n].concat(s))}),t},enumerable:!1,writable:!1,configurable:!1}}),t},function(e){function i(t){return t.split(/[\/?#]/)}function n(t,e){var i=new RegExp("^"+e[k](/\*/g,"([^/?#]+?)")[k](/\.\./,".*")+"$"),n=t.match(i);return n?n.slice(1):void 0}function r(t,e){var i;return function(){clearTimeout(i),i=setTimeout(t,e)}}function a(t){p=r(d,1),M[x](T,p),M[x](E,p),A[x](L,h),t&&d(!0)}function o(){this.$=[],e.observable(this),Y.on("stop",this.s.bind(this)),Y.on("emit",this.e.bind(this))}function s(t){return t[k](/^\/|\/$/,"")}function c(t){return"string"==typeof t}function l(t){return(t||R.href||"")[k](y,"")}function u(t){return"#"==_[0]?(t||R.href||"").split(_)[1]||"":l(t)[k](_,"")}function d(t){var e=0==H;if(!(H>=N)&&(H++,j.push(function(){var e=u();(t||e!=m)&&(Y[O]("emit",e),m=e)}),e)){for(;j.length;)j[0](),j.shift();H=0}}function h(t){if(!(1!=t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&"A"!=e.nodeName;)e=e.parentNode;!e||"A"!=e.nodeName||e[S]("download")||!e[S]("href")||e.target&&"_self"!=e.target||-1==e.href.indexOf(R.href.match(y)[0])||(e.href==R.href||e.href.split("#")[0]!=R.href.split("#")[0]&&("#"==_||0===l(e.href).indexOf(_))&&f(u(e.href),e.title||A.title))&&t.preventDefault()}}function f(t,e,i){return C?(t=_+s(t),e=e||A.title,i?C.replaceState(null,e,t):C.pushState(null,e,t),A.title=e,I=!1,d(),I):Y[O]("emit",u(t))}var p,_,m,v,g,y=/^.+?\/+[^\/]+/,b="EventListener",w="remove"+b,x="add"+b,S="hasAttribute",k="replace",T="popstate",E="hashchange",O="trigger",N=3,M="undefined"!=typeof t&&t,A="undefined"!=typeof document&&document,C=M&&history,R=M&&(C.location||M.location),P=o.prototype,L=A&&"ontouchstart"in A.documentElement?"tap":"click",D=!1,Y=e.observable(),I=!1,j=[],H=0;P.m=function(t,e,i){!c(t)||e&&!c(e)?e?this.r(t,e):this.r("@",t):f(t,e,i||!1)},P.s=function(){this.off("*"),this.$=[]},P.e=function(t){this.$.concat("@").some(function(e){var i=("@"==e?v:g)(s(t),s(e));return"undefined"!=typeof i?(this[O].apply(null,[e].concat(i)),I=!0):void 0},this)},P.r=function(t,e){"@"!=t&&(t="/"+s(t),this.$.push(t)),this.on(t,e)};var $=new o,F=$.m.bind($);F.create=function(){var t=new o;return t.m.stop=t.s.bind(t),t.m.bind(t)},F.base=function(t){_=t||"#",m=u()},F.exec=function(){d(!0)},F.parser=function(t,e){t||e||(v=i,g=n),t&&(v=t),e&&(g=e)},F.query=function(){var t={},e=R.href||m;return e[k](/[?&](.+?)=([^&]*)/g,function(e,i,n){t[i]=n}),t},F.stop=function(){D&&(M&&(M[w](T,p),M[w](E,p),A[w](L,h)),Y[O]("stop"),D=!1)},F.start=function(t){D||(M&&("complete"==document.readyState?a(t):M[x]("load",function(){setTimeout(function(){a(t)},1)})),D=!0)},F.base(),F.parser(),e.route=F}(G);var ct=function(t){function e(t){return t}function i(t,e){return e||(e=v),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?l:"")}function n(t){if(t===p)return _;var e=t.split(" ");if(2!==e.length||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(t))throw new Error('Unsupported brackets "'+t+'"');return e=e.concat(t.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" ")),e[4]=i(e[1].length>1?/{[\S\s]*?}/:_[4],e),e[5]=i(t.length>3?/\\({|})/g:_[5],e),e[6]=i(_[6],e),e[7]=RegExp("\\\\("+e[3]+")|([[({])|("+e[3]+")|"+h,l),e[8]=t,e}function r(t){return t instanceof RegExp?s(t):v[t]}function a(t){(t||(t=p))!==v[8]&&(v=n(t),s=t===p?e:i,v[9]=s(_[9]),v[10]=s(_[10])),m=t}function o(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:a,get:function(){return m},enumerable:!0}),c=t,a(e)}var s,c,l="g",u=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,d=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,h=d.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,f={"(":RegExp("([()])|"+h,l),"[":RegExp("([[\\]])|"+h,l),"{":RegExp("([{}])|"+h,l)},p="{ }",_=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+h,l),p,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],m=t,v=[];return r.split=function(t,e,i){function n(t){e||o?l.push(t&&t.replace(i[5],"$1")):l.push(t)}function r(t,e,i){var n,r=f[e];for(r.lastIndex=i,i=1;(n=r.exec(t))&&(!n[1]||(n[1]===e?++i:--i)););return i?t.length:r.lastIndex}i||(i=v);var a,o,s,c,l=[],u=i[6];for(o=s=u.lastIndex=0;a=u.exec(t);){if(c=a.index,o){if(a[2]){u.lastIndex=r(t,a[2],u.lastIndex);continue}if(!a[3])continue}a[1]||(n(t.slice(s,c)),s=u.lastIndex,u=i[6+(o^=1)],u.lastIndex=s)}return t&&s<t.length&&n(t.slice(s)),l},r.hasExpr=function(t){return v[4].test(t)},r.loopKeys=function(t){var e=t.match(v[9]);return e?{key:e[1],pos:e[2],val:v[0]+e[3].trim()+v[1]}:{val:t.trim()}},r.hasRaw=function(t){return v[10].test(t)},r.array=function(t){return t?n(t):v},Object.defineProperty(r,"settings",{set:o,get:function(){return c}}),r.settings="undefined"!=typeof G&&G.settings||{},r.set=a,r.R_STRINGS=d,r.R_MLCOMMS=u,r.S_QBLOCKS=h,r}(),lt=function(){function e(t,e){return t?(s[t]||(s[t]=n(t))).call(e,i):t}function i(t,i){e.errorHandler&&(t.riotData={tagName:i&&i.root&&i.root.tagName,_riot_id:i&&i._riot_id},e.errorHandler(t))}function n(t){var e=r(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function r(t){var e,i=[],n=ct.split(t.replace(/\u2057/g,'"'),1);if(n.length>2||n[0]){var r,o,s=[];for(r=o=0;r<n.length;++r)e=n[r],e&&(e=1&r?a(e,1,i):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(s[o++]=e);e=2>o?s[0]:"["+s.join(",")+'].join("")'}else e=a(n[1],0,i);return i[0]&&(e=e.replace(l,function(t,e){return i[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function a(t,e,i){function n(e,i){var n,r=1,a=u[e];for(a.lastIndex=i.lastIndex;n=a.exec(t);)if(n[0]===e)++r;else if(!--r)break;i.lastIndex=r?t.length:a.lastIndex}if("="===t[0]&&(t=t.slice(1)),t=t.replace(c,function(t,e){return t.length>2&&!e?""+(i.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var r,a=[],s=0;t&&(r=t.match(d))&&!r.index;){var l,h,f=/,|([[{(])|$/g;for(t=RegExp.rightContext,l=r[2]?i[r[2]].slice(1,-1).trim().replace(/\s+/g," "):r[1];h=(r=f.exec(t))[1];)n(h,f);h=t.slice(0,r.index),t=RegExp.rightContext,a[s++]=o(h,1,l)}t=s?s>1?"["+a.join(",")+'].join(" ").trim()':a[0]:o(t,e)}return t}function o(t,e,i){var n;return t=t.replace(f,function(t,e,i,r,a){return i&&(r=n?0:r+t.length,"this"!==i&&"global"!==i&&"window"!==i?(t=e+'("'+i+h+i,r&&(n="."===(a=a[r])||"("===a||"["===a)):r&&(n=!p.test(a.slice(r)))),t}),n&&(t="try{return "+t+"}catch(e){E(e,this)}"),i?t=(n?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+i+'":""':e&&(t="function(v){"+(n?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var s={};e.haveRaw=ct.hasRaw,e.hasExpr=ct.hasExpr,e.loopKeys=ct.loopKeys,e.errorHandler=null;var c=RegExp(ct.S_QBLOCKS,"g"),l=/\x01(\d+)~/g,u={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},d=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\x01(\d+)~):/,h='"in this?this:'+("object"!=typeof t?"global":"window")+").",f=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,p=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return e.parse=function(t){return t},e.version=ct.version="v2.3.21",e}(),ut=function ft(){function ft(i,n){var r=i&&i.match(/^\s*<([-\w]+)/),a=r&&r[1].toLowerCase(),o=I("div");return i=e(i,n),s.test(a)?o=t(o,i,a):o.innerHTML=i,o.stub=!0,o}function t(t,e,i){var n="o"===i[0],r=n?"select>":"table>";if(t.innerHTML="<"+r+e.trim()+"</"+r,r=t.firstChild,n)r.selectedIndex=-1;else{var a=o[i];a&&1===r.childElementCount&&(r=H(a,r))}return r}function e(t,e){if(!i.test(t))return t;var o={};return e=e&&e.replace(r,function(t,e,i){return o[e]=o[e]||i,""}).trim(),t.replace(a,function(t,e,i){return o[e]||i||""}).replace(n,function(t,i){return e||i||""})}var i=/<yield\b/i,n=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,r=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,a=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,o={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},s=st&&10>st?at:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;return ft}(),dt=function(e){if(!t)return{add:function(){},inject:function(){}};var i=function(){var t=I("style");w(t,"type","text/css");var e=H("style[type=riot]");return e?(e.id&&(t.id=e.id),e.parentNode.replaceChild(t,e)):document.getElementsByTagName("head")[0].appendChild(t),t}(),n=i.styleSheet,r="";return Object.defineProperty(e,"styleNode",{value:i,writable:!0}),{add:function(t){r+=t},inject:function(){r&&(n?n.cssText+=r:i.innerHTML+=r,r="")}}}(G),ht=function(t){var e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame;if(!e||/iP(ad|hone|od).*OS 6/.test(t.navigator.userAgent)){var i=0;e=function(t){var e=Date.now(),n=Math.max(16-(e-i),0);setTimeout(function(){t(i=e+n)},n)}}return e}(t||{});G.util={brackets:ct,tmpl:lt},G.mixin=function(){var t={};return function(e,i){return v(e)?(i=e,void(t[Z]=M(t[Z]||{},i))):i?void(t[e]=i):t[e]}}(),G.tag=function(t,e,i,n,r){return m(n)&&(r=n,/^[\w\-]+\s?=/.test(i)?(n=i,i=""):n=""),i&&(m(i)?r=i:dt.add(i)),t=t.toLowerCase(),q[t]={name:t,tmpl:e,attrs:n,fn:r},t},G.tag2=function(t,e,i,n,r){return i&&dt.add(i),q[t]={name:t,tmpl:e,attrs:n,fn:r},t},G.mount=function(t,e,i){function n(t){var e="";return _(t,function(t){/[^-\w]/.test(t)||(t=t.trim().toLowerCase(),e+=",["+tt+'="'+t+'"],['+Q+'="'+t+'"]')}),e}function r(){var t=Object.keys(q);return t+n(t)}function a(t){if(t.tagName){var n=b(t,tt)||b(t,Q);e&&n!==e&&(n=e,w(t,tt,e));var r=B(t,n||t.tagName.toLowerCase(),i);r&&c.push(r)}else t.length&&_(t,a)}var o,s,c=[];if(dt.inject(),v(e)&&(i=e,e=0),typeof t===et?("*"===t?t=s=r():t+=n(t.split(/, */)),o=t?j(t):[]):o=t,"*"===e){if(e=s||r(),o.tagName)o=j(e,o);else{var l=[];_(o,function(t){l.push(j(e,t))}),o=l}e=0}return a(o),c},G.update=function(){return _(W,function(t){t.update()})},G.Tag=u,typeof exports===it?module.exports=G:typeof define===rt&&typeof define.amd!==nt?define(function(){return G}):t.riot=G}("undefined"!=typeof window?window:void 0),function(t){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i,n;for(i=e||0,n=this.length;n>i;i+=1)if(this[i]===t)return i;return-1});var e,i,n,r,a,o,s,c=this,l=function(t,e){for(var i=t.toString();i.length<e;)i="0"+i;return i},u=function(e,i){return i!==t?(e.year(i.year()||i.year),e.month(i.month()||i.month),e.day(i.day()||i.day),e.hours(i.hours()||i.hours),e.minutes(i.minutes()||i.minutes),e.seconds(i.seconds()||i.seconds),e.milliseconds(i.milliseconds()||i.milliseconds),e):t},d=function(t,e){var i,n="";return i=t.slice(e,e+1),""===i||isNaN(Number(i))||(n+="%H"),i=t.charAt(e+2),""!==i&&":"===i&&(n+=i),i=t.slice(e+3,e+4),""===i||isNaN(Number(i))||(n+="%M"),i=t.charAt(e+5),""!==i&&":"===i&&(n+=i),i=t.slice(e+6,e+7),""===i||isNaN(Number(i))||(n+="%S"),n},h=function(t,e){var i,n,r=[t.slice(e,e+1),t.charAt(e+2),t.slice(e+3,e+4),t.charAt(e+5),t.slice(e+6,e+9)];return isNaN(Number(r[0]))||isNaN(Number(r[2]))||isNaN(Number(r[4]))?(n=[t.slice(e,e+3),t.charAt(e+4),t.slice(e+5,e+6),t.charAt(e+7),t.slice(e+8,e+9)],isNaN(Number(n[0]))||isNaN(Number(n[2]))||isNaN(Number(n[4]))?"":("-"===n[1]&&"-"===n[3]&&(i="%Y-%m-%d"),i)):("."===r[1]&&"."===r[3]?i="%d.%m.%Y":"-"===r[1]&&"-"===r[3]?i="%m-%d-%Y":"/"===r[1]&&"/"===r[3]&&(i="%m/%d/%Y"),i)},f=c.tempus,p=c.navigator||{},_="en",m={en:{JANUARY_SHORT:"Jan",FEBRUARY_SHORT:"Feb",MARCH_SHORT:"Mar",APRIL_SHORT:"Apr",MAY_SHORT:"May",JUNE_SHORT:"Jun",JULY_SHORT:"Jul",AUGUST_SHORT:"Aug",SEPTEMBER_SHORT:"Sep",OCTOBER_SHORT:"Oct",NOVEMBER_SHORT:"Nov",DECEMBER_SHORT:"Dec",JANUARY_LONG:"January",FEBRUARY_LONG:"February",MARCH_LONG:"March",APRIL_LONG:"April",MAY_LONG:"May",JUNE_LONG:"June",JULY_LONG:"July",AUGUST_LONG:"August",SEPTEMBER_LONG:"September",OCTOBER_LONG:"October",NOVEMBER_LONG:"November",DECEMBER_LONG:"December",SUNDAY_SHORT:"Sun",MONDAY_SHORT:"Mon",TUESDAY_SHORT:"Tue",WEDNESDAY_SHORT:"Wed",THURSDAY_SHORT:"Thu",FRIDAY_SHORT:"Fri",SATURDAY_SHORT:"Sat",SUNDAY_LONG:"Sunday",MONDAY_LONG:"Monday",TUESDAY_LONG:"Tuesday",WEDNESDAY_LONG:"Wednesday",THURSDAY_LONG:"Thursday",FRIDAY_LONG:"Friday",SATURDAY_LONG:"Saturday"},ru:{JANUARY_SHORT:"Янв",FEBRUARY_SHORT:"Фев",MARCH_SHORT:"Мар",APRIL_SHORT:"Апр",MAY_SHORT:"Май",JUNE_SHORT:"Июн",JULY_SHORT:"Июл",AUGUST_SHORT:"Авг",SEPTEMBER_SHORT:"Сен",OCTOBER_SHORT:"Окт",NOVEMBER_SHORT:"Ноя",DECEMBER_SHORT:"Дек",JANUARY_LONG:"Январь",FEBRUARY_LONG:"Февраль",MARCH_LONG:"Март",APRIL_LONG:"Апрель",MAY_LONG:"Май",JUNE_LONG:"Июнь",JULY_LONG:"Июль",AUGUST_LONG:"Август",SEPTEMBER_LONG:"Сентябрь",OCTOBER_LONG:"Октябрь",NOVEMBER_LONG:"Ноябрь",DECEMBER_LONG:"Декабрь",SUNDAY_SHORT:"Вс",MONDAY_SHORT:"Пн",TUESDAY_SHORT:"Вт",WEDNESDAY_SHORT:"Ср",THURSDAY_SHORT:"Чт",FRIDAY_SHORT:"Пт",SATURDAY_SHORT:"Сб",SUNDAY_LONG:"Воскресенье",MONDAY_LONG:"Понедельник",TUESDAY_LONG:"Вторник",WEDNESDAY_LONG:"Среда",THURSDAY_LONG:"Четверг",FRIDAY_LONG:"Пятница",SATURDAY_LONG:"Суббота"},ua:{JANUARY_SHORT:"Січ",FEBRUARY_SHORT:"Лют",MARCH_SHORT:"Берез",APRIL_SHORT:"Квіт",MAY_SHORT:"Трав",JUNE_SHORT:"Черв",JULY_SHORT:"Лип",AUGUST_SHORT:"Серп",SEPTEMBER_SHORT:"Верес",OCTOBER_SHORT:"Жовт",NOVEMBER_SHORT:"Листоп",DECEMBER_SHORT:"Груд",JANUARY_LONG:"Січень",FEBRUARY_LONG:"Лютий",MARCH_LONG:"Березень",APRIL_LONG:"Квітень",MAY_LONG:"Травень",JUNE_LONG:"Червень",JULY_LONG:"Липень",AUGUST_LONG:"Серпень",SEPTEMBER_LONG:"Вересень",OCTOBER_LONG:"Жовтень",NOVEMBER_LONG:"Листопад",DECEMBER_LONG:"Грудень",SUNDAY_SHORT:"Нд",MONDAY_SHORT:"Пн",TUESDAY_SHORT:"Вт",WEDNESDAY_SHORT:"Ср",THURSDAY_SHORT:"Чт",FRIDAY_SHORT:"Пт",SATURDAY_SHORT:"Сб",SUNDAY_LONG:"Неділя",MONDAY_LONG:"Понеділок",TUESDAY_LONG:"Вівторок",WEDNESDAY_LONG:"Середа",THURSDAY_LONG:"Четвер",FRIDAY_LONG:"П’ятниця",SATURDAY_LONG:"Субота"},de:{JANUARY_SHORT:"Jan",FEBRUARY_SHORT:"Feb",MARCH_SHORT:"März",APRIL_SHORT:"Apr",MAY_SHORT:"Mai",JUNE_SHORT:"Juni",JULY_SHORT:"Juli",AUGUST_SHORT:"Aug",SEPTEMBER_SHORT:"Sept",OCTOBER_SHORT:"Okt",NOVEMBER_SHORT:"Nov",DECEMBER_SHORT:"Dez",JANUARY_LONG:"Januar",FEBRUARY_LONG:"Februar",MARCH_LONG:"März",APRIL_LONG:"April",MAY_LONG:"Mai",JUNE_LONG:"Juni",JULY_LONG:"Juli",AUGUST_LONG:"August",SEPTEMBER_LONG:"September",OCTOBER_LONG:"Oktober",NOVEMBER_LONG:"November",DECEMBER_LONG:"Dezember",SUNDAY_SHORT:"So",MONDAY_SHORT:"Mo",TUESDAY_SHORT:"Di",WEDNESDAY_SHORT:"Mi",THURSDAY_SHORT:"Do",FRIDAY_SHORT:"Fr",SATURDAY_SHORT:"Sa",SUNDAY_LONG:"Sonntag",MONDAY_LONG:"Montag",TUESDAY_LONG:"Dienstag",WEDNESDAY_LONG:"Mittwoch",THURSDAY_LONG:"Donnerstag",FRIDAY_LONG:"Freitag",SATURDAY_LONG:"Samstag"}},v=function(){return[m[_].JANUARY_LONG,m[_].FEBRUARY_LONG,m[_].MARCH_LONG,m[_].APRIL_LONG,m[_].MAY_LONG,m[_].JUNE_LONG,m[_].JULY_LONG,m[_].AUGUST_LONG,m[_].SEPTEMBER_LONG,m[_].OCTOBER_LONG,m[_].NOVEMBER_LONG,m[_].DECEMBER_LONG]},g=function(){return[m[_].JANUARY_SHORT,m[_].FEBRUARY_SHORT,m[_].MARCH_SHORT,m[_].APRIL_SHORT,m[_].MAY_SHORT,m[_].JUNE_SHORT,m[_].JULY_SHORT,m[_].AUGUST_SHORT,m[_].SEPTEMBER_SHORT,m[_].OCTOBER_SHORT,m[_].NOVEMBER_SHORT,m[_].DECEMBER_SHORT]},y=function(){return[m[_].SUNDAY_LONG,m[_].MONDAY_LONG,m[_].TUESDAY_LONG,m[_].WEDNESDAY_LONG,m[_].THURSDAY_LONG,m[_].FRIDAY_LONG,m[_].SATURDAY_LONG]},b=function(){return[m[_].SUNDAY_SHORT,m[_].MONDAY_SHORT,m[_].TUESDAY_SHORT,m[_].WEDNESDAY_SHORT,m[_].THURSDAY_SHORT,m[_].FRIDAY_SHORT,m[_].SATURDAY_SHORT]},w=function(e,i,n){var r;r=c.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?i&&(c.JSON===t?alert("Please, include json2 into your project if you want use old browsers!\nhttps://github.com/douglascrockford/JSON-js/blob/master/json2.js"):i(JSON.parse(r.responseText))):n&&n(r))},r.open("GET",e,!1),r.send()},x={"%d":{format:function(t){return l(t.day()||e.MIN_DAY,2)},parse:function(e){var i=Number(e);return{day:isNaN(i)?t:i}},minLength:2,maxLength:2,type:"number"},"%m":{format:function(t){return l(t.month()||e.MIN_MONTH,2)},parse:function(e){var i=Number(e);return{month:isNaN(i)?t:i}},minLength:2,maxLength:2,type:"number"},"%Y":{format:function(t){return l(t.year()||e.MIN_YEAR,4)},parse:function(e){var i=Number(e);return{year:isNaN(i)?t:i}},minLength:4,maxLength:4,type:"number"},"%w":{format:function(t){return t.dayOfWeek()||e.MIN_DAY_OF_WEEK},parse:function(){return{}},minLength:1,maxLength:1,type:"number"},"%a":{format:function(i){var n=i.dayOfWeek();return o[n!==t?n:e.MIN_DAY_OF_WEEK]},parse:function(){return{}},minLength:1,maxLength:999,type:"word"},"%A":{format:function(i){var n=i.dayOfWeek();return a[n!==t?n:e.MIN_DAY_OF_WEEK]},parse:function(){return{}},minLength:1,maxLength:999,type:"word"},"%b":{format:function(i){var n=e.options("monthFromZero")?i.month():i.month()-1;return r[n!==t?n:e.MIN_MONTH]},parse:function(i){var n=e.monthNames().indexOf(i)+(e.options("monthFromZero")?0:1);return{month:-1!==n?n:t}},minLength:1,maxLength:999,type:"word"},"%B":{format:function(i){var r=e.options("monthFromZero")?i.month():i.month()-1;return n[r!==t?r:e.MIN_MONTH]},parse:function(i){var n=e.monthNames(!0).indexOf(i)+(e.options("monthFromZero")?0:1);return{month:-1!==n?n:t}},minLength:1,maxLength:999,type:"word"},"%H":{format:function(t){return l(t.hours()||e.MIN_HOURS,2)},parse:function(e){var i=Number(e);return{hours:isNaN(i)?t:i}},minLength:2,maxLength:2,type:"number"},"%M":{format:function(t){return l(t.minutes()||e.MIN_MINUTES,2)},parse:function(e){var i=Number(e);return{minutes:isNaN(i)?t:i}},minLength:2,maxLength:2,type:"number"},"%S":{format:function(t){return l(t.seconds()||e.MIN_SECONDS,2)},parse:function(e){var i=Number(e);return{seconds:isNaN(i)?t:i}},minLength:2,maxLength:2,type:"number"},"%s":{format:function(t){return t.timestamp()},parse:function(t){return isNaN(Number(t))?{}:e(Number(t)).get()},minLength:1,maxLength:20,type:"number"},"%F":{format:function(t){return l(t.year()||e.MIN_YEAR,4)+"-"+l(t.month()||e.MIN_MONTH,2)+"-"+l(t.day()||e.MIN_DAY,2)},parse:function(t){var e=Number(t.slice(0,4)),i=Number(t.slice(5,7)),n=Number(t.slice(8,10));return{year:e,month:i,day:n}},minLength:10,maxLength:10,type:"string"},"%D":{format:function(t){return l(t.month()||e.MIN_MONTH,2)+"/"+l(t.day()||e.MIN_DAY,2)+"/"+l(t.year()||e.MIN_YEAR,4)},parse:function(t){var e=Number(t.slice(0,2)),i=Number(t.slice(3,5)),n=Number(t.slice(6,10));return{year:n,month:e,day:i}},minLength:10,maxLength:10,type:"string"}},S={useMilliseconds:!1,monthFromZero:!1};s=function(e,i,n){return this._d=new Date,this._i={year:!1,month:!1,day:!1,hours:!1,minutes:!1,seconds:!1,milliseconds:!1},e!==t&&this.set(e,i,n),this},s.fn=s.prototype,s.fn.dayCount=function(){var t=this.month(),i=e.MAX_DAY_IN_MONTHS[t-(e.options("monthFromZero")?0:1)];return this.leapYear()&&t===(e.options("monthFromZero")?1:2)&&(i+=1),i},s.fn.year=function(t){return 0===arguments.length?this._i.year===!1?this._d.getFullYear():this._i.year:("number"!=typeof t&&"string"!=typeof t||isNaN(Number(t))?(this._d.setFullYear(e.MIN_YEAR),this._i.year=!1):Number(t)>=e.MIN_YEAR&&Number(t)<=e.MAX_YEAR?(this._d.setFullYear(Number(t)),this._i.year=!1):this._i.year=Number(t),this)},s.fn.month=function(t){return 0===arguments.length?this._i.month===!1?e.options("monthFromZero")?this._d.getMonth():this._d.getMonth()+1:this._i.month:("number"!=typeof t&&"string"!=typeof t||isNaN(Number(t))?(this._d.setMonth(e.options("monthFromZero")?e.MIN_MONTH:e.MIN_MONTH-1),this._i.month=!1):Number(t)>=e.MIN_MONTH&&Number(t)<=e.MAX_MONTH?(this._d.setMonth(e.options("monthFromZero")?Number(t):Number(t)-1),this._i.month=!1):this._i.month=Number(t),this)},s.fn.day=function(t){return 0===arguments.length?this._i.day===!1?this._d.getDate():this._i.day:("number"!=typeof t&&"string"!=typeof t||isNaN(Number(t))?(this._d.setDate(e.MIN_DAY),
this._i.day=!1):Number(t)>=e.MIN_DAY&&Number(t)<=this.dayCount()?(this._d.setDate(Number(t)),this._i.day=!1):this._i.day=Number(t),this)},s.fn.hours=function(t){return 0===arguments.length?this._i.hours===!1?this._d.getHours():this._i.hours:("number"!=typeof t&&"string"!=typeof t||isNaN(Number(t))?(this._d.setHours(e.MIN_HOURS),this._i.hours=!1):Number(t)>=e.MIN_HOURS&&Number(t)<=e.MAX_HOURS?(this._d.setHours(Number(t)),this._i.hours=!1):this._i.hours=Number(t),this)},s.fn.minutes=function(t){return 0===arguments.length?this._i.minutes===!1?this._d.getMinutes():this._i.minutes:("number"!=typeof t&&"string"!=typeof t||isNaN(Number(t))?(this._d.setMinutes(e.MIN_MINUTES),this._i.minutes=!1):Number(t)>=e.MIN_MINUTES&&Number(t)<=e.MAX_MINUTES?(this._d.setMinutes(Number(t)),this._i.minutes=!1):this._i.minutes=Number(t),this)},s.fn.seconds=function(t){return 0===arguments.length?this._i.seconds===!1?this._d.getSeconds():this._i.seconds:("number"!=typeof t&&"string"!=typeof t||isNaN(Number(t))?(this._d.setSeconds(e.MIN_SECONDS),this._i.seconds=!1):Number(t)>=e.MIN_SECONDS&&Number(t)<=e.MAX_SECONDS?(this._d.setSeconds(Number(t)),this._i.seconds=!1):this._i.seconds=Number(t),this)},s.fn.milliseconds=function(t){return 0===arguments.length?this._i.milliseconds===!1?this._d.getMilliseconds():this._i.milliseconds:("number"!=typeof t&&"string"!=typeof t||isNaN(Number(t))?(this._d.setMilliseconds(e.MIN_MILLISECONDS),this._i.milliseconds=!1):Number(t)>=e.MIN_MILLISECONDS&&Number(t)<=e.MAX_MILLISECONDS?(this._d.setMilliseconds(Number(t)),this._i.milliseconds=!1):this._i.milliseconds=Number(t),this)},s.fn.week=function(){var t=new Date(this.year(),0,1),i=1e3*e(this.utc()).hours(0).minutes(0).seconds(0).milliseconds(0).utc();return Math.ceil(((i-t.getTime())/864e5+t.getDay()+1)/7)},s.fn.set=function(i,n,r){if(this._i={year:!1,month:!1,day:!1,hours:!1,minutes:!1,seconds:!1,milliseconds:!1},i===t)return this._d=new Date,this;if(i instanceof Date)return this._d=i,this;if("number"==typeof i)return this._d=new Date(i*(e.options("useMilliseconds")?1:1e3)),this;if("object"==typeof i&&(i instanceof Array?(this.day(e.MIN_DAY),this.year(i[0]),this.month(i[1]),this.day(i[2]),this.hours(i[3]),this.minutes(i[4]),this.seconds(i[5]),this.milliseconds(i[6])):(this.day(e.MIN_DAY),this.year(i.year),this.month(i.month),this.day(i.day),this.hours(i.hours),this.minutes(i.minutes),this.seconds(i.seconds),this.milliseconds(i.milliseconds))),"string"==typeof i){var a,o,s,c,l,d,h=[],f=[],p=0,_=0,m={};if(i===t)return o=u(this,r),o===t&&(this._i={year:-1,month:-1,day:-1,hours:-1,minutes:-1,seconds:-1,milliseconds:-1}),o;for(n===t&&(n=e.detectFormat(i));p<n.length;){if("%"===n.charAt(p)){if(s=n.charAt(p)+n.charAt(p+1),x[s]!==t){switch(c=0,l="",x[s].type){case"number":for(;c<x[s].maxLength&&_+c<i.length&&!isNaN(Number(i.charAt(_+c)));)l+=i.charAt(_+c),c+=1;break;case"word":for(;c<x[s].maxLength&&_+c<i.length&&/^[\u00BF-\u1FFF\u2C00-\uD7FF\w]+$/.test(i.charAt(_+c));)l+=i.charAt(_+c),c+=1;break;case"string":for(;c<x[s].maxLength&&_+c<i.length;)l+=i.charAt(_+c),c+=1}if(c<x[s].minLength)return o=u(this,r),o===t&&(this._i={year:-1,month:-1,day:-1,hours:-1,minutes:-1,seconds:-1,milliseconds:-1}),o;h.push(s),f.push(l),c-=1,_+=c,p+=1}}else if(i.charAt(_)!==n.charAt(p))return o=u(this,r),o===t&&(this._i={year:-1,month:-1,day:-1,hours:-1,minutes:-1,seconds:-1,milliseconds:-1}),o;p+=1,_+=1}for(a in h)h.hasOwnProperty(a)&&x.hasOwnProperty(h[a])&&(d=x[h[a]].parse(f[a]),m={year:d.year!==t?d.year:m.year,month:d.month!==t?d.month:m.month,day:d.day!==t?d.day:m.day,hours:d.hours!==t?d.hours:m.hours,minutes:d.minutes!==t?d.minutes:m.minutes,seconds:d.seconds!==t?d.seconds:m.seconds});this.day(e.MIN_DAY),this.year(m.year),this.month(m.month),this.day(m.day),this.hours(m.hours),this.minutes(m.minutes),this.seconds(m.seconds),this.milliseconds(m.milliseconds)}return this},s.fn.leapYear=function(){var t=this.year();return t%4===0?t%100===0?t%400===0:!0:!1},s.fn.timestamp=function(t){return 0!==arguments.length?(this._d=new Date(Number(t)*(e.options("useMilliseconds")?1:1e3)+6e4*this._d.getTimezoneOffset()),this):e.options("useMilliseconds")?this._d.getTime()-6e4*this._d.getTimezoneOffset():Math.floor(this._d.getTime()/1e3)-60*this._d.getTimezoneOffset()},s.fn.utc=function(t){return 0!==arguments.length?(this._d=new Date(Number(t)*(e.options("useMilliseconds")?1:1e3)),this):e.options("useMilliseconds")?this._d.getTime():Math.floor(this._d.getTime()/1e3)},s.fn.dayOfWeek=function(e){return"long"===e?a[this._d.getDay()]:"short"===e?o[this._d.getDay()]:e===t?this._d.getDay():0===e||"Sunday"===e?this.calc({day:-this.dayOfWeek()}):1===e||"Monday"===e?this.calc({day:(0===this.dayOfWeek()?-6:1)-this.dayOfWeek()}):2===e||"Tuesday"===e?this.calc({day:(0===this.dayOfWeek()?-5:2)-this.dayOfWeek()}):3===e||"Wednesday"===e?this.calc({day:(0===this.dayOfWeek()?-4:3)-this.dayOfWeek()}):4===e||"Thursday"===e?this.calc({day:(0===this.dayOfWeek()?-3:4)-this.dayOfWeek()}):5===e||"Friday"===e?this.calc({day:(0===this.dayOfWeek()?-2:5)-this.dayOfWeek()}):6===e||"Saturday"===e?this.calc({day:(0===this.dayOfWeek()?-1:6)-this.dayOfWeek()}):void 0},s.fn.timezone=function(t){switch(t){case"hours":return Math.floor(this._d.getTimezoneOffset()/60);case"minutes":return this._d.getTimezoneOffset();default:return 60*this._d.getTimezoneOffset()}},s.fn.get=function(t){switch(t){case"Date":return new Date(this.year(),this.month()-(e.options("monthFromZero")?0:1),this.day(),this.hours(),this.minutes(),this.seconds(),this.milliseconds());case"DateUTC":return new Date(Date.UTC(this.year(),this.month()-(e.options("monthFromZero")?0:1),this.day(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()));case"Array":return[this.year(),this.month(),this.day(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()];default:return{year:this.year(),month:this.month(),week:this.week(),day:this.day(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds(),utc:this.utc(),dayOfWeek:this.dayOfWeek(),dayOfWeekShort:this.dayOfWeek("short"),dayOfWeekLong:this.dayOfWeek("long"),timestamp:this.timestamp()}}},s.fn.format=function(e){for(var i,n=0,r="";n<e.length;)"%"===e.charAt(n)?(i=e.charAt(n)+e.charAt(n+1),x[i]!==t?(r+=x[i].format(this),n+=1):r+="%"):r+=e.charAt(n),n+=1;return r},s.fn.valid=function(){return this._i.year===!1&&this._i.month===!1&&this._i.day===!1&&this._i.hours===!1&&this._i.minutes===!1&&this._i.seconds===!1&&this._i.milliseconds===!1},s.fn.errors=function(){return this._i},s.fn.between=function(e,i){var n=this.timestamp(),r=e.timestamp();switch(i){case"year":return Math.floor((r-n)/31556952);case"month":return Math.floor((r-n)/2629746);case"day":return Math.floor((r-n)/86400);case"hours":return Math.floor((r-n)/3600);case"minutes":return Math.floor((r-n)/60);case"seconds":return r-n;default:return t}},s.fn.calc=function(e){return e.year!==t&&this._d.setFullYear(this._d.getFullYear()+e.year),e.month!==t&&this._d.setMonth(this._d.getMonth()+e.month),e.day!==t&&this._d.setDate(this._d.getDate()+e.day),e.hours!==t&&this._d.setHours(this._d.getHours()+e.hours),e.minutes!==t&&this._d.setMinutes(this._d.getMinutes()+e.minutes),e.seconds!==t&&this._d.setSeconds(this._d.getSeconds()+e.seconds),e.milliseconds!==t&&this._d.setMilliseconds(this._d.getMilliseconds()+e.milliseconds),this},e=function(t,e,i){return new s(t,e,i)},e.MIN_YEAR=1e3,e.MAX_YEAR=3e3,e.MIN_MONTH=1,e.MAX_MONTH=12,e.MIN_DAY=1,e.MAX_DAY_IN_MONTHS=[31,28,31,30,31,30,31,31,30,31,30,31],e.MIN_DAY_OF_WEEK=0,e.MAX_DAY_OF_WEEK=6,e.MIN_HOURS=0,e.MAX_HOURS=23,e.MIN_MINUTES=0,e.MAX_MINUTES=59,e.MIN_SECONDS=0,e.MAX_SECONDS=59,e.MIN_MILLISECONDS=0,e.MAX_MILLISECONDS=999,e.VERSION="0.2.18",e.options=function(i,n){if(i===t)return S;if(S.hasOwnProperty(i)){if(n===t)return S[i];S[i]=n,"monthFromZero"===i&&(e.MIN_MONTH=n?0:1,e.MAX_MONTH=n?11:12)}return t},e.noConflict=function(){return c.tempus=f,e},e.generate=function(i){var n,r,a,o,c,l,u,d;if("number"!=typeof i.dateFrom&&(n=i.dateFrom instanceof s?i.dateFrom.utc():e(i.dateFrom,i.formatFrom).utc()),"number"!=typeof i.dateTo&&(r=i.dateTo instanceof s?i.dateTo.utc():e(i.dateTo,i.formatTo!==t?i.formatTo:i.formatFrom).utc()),"number"==typeof i.period?c={year:0,month:0,day:0,hours:0,minutes:0,seconds:i.period}:"string"==typeof i.period?c={year:"year"===i.period?1:0,month:"month"===i.period?1:0,day:"day"===i.period?1:0,hours:"hours"===i.period?1:0,minutes:"minutes"===i.period?1:0,seconds:"seconds"===i.period?1:0}:"object"==typeof i.period&&(c={year:i.period.year!==t?i.period.year:0,month:i.period.month!==t?i.period.month:0,day:i.period.day!==t?i.period.day:0,hours:i.period.hours!==t?i.period.hours:0,minutes:i.period.minutes!==t?i.period.minutes:0,seconds:i.period.seconds!==t?i.period.seconds:0}),i.groupBy===t?l=i.asObject===!0?{}:[]:(l=[],l.push([]),u=e(n).get()[i.groupBy]),d=function(n,r,a){return i.asObject===!0?i.format!==t?n[e(r).format(i.format)]={}:n[e(r).format("%F %H:%M:%S")]={}:i.format!==t?n.push(a?null:e(r).format(i.format)):n.push(a?null:e(r)),n},i.groupBy!==t&&i.fillNulls){var h={year:c.year?-c.year:t,month:c.month?-c.month:t,day:c.day?-c.day:t,hours:c.hours?-c.hours:t,minutes:c.minutes?-c.minutes:t,seconds:c.seconds?-c.seconds:t,milliseconds:c.milliseconds?-c.milliseconds:t};for(a=e(n).calc(h).utc();e(a).get()[i.groupBy]===u;)d(l[l.length-1],a,!0),a=e(a).calc(h).utc();if("week"===i.groupBy){var f=e(n).dayOfWeek();for(a=e(n).dayOfWeek(0).utc();l[0].length<f&&n>a;)d(l[l.length-1],a,!0),a=e(a).calc(c).utc()}}for(;r>=n;)i.groupBy===t?d(l,n):e(n).get()[i.groupBy]===u?d(l[l.length-1],n):(l.push([]),d(l[l.length-1],n),u=e(n).get()[i.groupBy]),n=e(n).calc(c).utc();if(i.groupBy!==t&&i.fillNulls)for(o=e(r).calc(c).utc();e(o).get()[i.groupBy]===u;)d(l[l.length-1],o,!0),o=e(o).calc(c).utc();return l},e.monthNames=function(t){switch(t){case"long":return n;default:return r}},e.dayNames=function(t){switch(t){case"long":return a;default:return o}},e.lang=function(e){return e===t?_:(_=e,m[_]===t&&(_="en"),n=v(),r=g(),a=y(),o=b(),t)},e.availableLangs=function(){return Object.keys(m)},e.registerFormat=function(t,e,i,n,r,a){x[t]={format:e,parse:i,minLength:n,maxLength:r,type:a}},e.unregisterFormat=function(t){delete x[t]},e.detectFormat=function(t){var e,i,n;return e=h(t,0),""!==e&&(n=10),i=t.charAt(n),("T"===i||" "===i)&&(e+=i,n+=1),e+=d(t,n)},i={TempusDate:s},e.classes=function(e,n){return n===t?i[e]:void(i[e]=n)},e.loadTranslations=function(t){"object"==typeof t?m=t:"string"==typeof t&&w(t,function(t){m=t},function(){})},_=(p.language||p.systemLanguage||p.userLanguage||"en").substr(0,2).toLowerCase(),m[_]===t&&(_="en"),n=v(),r=g(),a=y(),o=b(),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports.tempus=e):c.tempus=e}.call(this),function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)};t.fn.circliful=function(i,n){var r=t.extend({foregroundColor:"#62e1d8",backgroundColor:"rgba(255, 255, 255, 0.9)",fillColor:"none",foregroundBorderWidth:6,backgroundBorderWidth:6,percent:75,animation:0,animationStep:1,textFamily:"pragmatica, sans serif",textSize:"32px",textColor:"#fff",target:0,start:0,showPercent:1},i);return this.each(function(){var i=t(this),n=r.percent;i.html(t('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 194 186" class="circliful"><circle cx="100" cy="100" r="57" class="border" fill="'+r.fillColor+'" stroke="'+r.backgroundColor+'" stroke-width="'+r.backgroundBorderWidth+'" stroke-dasharray="360" transform="rotate(-90,100,100)" /><circle class="circle" cx="100" cy="100" r="57" class="border" fill="none" stroke="'+r.foregroundColor+'" stroke-width="'+r.foregroundBorderWidth+'" stroke-dasharray="0,20000" transform="rotate(-90,100,100)" /><text class="timer" text-anchor="middle" x="100" y="110" style="fill: '+r.textColor+"; font-family: "+r.textFamily+"; font-size: "+r.textSize+';">0%</text>'));var a=i.find(".circle"),o=i.find(".timer"),s=45,c=0,l=r.animationStep,u=0,d=0,h=0;if(r.start>0&&r.target>0&&(n=r.start/(r.target/100),h=r.target/100),1==r.animation){var f=function(){e(f);var t=window.setInterval(function(){c>=3.6*n?(window.clearInterval(t),u=1):(c+=l,d+=h),c/3.6>=n&&1==u&&(c=3.6*n),d>r.target&&1==u&&(d=r.target),a.attr("stroke-dasharray",c+", 20000"),1==r.showPercent?o.text(parseInt(c/360*100)+"%"):o.text(d)}.bind(a),s)};f()}else a.attr("stroke-dasharray",3.6*n+", 20000"),1==r.showPercent?o.text(n+"%"):o.text(r.target)})}}($),function(t,e,i,n){var r=t.fn.peity=function(e,i){return c&&this.each(function(){var n=t(this),o=n.data("_peity");o?(e&&(o.type=e),t.extend(o.opts,i)):(o=new a(n,e,t.extend({},r.defaults[e],n.data("peity"),i)),n.change(function(){o.draw()}).data("_peity",o)),o.draw()}),this},a=function(t,e,i){this.$el=t,this.type=e,this.opts=i},o=a.prototype,s=o.svgElement=function(i,n){return t(e.createElementNS("http://www.w3.org/2000/svg",i)).attr(n)},c="createElementNS"in e&&s("svg",{})[0].createSVGRect;o.draw=function(){var t=this.opts;r.graphers[this.type].call(this,t),t.after&&t.after.call(this,t)},o.fill=function(){var e=this.opts.fill;return t.isFunction(e)?e:function(t,i){return e[i%e.length]}},o.prepare=function(t,e){return this.$svg||this.$el.hide().after(this.$svg=s("svg",{"class":"peity"})),this.$svg.empty().data("peity",this).attr({height:e,width:t})},o.values=function(){return t.map(this.$el.text().split(this.opts.delimiter),function(t){return parseFloat(t)})},r.defaults={},r.graphers={},r.register=function(t,e,i){this.defaults[t]=e,this.graphers[t]=i},r.register("pie",{fill:["#ff9900","#fff4dd","#ffc66e"],radius:8},function(e){if(!e.delimiter){var n=this.$el.text().match(/[^0-9\.]/);e.delimiter=n?n[0]:","}var r=t.map(this.values(),function(t){return t>0?t:0});if("/"==e.delimiter){var a=r[0],o=r[1];r=[a,i.max(0,o-a)]}for(var c=0,l=r.length,u=0;l>c;c++)u+=r[c];u||(l=2,u=1,r=[0,1]);var d=2*e.radius,h=this.prepare(e.width||d,e.height||d),f=e.width,p=e.height,_=f/2,m=p/2,v=i.min(_,m),g=e.innerRadius;"donut"!=this.type||g||(g=.5*v);var y=i.PI,b=this.fill(),w=this.scale=function(t,e){var n=t/u*y*2-y/2;return[e*i.cos(n)+_,e*i.sin(n)+m]},x=0;for(c=0;l>c;c++){var S,k=r[c],T=k/u;if(0!=T){if(1==T)if(g){var E=_-.01,O=m-v,N=m-g;S=s("path",{d:["M",_,O,"A",v,v,0,1,1,E,O,"L",E,N,"A",g,g,0,1,0,_,N].join(" ")})}else S=s("circle",{cx:_,cy:m,r:v});else{var M=x+k,A=["M"].concat(w(x,v),"A",v,v,0,T>.5?1:0,1,w(M,v),"L");g?A=A.concat(w(M,g),"A",g,g,0,T>.5?1:0,0,w(x,g)):A.push(_,m),x+=k,S=s("path",{d:A.join(" ")})}S.attr("fill",b.call(this,k,c,r)),h.append(S)}}}),r.register("donut",t.extend(!0,{},r.defaults.pie),function(t){r.graphers.pie.call(this,t)}),r.register("line",{delimiter:",",fill:"#c6d9fd",height:16,min:0,stroke:"#4d89f9",strokeWidth:1,width:32},function(t){var e=this.values();1==e.length&&e.push(e[0]);for(var r=i.max.apply(i,t.max==n?e:e.concat(t.max)),a=i.min.apply(i,t.min==n?e:e.concat(t.min)),o=this.prepare(t.width,t.height),c=t.strokeWidth,l=o.width(),u=o.height()-c,d=r-a,h=this.x=function(t){return t*(l/(e.length-1))},f=this.y=function(t){var e=u;return d&&(e-=(t-a)/d*u),e+c/2},p=f(i.max(a,0)),_=[0,p],m=0;m<e.length;m++)_.push(h(m),f(e[m]));_.push(l,p),t.fill&&o.append(s("polygon",{fill:t.fill,points:_.join(" ")})),c&&o.append(s("polyline",{fill:"none",points:_.slice(2,_.length-2).join(" "),stroke:t.stroke,"stroke-width":c,"stroke-linecap":"square"}))}),r.register("bar",{delimiter:",",fill:["#4D89F9"],height:16,min:0,padding:.1,width:32},function(t){for(var e=this.values(),r=i.max.apply(i,t.max==n?e:e.concat(t.max)),a=i.min.apply(i,t.min==n?e:e.concat(t.min)),o=this.prepare(t.width,t.height),c=o.width(),l=o.height(),u=r-a,d=t.padding,h=this.fill(),f=this.x=function(t){return t*c/e.length},p=this.y=function(t){return l-(u?(t-a)/u*l:1)},_=0;_<e.length;_++){var m,v=f(_+d),g=f(_+1-d)-v,y=e[_],b=p(y),w=b,x=b;u?0>y?w=p(i.min(r,0)):x=p(i.max(a,0)):m=1,m=x-w,0==m&&(m=1,r>0&&u&&w--),o.append(s("rect",{fill:h.call(this,y,_,e),x:v,y:w,width:g,height:m}))}})}(window.Zepto||window.jQuery,document,Math),function(t){"use strict";function e(t,e,i,n){t.beginPath(),t.arc(e,i,n,0,g,!1),t.fill()}function i(t,e,i,n,r){t.beginPath(),t.moveTo(e,i),t.lineTo(n,r),t.stroke()}function n(t,i,n,r,a,o,s,c){var l=Math.cos(i*g),u=Math.sin(i*g);c-=s,e(t,n-u*a,r+l*o+.5*c,s+(1-.5*l)*c)}function r(t,e,i,r,a,o,s,c){var l;for(l=5;l--;)n(t,e+l/5,i,r,a,o,s,c)}function a(t,e,i,n,a,o,s){e/=3e4;var c=.21*a,l=.12*a,u=.24*a,d=.28*a;t.fillStyle=s,r(t,e,i,n,c,l,u,d),t.globalCompositeOperation="destination-out",r(t,e,i,n,c,l,u-o,d-o),t.globalCompositeOperation="source-over"}function o(t,e,n,r,a,o,s){e/=12e4;var c,l,u,d,h=.25*a-.5*o,f=.32*a+.5*o,p=.5*a-.5*o;for(t.strokeStyle=s,t.lineWidth=o,t.lineCap="round",t.lineJoin="round",t.beginPath(),t.arc(n,r,h,0,g,!1),t.stroke(),c=8;c--;)l=(e+c/8)*g,u=Math.cos(l),d=Math.sin(l),i(t,n+u*f,r+d*f,n+u*p,r+d*p)}function s(t,e,i,n,r,a,o){e/=15e3;var s=.29*r-.5*a,c=.05*r,l=Math.cos(e*g),u=l*g/-16;t.strokeStyle=o,t.lineWidth=a,t.lineCap="round",t.lineJoin="round",i+=l*c,t.beginPath(),t.arc(i,n,s,u+g/8,u+7*g/8,!1),t.arc(i+Math.cos(u)*s*y,n+Math.sin(u)*s*y,s,u+5*g/8,u+3*g/8,!0),t.closePath(),t.stroke()}function c(t,e,i,n,r,a,o){e/=1350;var s,c,l,u,d=.16*r,h=11*g/12,f=7*g/12;for(t.fillStyle=o,s=4;s--;)c=(e+s/4)%1,l=i+(s-1.5)/1.5*(1===s||2===s?-1:1)*d,u=n+c*c*r,t.beginPath(),t.moveTo(l,u-1.5*a),t.arc(l,u,.75*a,h,f,!1),t.fill()}function l(t,e,n,r,a,o,s){e/=750;var c,l,u,d,h=.1875*a;for(t.strokeStyle=s,t.lineWidth=.5*o,t.lineCap="round",t.lineJoin="round",c=4;c--;)l=(e+c/4)%1,u=Math.floor(n+(c-1.5)/1.5*(1===c||2===c?-1:1)*h)+.5,d=r+l*a,i(t,u,d-1.5*o,u,d+1.5*o)}function u(t,e,n,r,a,o,s){e/=3e3;var c,l,u,d,h=.16*a,f=.75*o,p=e*g*.7,_=Math.cos(p)*f,m=Math.sin(p)*f,v=p+g/3,y=Math.cos(v)*f,b=Math.sin(v)*f,w=p+2*g/3,x=Math.cos(w)*f,S=Math.sin(w)*f;for(t.strokeStyle=s,t.lineWidth=.5*o,t.lineCap="round",t.lineJoin="round",c=4;c--;)l=(e+c/4)%1,u=n+Math.sin((l+c/4)*g)*h,d=r+l*a,i(t,u-_,d-m,u+_,d+m),i(t,u-y,d-b,u+y,d+b),i(t,u-x,d-S,u+x,d+S)}function d(t,e,i,n,a,o,s){e/=3e4;var c=.21*a,l=.06*a,u=.21*a,d=.28*a;t.fillStyle=s,r(t,e,i,n,c,l,u,d),t.globalCompositeOperation="destination-out",r(t,e,i,n,c,l,u-o,d-o),t.globalCompositeOperation="source-over"}function h(t,e,i,n,r,a,o){var s=r/8,c=s/3,l=2*c,u=e%1*g,d=Math.cos(u),h=Math.sin(u);t.fillStyle=o,t.strokeStyle=o,t.lineWidth=a,t.lineCap="round",t.lineJoin="round",t.beginPath(),t.arc(i,n,s,u,u+Math.PI,!1),t.arc(i-c*d,n-c*h,l,u+Math.PI,u,!1),t.arc(i+l*d,n+l*h,c,u+Math.PI,u,!0),t.globalCompositeOperation="destination-out",t.fill(),t.globalCompositeOperation="source-over",t.stroke()}function f(t,e,i,n,r,a,o,s,c){e/=2500;var l,u,d,f,p=b[o],_=(e+o-w[o].start)%s,m=(e+o-w[o].end)%s,v=(e+o)%s;if(t.strokeStyle=c,t.lineWidth=a,t.lineCap="round",t.lineJoin="round",1>_){if(t.beginPath(),_*=p.length/2-1,l=Math.floor(_),_-=l,l*=2,l+=2,t.moveTo(i+(p[l-2]*(1-_)+p[l]*_)*r,n+(p[l-1]*(1-_)+p[l+1]*_)*r),1>m){for(m*=p.length/2-1,u=Math.floor(m),m-=u,u*=2,u+=2,f=l;f!==u;f+=2)t.lineTo(i+p[f]*r,n+p[f+1]*r);t.lineTo(i+(p[u-2]*(1-m)+p[u]*m)*r,n+(p[u-1]*(1-m)+p[u+1]*m)*r)}else for(f=l;f!==p.length;f+=2)t.lineTo(i+p[f]*r,n+p[f+1]*r);t.stroke()}else if(1>m){for(t.beginPath(),m*=p.length/2-1,u=Math.floor(m),m-=u,u*=2,u+=2,t.moveTo(i+p[0]*r,n+p[1]*r),f=2;f!==u;f+=2)t.lineTo(i+p[f]*r,n+p[f+1]*r);t.lineTo(i+(p[u-2]*(1-m)+p[u]*m)*r,n+(p[u-1]*(1-m)+p[u+1]*m)*r),t.stroke()}1>v&&(v*=p.length/2-1,d=Math.floor(v),v-=d,d*=2,d+=2,h(t,e,i+(p[d-2]*(1-v)+p[d]*v)*r,n+(p[d-1]*(1-v)+p[d+1]*v)*r,r,a,c))}var p,_;!function(){var e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame;e&&i?(p=function(t,i){function n(){r.value=e(n),t()}var r={value:null};return n(),r},_=function(t){i(t.value)}):(p=setInterval,_=clearInterval)}();var m=500,v=.08,g=2*Math.PI,y=2/Math.sqrt(2),b=[[-.75,-.18,-.7219,-.1527,-.6971,-.1225,-.6739,-.091,-.6516,-.0588,-.6298,-.0262,-.6083,.0065,-.5868,.0396,-.5643,.0731,-.5372,.1041,-.5033,.1259,-.4662,.1406,-.4275,.1493,-.3881,.153,-.3487,.1526,-.3095,.1488,-.2708,.1421,-.2319,.1342,-.1943,.1217,-.16,.1025,-.129,.0785,-.1012,.0509,-.0764,.0206,-.0547,-.012,-.0378,-.0472,-.0324,-.0857,-.0389,-.1241,-.0546,-.1599,-.0814,-.1876,-.1193,-.1964,-.1582,-.1935,-.1931,-.1769,-.2157,-.1453,-.229,-.1085,-.2327,-.0697,-.224,-.0317,-.2064,.0033,-.1853,.0362,-.1613,.0672,-.135,.0961,-.1051,.1213,-.0706,.1397,-.0332,.1512,.0053,.158,.0442,.1624,.0833,.1636,.1224,.1615,.1613,.1565,.1999,.15,.2378,.1402,.2749,.1279,.3118,.1147,.3487,.1015,.3858,.0892,.4236,.0787,.4621,.0715,.5012,.0702,.5398,.0766,.5768,.089,.6123,.1055,.6466,.1244,.6805,.144,.7147,.163,.75,.18],[-.75,0,-.7033,.0195,-.6569,.0399,-.6104,.06,-.5634,.0789,-.5155,.0954,-.4667,.1089,-.4174,.1206,-.3676,.1299,-.3174,.1365,-.2669,.1398,-.2162,.1391,-.1658,.1347,-.1157,.1271,-.0661,.1169,-.017,.1046,.0316,.0903,.0791,.0728,.1259,.0534,.1723,.0331,.2188,.0129,.2656,-.0064,.3122,-.0263,.3586,-.0466,.4052,-.0665,.4525,-.0847,.5007,-.1002,.5497,-.113,.5991,-.124,.6491,-.1325,.6994,-.138,.75,-.14]],w=[{start:.36,end:.11},{start:.56,end:.16}],x=function(t){this.list=[],this.interval=null,this.color=t&&t.color?t.color:"black",this.resizeClear=!(!t||!t.resizeClear)};x.CLEAR_DAY=function(t,e,i){var n=t.canvas.width,r=t.canvas.height,a=Math.min(n,r);o(t,e,.5*n,.5*r,a,a*v,i)},x.CLEAR_NIGHT=function(t,e,i){var n=t.canvas.width,r=t.canvas.height,a=Math.min(n,r);s(t,e,.5*n,.5*r,a,a*v,i)},x.PARTLY_CLOUDY_DAY=function(t,e,i){var n=t.canvas.width,r=t.canvas.height,s=Math.min(n,r);o(t,e,.625*n,.375*r,.75*s,s*v,i),a(t,e,.375*n,.625*r,.75*s,s*v,i)},x.PARTLY_CLOUDY_NIGHT=function(t,e,i){var n=t.canvas.width,r=t.canvas.height,o=Math.min(n,r);s(t,e,.667*n,.375*r,.75*o,o*v,i),a(t,e,.375*n,.625*r,.75*o,o*v,i)},x.CLOUDY=function(t,e,i){var n=t.canvas.width,r=t.canvas.height,o=Math.min(n,r);a(t,e,.5*n,.5*r,o,o*v,i)},x.RAIN=function(t,e,i){var n=t.canvas.width,r=t.canvas.height,o=Math.min(n,r);c(t,e,.5*n,.37*r,.9*o,o*v,i),a(t,e,.5*n,.37*r,.9*o,o*v,i)},x.SLEET=function(t,e,i){var n=t.canvas.width,r=t.canvas.height,o=Math.min(n,r);l(t,e,.5*n,.37*r,.9*o,o*v,i),a(t,e,.5*n,.37*r,.9*o,o*v,i)},x.SNOW=function(t,e,i){var n=t.canvas.width,r=t.canvas.height,o=Math.min(n,r);u(t,e,.5*n,.37*r,.9*o,o*v,i),a(t,e,.5*n,.37*r,.9*o,o*v,i)},x.WIND=function(t,e,i){var n=t.canvas.width,r=t.canvas.height,a=Math.min(n,r);f(t,e,.5*n,.5*r,a,a*v,0,2,i),f(t,e,.5*n,.5*r,a,a*v,1,2,i)},x.FOG=function(t,e,n){var r=t.canvas.width,a=t.canvas.height,o=Math.min(r,a),s=o*v;d(t,e,.5*r,.32*a,.75*o,s,n),e/=5e3;var c=Math.cos(e*g)*o*.02,l=Math.cos((e+.25)*g)*o*.02,u=Math.cos((e+.5)*g)*o*.02,h=Math.cos((e+.75)*g)*o*.02,f=.936*a,p=Math.floor(f-.5*s)+.5,_=Math.floor(f-2.5*s)+.5;t.strokeStyle=n,t.lineWidth=s,t.lineCap="round",t.lineJoin="round",i(t,c+.2*r+.5*s,p,l+.8*r-.5*s,p),i(t,u+.2*r+.5*s,_,h+.8*r-.5*s,_)},x.prototype={_determineDrawingFunction:function(t){return"string"==typeof t&&(t=x[t.toUpperCase().replace(/-/g,"_")]||null),t},add:function(t,e){var i;"string"==typeof t&&(t=document.getElementById(t)),null!==t&&(e=this._determineDrawingFunction(e),"function"==typeof e&&(i={element:t,context:t.getContext("2d"),drawing:e},this.list.push(i),this.draw(i,m)))},set:function(t,e){var i;for("string"==typeof t&&(t=document.getElementById(t)),i=this.list.length;i--;)if(this.list[i].element===t)return this.list[i].drawing=this._determineDrawingFunction(e),void this.draw(this.list[i],m);this.add(t,e)},remove:function(t){var e;for("string"==typeof t&&(t=document.getElementById(t)),e=this.list.length;e--;)if(this.list[e].element===t)return void this.list.splice(e,1)},draw:function(t,e){var i=t.context.canvas;this.resizeClear?i.width=i.width:t.context.clearRect(0,0,i.width,i.height),t.drawing(t.context,e,this.color)},play:function(){var t=this;this.pause(),this.interval=p(function(){var e,i=Date.now();for(e=t.list.length;e--;)t.draw(t.list[e],i)},1e3/60)},pause:function(){this.interval&&(_(this.interval),this.interval=null)}},t.Skycons=x}(this),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Baobab=t()}}(function(){var t;return function e(t,i,n){function r(o,s){if(!i[o]){if(!t[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return r(i?i:e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,i,n){(function(){"use strict";function e(t,e){var i,n={};for(i in t)n[i]=t[i];for(i in e)n[i]=e[i];return n}function r(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!(t instanceof Function)&&!(t instanceof RegExp)}function a(t,e,i){var n,r,a,o;for(r in t)e.call(i||null,r,t[r]);if(Object.getOwnPropertySymbols)for(n=Object.getOwnPropertySymbols(t),a=0,o=n.length;o>a;a++)e.call(i||null,n[a],t[n[a]])}function o(t,e){t=t||[];var i,n,r=[];for(n=0,i=t.length;i>n;n++)t[n].fn!==e&&r.push(t[n]);return r}var s={once:"boolean",scope:"object"},c=0,l=function(){this._enabled=!0,this.unbindAll()};l.prototype.unbindAll=function(){return this._handlers={},this._handlersAll=[],this._handlersComplex=[],this},l.prototype.on=function(t,e,i){var n,o,l,u,d,h,f;if(r(t))return a(t,function(t,i){this.on(t,i,e)},this),this;for("function"==typeof t&&(i=e,e=t,t=null),d=[].concat(t),n=0,o=d.length;o>n;n++){if(u=d[n],f={order:c++,fn:e},"string"==typeof u||"symbol"==typeof u)this._handlers[u]||(this._handlers[u]=[]),h=this._handlers[u],f.type=u;else if(u instanceof RegExp)h=this._handlersComplex,f.pattern=u;else{if(null!==u)throw Error("Emitter.on: invalid event.");h=this._handlersAll}for(l in i||{})s[l]&&(f[l]=i[l]);h.push(f)}return this},l.prototype.once=function(){var t=Array.prototype.slice.call(arguments),i=t.length-1;return r(t[i])&&t.length>1?t[i]=e(t[i],{once:!0}):t.push({once:!0}),this.on.apply(this,t)},l.prototype.off=function(t,e){var i,n,s,c;if(1===arguments.length&&"function"==typeof t){e=arguments[0];for(s in this._handlers)this._handlers[s]=o(this._handlers[s],e),0===this._handlers[s].length&&delete this._handlers[s];this._handlersAll=o(this._handlersAll,e),this._handlersComplex=o(this._handlersComplex,e)}else if(1!==arguments.length||"string"!=typeof t&&"symbol"!=typeof t)if(2===arguments.length){var l=[].concat(t);for(i=0,n=l.length;n>i;i++)c=l[i],this._handlers[c]=o(this._handlers[c],e),0===(this._handlers[c]||[]).length&&delete this._handlers[c]}else r(t)&&a(t,this.off,this);else delete this._handlers[t];return this},l.prototype.listeners=function(t){var e,i,n,r=this._handlersAll||[],a=!1;if(!t)throw Error("Emitter.listeners: no event provided.");for(r=r.concat(this._handlers[t]||[]),i=0,n=this._handlersComplex.length;n>i;i++)e=this._handlersComplex[i],~t.search(e.pattern)&&(a=!0,r.push(e));return this._handlersAll.length||a?r.sort(function(t,e){return t.order-e.order}):r.slice(0)},l.prototype.emit=function(t,e){if(!this._enabled)return this;if(r(t))return a(t,this.emit,this),this;var i,n,o,s,c,l,u,d,h=[].concat(t),f=[];for(c=0,u=h.length;u>c;c++){for(o=this.listeners(h[c]),l=0,d=o.length;d>l;l++)s=o[l],i={type:h[c],target:this},arguments.length>1&&(i.data=e),s.fn.call("scope"in s?s.scope:this,i),s.once&&f.push(s);for(l=f.length-1;l>=0;l--)n=f[l].type?this._handlers[f[l].type]:f[l].pattern?this._handlersComplex:this._handlersAll,n.splice(n.indexOf(f[l]),1)}return this},l.prototype.kill=function(){this.unbindAll(),this._handlers=null,this._handlersAll=null,this._handlersComplex=null,this._enabled=!1,this.unbindAll=this.on=this.once=this.off=this.emit=this.listeners=Function.prototype},l.prototype.disable=function(){return this._enabled=!1,this},l.prototype.enable=function(){return this._enabled=!0,this},l.version="3.1.1","undefined"!=typeof n?("undefined"!=typeof i&&i.exports&&(n=i.exports=l),n.Emitter=l):"function"==typeof t&&t.amd?t("emmett",[],function(){return l}):this.Emitter=l}).call(this)},{}],2:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){return"λ"+t.map(function(t){return m["default"]["function"](t)||m["default"].object(t)?"#"+A()+"#":t}).join("λ")}i.__esModule=!0;var c=t("emmett"),l=r(c),u=t("./cursor"),d=r(u),h=t("./monkey"),f=t("./watcher"),p=r(f),_=t("./type"),m=r(_),v=t("./update"),g=r(v),y=t("./helpers"),b=n(y),w=b.arrayFrom,x=b.coercePath,S=b.deepFreeze,k=b.getIn,T=b.makeError,E=b.deepClone,O=b.deepMerge,N=b.shallowClone,M=b.shallowMerge,A=b.uniqid,C={autoCommit:!1,asynchronous:!0,immutable:!1,lazyMonkeys:!1,persistent:!1,pure:!0,validate:null,validationBehavior:"rollback"},R=function(t){function e(i,n){var r=this;if(a(this,e),t.call(this),arguments.length<1&&(i={}),!m["default"].object(i)&&!m["default"].array(i))throw T("Baobab: invalid data.",{data:i});this.options=M({},C,n),this.options.persistent||(this.options.immutable=!1,this.options.pure=!1),this._identity="[object Baobab]",this._cursors={},this._future=null,this._transaction=[],this._affectedPathsIndex={},this._monkeys={},this._previousData=null,this._data=i,this.root=new d["default"](this,[],"λ"),delete this.root.release,this.options.immutable&&S(this._data);var o=function(t){r[t]=function(){var e=this.root[t].apply(this.root,arguments);return e instanceof d["default"]?this:e}};["apply","clone","concat","deepClone","deepMerge","exists","get","push","merge","pop","project","serialize","set","shift","splice","unset","unshift"].forEach(o),this._refreshMonkeys();var s=this.validate();if(s)throw Error("Baobab: invalid data.",{error:s})}return o(e,t),e.prototype._refreshMonkeys=function(t,e,i){var n=this,r=function s(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];if(t instanceof h.Monkey)return t.release(),void g["default"](n._monkeys,e,{type:"unset"},{immutable:!1,persistent:!1,pure:!1});if(m["default"].object(t))for(var i in t)s(t[i],e.concat(i))},a=function c(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];if(t instanceof h.MonkeyDefinition||t instanceof h.Monkey){var i=new h.Monkey(n,e,t instanceof h.Monkey?t.definition:t);return void g["default"](n._monkeys,e,{type:"set",value:i},{immutable:!1,persistent:!1,pure:!1})}if(m["default"].object(t))for(var r in t)c(t[r],e.concat(r))};if(arguments.length){var o=k(this._monkeys,e).data;o&&r(o,e),"unset"!==i&&a(t,e)}else a(this._data);return this},e.prototype.validate=function i(t){var e=this.options,i=e.validate,n=e.validationBehavior;if("function"!=typeof i)return null;var r=i.call(this,this._previousData,this._data,t||[[]]);return r instanceof Error?("rollback"===n&&(this._data=this._previousData,this._affectedPathsIndex={},this._transaction=[],this._previousData=this._data),this.emit("invalid",{error:r}),r):null},e.prototype.select=function(t){if(t=t||[],arguments.length>1&&(t=w(arguments)),!m["default"].path(t))throw T("Baobab.select: invalid path.",{path:t});t=[].concat(t);var e=s(t),i=this._cursors[e];
return i||(i=new d["default"](this,t,e),this._cursors[e]=i),this.emit("select",{path:t,cursor:i}),i},e.prototype.update=function(t,e){var i=this;if(t=x(t),!m["default"].operationType(e.type))throw T('Baobab.update: unknown operation type "'+e.type+'".',{operation:e});var n=k(this._data,t),r=n.solvedPath,a=n.exists;if(!r)throw T("Baobab.update: could not solve the given path.",{path:r});var o=m["default"].monkeyPath(this._monkeys,r);if(o&&r.length>o.length)throw T("Baobab.update: attempting to update a read-only path.",{path:r});if("unset"!==e.type||a){var c=e;if(/merge/i.test(e.type)){var l=k(this._monkeys,r).data;if(m["default"].object(l)){c=N(c);var u=k(this._data,r).data;/deep/i.test(c.type)?c.value=O({},O({},u,E(l)),c.value):c.value=M({},O({},u,E(l)),c.value)}}this._transaction.length||(this._previousData=this._data);var d=g["default"](this._data,r,c,this.options),h=d.data,f=d.node;if(!("data"in d))return f;var p=r.concat("push"===e.type?f.length-1:[]),_=s(p);return this._data=h,this._affectedPathsIndex[_]=!0,this._transaction.push(M({},e,{path:p})),this._refreshMonkeys(f,r,e.type),this.emit("write",{path:p}),this.options.autoCommit?this.options.asynchronous?(this._future||(this._future=setTimeout(function(){return i.commit()},0)),f):(this.commit(),f):f}},e.prototype.commit=function(){if(!this._transaction.length)return this;this._future&&(this._future=clearTimeout(this._future));var t=Object.keys(this._affectedPathsIndex).map(function(t){return"λ"!==t?t.split("λ").slice(1):[]}),e=this.validate(t);if(e)return this;var i=this._transaction,n=this._previousData;return this._affectedPathsIndex={},this._transaction=[],this._previousData=this._data,this.emit("update",{paths:t,currentData:this._data,transaction:i,previousData:n}),this},e.prototype.getMonkey=function(t){t=x(t);var e=k(this._monkeys,[].concat(t)).data;return e instanceof h.Monkey?e:null},e.prototype.watch=function(t){return new p["default"](this,t)},e.prototype.release=function(){var t=void 0;this.emit("release"),delete this.root,delete this._data,delete this._previousData,delete this._transaction,delete this._affectedPathsIndex,delete this._monkeys;for(t in this._cursors)this._cursors[t].release();delete this._cursors,this.kill()},e.prototype.toJSON=function(){return this.serialize()},e.prototype.toString=function(){return this._identity},e}(l["default"]);i["default"]=R,R.monkey=function(){for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i];if(!e.length)throw new Error("Baobab.monkey: missing definition.");return 1===e.length&&"function"!=typeof e[0]?new h.MonkeyDefinition(e[0]):new h.MonkeyDefinition(e)},R.dynamicNode=R.monkey,R.Cursor=d["default"],R.MonkeyDefinition=h.MonkeyDefinition,R.Monkey=h.Monkey,R.type=m["default"],R.helpers=b,R.VERSION="2.3.2",e.exports=i["default"]},{"./cursor":3,"./helpers":4,"./monkey":5,"./type":6,"./update":7,"./watcher":8,emmett:1}],3:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!e)throw f.makeError("Baobab.Cursor."+t+": "+("cannot use "+t+" on an unresolved dynamic path."),{path:e})}function s(t,e){p.prototype[t]=function(i,n){if(arguments.length>2)throw f.makeError("Baobab.Cursor."+t+": too many arguments.");if(1!==arguments.length||_[t]||(n=i,i=[]),i=f.coercePath(i),!h["default"].path(i))throw f.makeError("Baobab.Cursor."+t+": invalid path.",{path:i});if(e&&!e(n))throw f.makeError("Baobab.Cursor."+t+": invalid value.",{path:i,value:n});if(!this.solvedPath)throw f.makeError("Baobab.Cursor."+t+": the dynamic path of the cursor cannot be solved.",{path:this.path});var r=this.solvedPath.concat(i);return this.tree.update(r,{type:t,value:n})}}i.__esModule=!0;var c=t("emmett"),l=n(c),u=t("./monkey"),d=t("./type"),h=n(d),f=t("./helpers"),p=function(t){function e(i,n,a){var o=this;r(this,e),t.call(this),n=n||[],this._identity="[object Cursor]",this._archive=null,this.tree=i,this.path=n,this.hash=a,this.state={killed:!1,recording:!1,undoing:!1},this._dynamicPath=h["default"].dynamicPath(this.path),this._monkeyPath=h["default"].monkeyPath(this.tree._monkeys,this.path),this._dynamicPath?this.solvedPath=f.getIn(this.tree._data,this.path).solvedPath:this.solvedPath=this.path,this._writeHandler=function(t){var e=t.data;!o.state.killed&&f.solveUpdate([e.path],o._getComparedPaths())&&(o.solvedPath=f.getIn(o.tree._data,o.path).solvedPath)};var s=function(t){var e=o,i=Object.defineProperties({},{previousData:{get:function(){return f.getIn(t,e.solvedPath).data},configurable:!0,enumerable:!0},currentData:{get:function(){return e.get()},configurable:!0,enumerable:!0}});return o.state.recording&&!o.state.undoing&&o.archive.add(i.previousData),o.state.undoing=!1,o.emit("update",i)};this._updateHandler=function(t){if(!o.state.killed){var e=t.data,i=e.paths,n=e.previousData,r=s.bind(o,n),a=o._getComparedPaths();return f.solveUpdate(i,a)?r():void 0}};var c=!1;this._lazyBind=function(){return c?void 0:(c=!0,o._dynamicPath&&o.tree.on("write",o._writeHandler),o.tree.on("update",o._updateHandler))},this._dynamicPath?this._lazyBind():(this.on=f.before(this._lazyBind,this.on.bind(this)),this.once=f.before(this._lazyBind,this.once.bind(this)))}return a(e,t),e.prototype._getComparedPaths=function(){var t=this._monkeyPath?f.getIn(this.tree._monkeys,this._monkeyPath).data.relatedPaths():[];return[this.solvedPath].concat(t)},e.prototype.isRoot=function(){return!this.path.length},e.prototype.isLeaf=function(){return h["default"].primitive(this._get().data)},e.prototype.isBranch=function(){return!this.isRoot()&&!this.isLeaf()},e.prototype.root=function(){return this.tree.select()},e.prototype.select=function(t){return arguments.length>1&&(t=f.arrayFrom(arguments)),this.tree.select(this.path.concat(t))},e.prototype.up=function(){return this.isRoot()?null:this.tree.select(this.path.slice(0,-1))},e.prototype.down=function(){if(o("down",this.solvedPath),!(this._get().data instanceof Array))throw Error("Baobab.Cursor.down: cannot go down on a non-list type.");return this.tree.select(this.solvedPath.concat(0))},e.prototype.left=function(){o("left",this.solvedPath);var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("Baobab.Cursor.left: cannot go left on a non-list type.");return t?this.tree.select(this.solvedPath.slice(0,-1).concat(t-1)):null},e.prototype.right=function(){o("right",this.solvedPath);var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("Baobab.Cursor.right: cannot go right on a non-list type.");return t+1===this.up()._get().data.length?null:this.tree.select(this.solvedPath.slice(0,-1).concat(t+1))},e.prototype.leftmost=function(){o("leftmost",this.solvedPath);var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("Baobab.Cursor.leftmost: cannot go left on a non-list type.");return this.tree.select(this.solvedPath.slice(0,-1).concat(0))},e.prototype.rightmost=function(){o("rightmost",this.solvedPath);var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("Baobab.Cursor.rightmost: cannot go right on a non-list type.");var e=this.up()._get().data;return this.tree.select(this.solvedPath.slice(0,-1).concat(e.length-1))},e.prototype.map=function(t,e){o("map",this.solvedPath);var i=this._get().data,n=arguments.length;if(!h["default"].array(i))throw Error("baobab.Cursor.map: cannot map a non-list type.");return i.map(function(r,a){return t.call(n>1?e:this,this.select(a),a,i)},this)},e.prototype._get=function(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];if(!h["default"].path(t))throw f.makeError("Baobab.Cursor.getters: invalid path.",{path:t});return this.solvedPath?f.getIn(this.tree._data,this.solvedPath.concat(t)):{data:void 0,solvedPath:null,exists:!1}},e.prototype.exists=function(t){return t=f.coercePath(t),arguments.length>1&&(t=f.arrayFrom(arguments)),this._get(t).exists},e.prototype.get=function(t){t=f.coercePath(t),arguments.length>1&&(t=f.arrayFrom(arguments));var e=this._get(t),i=e.data,n=e.solvedPath;return this.tree.emit("get",{data:i,solvedPath:n,path:this.path.concat(t)}),i},e.prototype.clone=function(){var t=this.get.apply(this,arguments);return f.shallowClone(t)},e.prototype.deepClone=function(){var t=this.get.apply(this,arguments);return f.deepClone(t)},e.prototype.serialize=function(t){if(t=f.coercePath(t),arguments.length>1&&(t=f.arrayFrom(arguments)),!h["default"].path(t))throw f.makeError("Baobab.Cursor.getters: invalid path.",{path:t});if(this.solvedPath){var e=this.solvedPath.concat(t),i=f.deepClone(f.getIn(this.tree._data,e).data),n=f.getIn(this.tree._monkeys,e).data,r=function a(t,e){if(h["default"].object(e)&&h["default"].object(t))for(var i in e)e[i]instanceof u.Monkey?delete t[i]:a(t[i],e[i])};return r(i,n),i}},e.prototype.project=function(t){if(h["default"].object(t)){var e={};for(var i in t)e[i]=this.get(t[i]);return e}if(h["default"].array(t)){for(var e=[],n=0,r=t.length;r>n;n++)e.push(this.get(t[n]));return e}throw f.makeError("Baobab.Cursor.project: wrong projection.",{projection:t})},e.prototype.startRecording=function(t){if(t=t||1/0,1>t)throw f.makeError("Baobab.Cursor.startRecording: invalid max records.",{value:t});return this.state.recording=!0,this.archive?this:(this._lazyBind(),this.archive=new f.Archive(t),this)},e.prototype.stopRecording=function(){return this.state.recording=!1,this},e.prototype.undo=function(){var t=arguments.length<=0||void 0===arguments[0]?1:arguments[0];if(!this.state.recording)throw new Error("Baobab.Cursor.undo: cursor is not recording.");var e=this.archive.back(t);if(!e)throw Error("Baobab.Cursor.undo: cannot find a relevant record.");return this.state.undoing=!0,this.set(e),this},e.prototype.hasHistory=function(){return!(!this.archive||!this.archive.get().length)},e.prototype.getHistory=function(){return this.archive?this.archive.get():[]},e.prototype.clearHistory=function(){return this.archive&&this.archive.clear(),this},e.prototype.release=function(){this._dynamicPath&&this.tree.off("write",this._writeHandler),this.tree.off("update",this._updateHandler),this.hash&&delete this.tree._cursors[this.hash],delete this.tree,delete this.path,delete this.solvedPath,delete this.archive,this.kill(),this.state.killed=!0},e.prototype.toJSON=function(){return this.serialize()},e.prototype.toString=function(){return this._identity},e}(l["default"]);i["default"]=p,"function"==typeof Symbol&&"undefined"!=typeof Symbol.iterator&&(p.prototype[Symbol.iterator]=function(){var t=this._get().data;if(!h["default"].array(t))throw Error("baobab.Cursor.@@iterate: cannot iterate a non-list type.");var e=0,i=this,n=t.length;return{next:function(){return n>e?{value:i.select(e++)}:{done:!0}}}});var _={unset:!0,pop:!0,shift:!0};s("set"),s("unset"),s("apply",h["default"]["function"]),s("push"),s("concat",h["default"].array),s("unshift"),s("pop"),s("shift"),s("splice",h["default"].splicer),s("merge",h["default"].object),s("deepMerge",h["default"].object),e.exports=i["default"]},{"./helpers":4,"./monkey":5,"./type":6,emmett:1}],4:[function(t,e,i){(function(e){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){var i=void 0,n=void 0;for(i=0,n=t.length;n>i;i++)if(e(t[i]))return i;return-1}function o(t){var e=new Array(t.length),i=void 0,n=void 0;for(i=0,n=t.length;n>i;i++)e[i]=t[i];return e}function s(t){return o(t)}function c(t,e){return function(){t.apply(null,arguments),e.apply(null,arguments)}}function l(t){var e=t.source,i="";return t.global&&(i+="g"),t.multiline&&(i+="m"),t.ignoreCase&&(i+="i"),t.sticky&&(i+="y"),t.unicode&&(i+="u"),new RegExp(e,i)}function u(t,i){if(!i||"object"!=typeof i||i instanceof Error||i instanceof b.MonkeyDefinition||i instanceof b.Monkey||"ArrayBuffer"in e&&i instanceof ArrayBuffer)return i;if(x["default"].array(i)){if(t){var n=[],r=void 0,a=void 0;for(r=0,a=i.length;a>r;r++)n.push(u(!0,i[r]));return n}return o(i)}if(i instanceof Date)return new Date(i.getTime());if(i instanceof RegExp)return l(i);if(x["default"].object(i)){var s={},c=void 0;for(c in i)x["default"].lazyGetter(i,c)?Object.defineProperty(s,c,{get:Object.getOwnPropertyDescriptor(i,c).get,enumerable:!0,configurable:!0}):i.hasOwnProperty(c)&&(s[c]=t?u(!0,i[c]):i[c]);return s}return i}function d(t){return t||0===t||""===t?t:[]}function h(t,e){var i=!0,n=void 0;if(!t)return!1;for(n in e)if(x["default"].object(e[n]))i=i&&h(t[n],e[n]);else if(x["default"].array(e[n]))i=i&&!!~e[n].indexOf(t[n]);else if(t[n]!==e[n])return!1;return i}function f(t,e){if(!("object"!=typeof e||null===e||e instanceof b.Monkey)&&(Object.freeze(e),t))if(Array.isArray(e)){var i=void 0,n=void 0;for(i=0,n=e.length;n>i;i++)f(!0,e[i])}else{var r=void 0,a=void 0;for(a in e)x["default"].lazyGetter(e,a)||(r=e[a],r&&e.hasOwnProperty(a)&&"object"==typeof r&&!Object.isFrozen(r)&&f(!0,r))}}function p(t,e){if(!e)return A;var i=[],n=!0,r=t,o=void 0,s=void 0,c=void 0;for(s=0,c=e.length;c>s;s++){if(!r)return{data:void 0,solvedPath:i.concat(e.slice(s)),exists:!1};if("function"==typeof e[s]){if(!x["default"].array(r))return A;if(o=a(r,e[s]),!~o)return A;i.push(o),r=r[o]}else if("object"==typeof e[s]){if(!x["default"].array(r))return A;if(o=a(r,function(t){return h(t,e[s])}),!~o)return A;i.push(o),r=r[o]}else i.push(e[s]),n="object"==typeof r&&e[s]in r,r=r[e[s]]}return{data:r,solvedPath:i,exists:n}}function _(t,e){var i=new Error(t);for(var n in e)i[n]=e[n];return i}function m(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;e>n;n++)i[n-1]=arguments[n];var r=i[0],a=void 0,o=void 0,s=void 0,c=void 0;for(o=1,s=i.length;s>o;o++){a=i[o];for(c in a)!t||!x["default"].object(a[c])||a[c]instanceof b.Monkey?r[c]=a[c]:r[c]=m(!0,r[c]||{},a[c])}return r}function v(t,e){var i=[];e=[].concat(e);for(var n=0,r=e.length;r>n;n++){var a=e[n];"."===a?n||(i=t.slice(0)):".."===a?i=(n?i:t).slice(0,-1):i.push(a)}return i}function g(t,e){var i=void 0,n=void 0,r=void 0,a=void 0,o=void 0,s=void 0,c=void 0,l=void 0,u=void 0;for(i=0,a=t.length;a>i;i++){if(c=t[i],!c.length)return!0;for(n=0,o=e.length;o>n;n++){if(l=e[n],!l||!l.length)return!0;for(r=0,s=l.length;s>r&&(u=l[r],u==c[r]);r++)if(r+1===s||r+1===c.length)return!0}}return!1}function y(t,e,i){i=Math.max(0,i),x["default"]["function"](e)&&(e=a(t,e)),x["default"].object(e)&&(e=a(t,function(t){return h(t,e)}));for(var n=arguments.length,r=Array(n>3?n-3:0),o=3;n>o;o++)r[o-3]=arguments[o];return e>=0?t.slice(0,e).concat(r).concat(t.slice(e+i)):t.slice(0,t.length+e).concat(r).concat(t.slice(t.length+e+i))}i.__esModule=!0,i.arrayFrom=s,i.before=c,i.coercePath=d,i.getIn=p,i.makeError=_,i.solveRelativePath=v,i.solveUpdate=g,i.splice=y;var b=t("./monkey"),w=t("./type"),x=n(w),S=Function.prototype,k=function(){function t(e){r(this,t),this.size=e,this.records=[]}return t.prototype.get=function(){return this.records},t.prototype.add=function(t){return this.records.unshift(t),this.records.length>this.size&&(this.records.length=this.size),this},t.prototype.clear=function(){return this.records=[],this},t.prototype.back=function(t){var e=this.records[t-1];return e&&(this.records=this.records.slice(t)),e},t}();i.Archive=k;var T=u.bind(null,!1),E=u.bind(null,!0);i.shallowClone=T,i.deepClone=E;var O="function"==typeof Object.freeze,N=O?f.bind(null,!1):S,M=O?f.bind(null,!0):S;i.freeze=N,i.deepFreeze=M;var A={data:void 0,solvedPath:null,exists:!1},C=m.bind(null,!1),R=m.bind(null,!0);i.shallowMerge=C,i.deepMerge=R;var P=function(){var t=0;return function(){return t++}}();i.uniqid=P}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./monkey":5,"./type":6}],5:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var a=t("./type"),o=n(a),s=t("./update"),c=n(s),l=t("./helpers"),u=function h(t){var e=this;r(this,h);var i=o["default"].monkeyDefinition(t);if(!i)throw l.makeError("Baobab.monkey: invalid definition.",{definition:t});if(this.type=i,"object"===this.type)this.getter=t.get,this.projection=t.cursors||{},this.paths=Object.keys(this.projection).map(function(t){return e.projection[t]}),this.options=t.options||{};else{var n=1,a={};o["default"].object(t[t.length-1])&&(n++,a=t[t.length-1]),this.getter=t[t.length-n],this.projection=t.slice(0,-n),this.paths=this.projection,this.options=a}this.paths=this.paths.map(function(t){return[].concat(t)}),this.hasDynamicPaths=this.paths.some(o["default"].dynamicPath)};i.MonkeyDefinition=u;var d=function(){function t(e,i,n){var a=this;r(this,t),this.tree=e,this.path=i,this.definition=n;var o=n.projection,s=l.solveRelativePath.bind(null,i.slice(0,-1));"object"===n.type?(this.projection=Object.keys(o).reduce(function(t,e){return t[e]=s(o[e]),t},{}),this.depPaths=Object.keys(this.projection).map(function(t){return a.projection[t]})):(this.projection=o.map(s),this.depPaths=this.projection),this.state={killed:!1},this.writeListener=function(t){var e=t.data.path;if(!a.state.killed){var i=l.solveUpdate([e],a.relatedPaths());i&&a.update()}},this.recursiveListener=function(t){var e=t.data,i=e.monkey,n=e.path;if(!a.state.killed&&a!==i){var r=l.solveUpdate([n],a.relatedPaths(!1));r&&a.update()}},this.tree.on("write",this.writeListener),this.tree.on("_monkey",this.recursiveListener),this.update()}return t.prototype.relatedPaths=function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?!0:arguments[0],i=void 0;i=this.definition.hasDynamicPaths?this.depPaths.map(function(e){return l.getIn(t.tree._data,e).solvedPath}):this.depPaths;var n=e&&this.depPaths.some(function(e){return!!o["default"].monkeyPath(t.tree._monkeys,e)});return n?i.reduce(function(e,i){var n=o["default"].monkeyPath(t.tree._monkeys,i);if(!n)return e.concat([i]);var r=l.getIn(t.tree._monkeys,n).data;return e.concat(r.relatedPaths())},[]):i},t.prototype.update=function(){var t=this.tree.project(this.projection),e=function(t,e,i){var n=null,r=!1;return function(){return r||(n=e.getter.apply(t,"object"===e.type?[i]:i),t.options.immutable&&e.options.immutable!==!1&&l.deepFreeze(n),r=!0),n}}(this.tree,this.definition,t);if(e.isLazyGetter=!0,this.tree.options.lazyMonkeys)this.tree._data=c["default"](this.tree._data,this.path,{type:"monkey",value:e},this.tree.options).data;else{var i=c["default"](this.tree._data,this.path,{type:"set",value:e(),options:{mutableLeaf:!this.definition.options.immutable}},this.tree.options);"data"in i&&(this.tree._data=i.data)}return this.tree.emit("_monkey",{monkey:this,path:this.path}),this},t.prototype.release=function(){this.tree.off("write",this.writeListener),this.tree.off("_monkey",this.monkeyListener),this.state.killed=!0,delete this.projection,delete this.depPaths,delete this.tree},t}();i.Monkey=d},{"./helpers":4,"./type":6,"./update":7}],6:[function(t,e,i){"use strict";function n(t,e){return e.some(function(e){return a[e](t)})}i.__esModule=!0;var r=t("./monkey"),a={};a.array=function(t){return Array.isArray(t)},a.object=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!(t instanceof Date)&&!(t instanceof RegExp)&&!("function"==typeof Map&&t instanceof Map)&&!("function"==typeof Set&&t instanceof Set)},a.string=function(t){return"string"==typeof t},a.number=function(t){return"number"==typeof t},a["function"]=function(t){return"function"==typeof t},a.primitive=function(t){return t!==Object(t)},a.splicer=function(t){return!a.array(t)||t.length<2?!1:n(t[0],["number","function","object"])&&a.number(t[1])};var o=["string","number","function","object"];a.path=function(t){return t||0===t||""===t?[].concat(t).every(function(t){return n(t,o)}):!1},a.dynamicPath=function(t){return t.some(function(t){return a["function"](t)||a.object(t)})},a.monkeyPath=function(t,e){var i=[],n=t,a=void 0,o=void 0;for(a=0,o=e.length;o>a;a++){if(i.push(e[a]),"object"!=typeof n)return null;if(n=n[e[a]],n instanceof r.Monkey)return i}return null},a.lazyGetter=function(t,e){var i=Object.getOwnPropertyDescriptor(t,e);return i&&i.get&&i.get.isLazyGetter===!0},a.monkeyDefinition=function(t){if(a.object(t))return a["function"](t.get)&&(!t.cursors||a.object(t.cursors)&&Object.keys(t.cursors).every(function(e){return a.path(t.cursors[e])}))?"object":null;if(a.array(t)){var e=1;return a.object(t[t.length-1])&&e++,a["function"](t[t.length-e])&&t.slice(0,-e).every(function(t){return a.path(t)})?"array":null}return null},a.watcherMapping=function(t){return a.object(t)&&Object.keys(t).every(function(e){return a.path(t[e])})};var s=["set","apply","push","unshift","concat","pop","shift","deepMerge","merge","splice","unset"];a.operationType=function(t){return"string"==typeof t&&!!~s.indexOf(t)},i["default"]=a,e.exports=i["default"]},{"./monkey":5}],7:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e,i){return c.makeError('Baobab.update: cannot apply the "'+t+'" on '+("a non "+e+" (path: /"+i.join("/")+")."),{path:i})}function a(t,e,i){var n=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],a=i.type,o=i.value,l=i.options,u=void 0===l?{}:l,d={root:t},h=["root"].concat(e),f=[],p=d,_=void 0,m=void 0,v=void 0;for(_=0,m=h.length;m>_;_++){if(v=h[_],_>0&&f.push(v),_===m-1){if("set"===a){if(n.pure&&p[v]===o)return{node:p[v]};s["default"].lazyGetter(p,v)?Object.defineProperty(p,v,{value:o,enumerable:!0,configurable:!0}):n.persistent&&!u.mutableLeaf?p[v]=c.shallowClone(o):p[v]=o}else if("monkey"===a)Object.defineProperty(p,v,{get:o,enumerable:!0,configurable:!0});else if("apply"===a){var g=o(p[v]);if(n.pure&&p[v]===g)return{node:p[v]};s["default"].lazyGetter(p,v)?Object.defineProperty(p,v,{value:g,enumerable:!0,configurable:!0}):n.persistent?p[v]=c.shallowClone(g):p[v]=g}else if("push"===a){if(!s["default"].array(p[v]))throw r("push","array",f);n.persistent?p[v]=p[v].concat([o]):p[v].push(o)}else if("unshift"===a){if(!s["default"].array(p[v]))throw r("unshift","array",f);n.persistent?p[v]=[o].concat(p[v]):p[v].unshift(o)}else if("concat"===a){if(!s["default"].array(p[v]))throw r("concat","array",f);n.persistent?p[v]=p[v].concat(o):p[v].push.apply(p[v],o)}else if("splice"===a){if(!s["default"].array(p[v]))throw r("splice","array",f);n.persistent?p[v]=c.splice.apply(null,[p[v]].concat(o)):p[v].splice.apply(p[v],o)}else if("pop"===a){if(!s["default"].array(p[v]))throw r("pop","array",f);n.persistent?p[v]=c.splice(p[v],-1,1):p[v].pop()}else if("shift"===a){if(!s["default"].array(p[v]))throw r("shift","array",f);n.persistent?p[v]=c.splice(p[v],0,1):p[v].shift()}else if("unset"===a)s["default"].object(p)?delete p[v]:s["default"].array(p)&&p.splice(v,1);else if("merge"===a){if(!s["default"].object(p[v]))throw r("merge","object",f);n.persistent?p[v]=c.shallowMerge({},p[v],o):p[v]=c.shallowMerge(p[v],o)}else if("deepMerge"===a){if(!s["default"].object(p[v]))throw r("deepMerge","object",f);n.persistent?p[v]=c.deepMerge({},p[v],o):p[v]=c.deepMerge(p[v],o)}n.immutable&&!u.mutableLeaf&&c.deepFreeze(p);break}s["default"].primitive(p[v])?p[v]={}:n.persistent&&(p[v]=c.shallowClone(p[v])),n.immutable&&m>0&&c.freeze(p),p=p[v]}return s["default"].lazyGetter(p,v)?{data:d.root}:{data:d.root,node:p[v]}}i.__esModule=!0,i["default"]=a;var o=t("./type"),s=n(o),c=t("./helpers");e.exports=i["default"]},{"./helpers":4,"./type":6}],8:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}i.__esModule=!0;var o=t("emmett"),s=n(o),c=t("./cursor"),l=n(c),u=t("./type"),d=n(u),h=t("./helpers"),f=function(t){function e(i,n){var a=this;r(this,e),t.call(this),this.tree=i,this.mapping=null,this.state={killed:!1},this.refresh(n),this.handler=function(t){if(!a.state.killed){var e=a.getWatchedPaths();return h.solveUpdate(t.data.paths,e)?a.emit("update"):void 0}},this.tree.on("update",this.handler)}return a(e,t),e.prototype.getWatchedPaths=function(){var t=this,e=Object.keys(this.mapping).map(function(e){var i=t.mapping[e];return i instanceof l["default"]?i.solvedPath:t.mapping[e]});return e.reduce(function(e,i){if(i=[].concat(i),d["default"].dynamicPath(i)&&(i=h.getIn(t.tree._data,i).solvedPath),!i)return e;var n=d["default"].monkeyPath(t.tree._monkeys,i);return n?e.concat(h.getIn(t.tree._monkeys,n).data.relatedPaths()):e.concat([i])},[])},e.prototype.getCursors=function(){var t=this,e={};return Object.keys(this.mapping).forEach(function(i){var n=t.mapping[i];n instanceof l["default"]?e[i]=n:e[i]=t.tree.select(n)}),e},e.prototype.refresh=function(t){if(!d["default"].watcherMapping(t))throw h.makeError("Baobab.watch: invalid mapping.",{mapping:t});this.mapping=t;var e={};for(var i in t)e[i]=t[i]instanceof l["default"]?t[i].path:t[i];this.get=this.tree.project.bind(this.tree,e)},e.prototype.release=function(){this.tree.off("update",this.handler),this.state.killed=!0,this.kill()},e}(s["default"]);i["default"]=f,e.exports=i["default"]},{"./cursor":3,"./helpers":4,"./type":6,emmett:1}]},{},[2])(2)}),function(){function t(t){function e(e,i,n,r,a,o){for(;a>=0&&o>a;a+=t){var s=r?r[a]:a;n=i(n,e[s],s,e)}return n}return function(i,n,r,a){n=y(n,a,4);var o=!E(i)&&g.keys(i),s=(o||i).length,c=t>0?0:s-1;return arguments.length<3&&(r=i[o?o[c]:c],c+=t),e(i,n,r,o,c,s)}}function e(t){return function(e,i,n){i=b(i,n);for(var r=T(e),a=t>0?0:r-1;a>=0&&r>a;a+=t)if(i(e[a],a,e))return a;return-1}}function i(t,e,i){return function(n,r,a){var o=0,s=T(n);if("number"==typeof a)t>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(i&&a&&s)return a=i(n,r),n[a]===r?a:-1;if(r!==r)return a=e(u.call(n,o,s),g.isNaN),a>=0?a+o:-1;for(a=t>0?o:s-1;a>=0&&s>a;a+=t)if(n[a]===r)return a;return-1}}function n(t,e){var i=C.length,n=t.constructor,r=g.isFunction(n)&&n.prototype||s,a="constructor";for(g.has(t,a)&&!g.contains(e,a)&&e.push(a);i--;)a=C[i],a in t&&t[a]!==r[a]&&!g.contains(e,a)&&e.push(a)}var r=this,a=r._,o=Array.prototype,s=Object.prototype,c=Function.prototype,l=o.push,u=o.slice,d=s.toString,h=s.hasOwnProperty,f=Array.isArray,p=Object.keys,_=c.bind,m=Object.create,v=function(){},g=function(t){return t instanceof g?t:this instanceof g?void(this._wrapped=t):new g(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=g),exports._=g):r._=g,g.VERSION="1.8.3";var y=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,a){return t.call(e,i,n,r,a)}}return function(){return t.apply(e,arguments)}},b=function(t,e,i){return null==t?g.identity:g.isFunction(t)?y(t,e,i):g.isObject(t)?g.matcher(t):g.property(t)};g.iteratee=function(t,e){return b(t,e,1/0)};var w=function(t,e){return function(i){var n=arguments.length;if(2>n||null==i)return i;for(var r=1;n>r;r++)for(var a=arguments[r],o=t(a),s=o.length,c=0;s>c;c++){var l=o[c];e&&void 0!==i[l]||(i[l]=a[l])}return i}},x=function(t){if(!g.isObject(t))return{};if(m)return m(t);v.prototype=t;var e=new v;return v.prototype=null,e},S=function(t){return function(e){return null==e?void 0:e[t]}},k=Math.pow(2,53)-1,T=S("length"),E=function(t){var e=T(t);return"number"==typeof e&&e>=0&&k>=e};g.each=g.forEach=function(t,e,i){e=y(e,i);var n,r;if(E(t))for(n=0,r=t.length;r>n;n++)e(t[n],n,t);else{var a=g.keys(t);for(n=0,r=a.length;r>n;n++)e(t[a[n]],a[n],t)}return t},g.map=g.collect=function(t,e,i){e=b(e,i);for(var n=!E(t)&&g.keys(t),r=(n||t).length,a=Array(r),o=0;r>o;o++){var s=n?n[o]:o;a[o]=e(t[s],s,t)}return a},g.reduce=g.foldl=g.inject=t(1),g.reduceRight=g.foldr=t(-1),g.find=g.detect=function(t,e,i){var n;return n=E(t)?g.findIndex(t,e,i):g.findKey(t,e,i),void 0!==n&&-1!==n?t[n]:void 0},g.filter=g.select=function(t,e,i){var n=[];return e=b(e,i),g.each(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n},g.reject=function(t,e,i){return g.filter(t,g.negate(b(e)),i)},g.every=g.all=function(t,e,i){e=b(e,i);for(var n=!E(t)&&g.keys(t),r=(n||t).length,a=0;r>a;a++){var o=n?n[a]:a;if(!e(t[o],o,t))return!1}return!0},g.some=g.any=function(t,e,i){e=b(e,i);for(var n=!E(t)&&g.keys(t),r=(n||t).length,a=0;r>a;a++){var o=n?n[a]:a;if(e(t[o],o,t))return!0}return!1},g.contains=g.includes=g.include=function(t,e,i,n){return E(t)||(t=g.values(t)),("number"!=typeof i||n)&&(i=0),g.indexOf(t,e,i)>=0},g.invoke=function(t,e){var i=u.call(arguments,2),n=g.isFunction(e);return g.map(t,function(t){var r=n?e:t[e];return null==r?r:r.apply(t,i)})},g.pluck=function(t,e){return g.map(t,g.property(e))},g.where=function(t,e){return g.filter(t,g.matcher(e))},g.findWhere=function(t,e){return g.find(t,g.matcher(e))},g.max=function(t,e,i){var n,r,a=-1/0,o=-1/0;if(null==e&&null!=t){t=E(t)?t:g.values(t);for(var s=0,c=t.length;c>s;s++)n=t[s],n>a&&(a=n)}else e=b(e,i),g.each(t,function(t,i,n){r=e(t,i,n),(r>o||r===-1/0&&a===-1/0)&&(a=t,o=r)});return a},g.min=function(t,e,i){var n,r,a=1/0,o=1/0;if(null==e&&null!=t){t=E(t)?t:g.values(t);for(var s=0,c=t.length;c>s;s++)n=t[s],a>n&&(a=n)}else e=b(e,i),g.each(t,function(t,i,n){r=e(t,i,n),(o>r||1/0===r&&1/0===a)&&(a=t,o=r)});return a},g.shuffle=function(t){for(var e,i=E(t)?t:g.values(t),n=i.length,r=Array(n),a=0;n>a;a++)e=g.random(0,a),e!==a&&(r[a]=r[e]),r[e]=i[a];return r},g.sample=function(t,e,i){return null==e||i?(E(t)||(t=g.values(t)),t[g.random(t.length-1)]):g.shuffle(t).slice(0,Math.max(0,e))},g.sortBy=function(t,e,i){return e=b(e,i),g.pluck(g.map(t,function(t,i,n){return{value:t,index:i,criteria:e(t,i,n)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var O=function(t){return function(e,i,n){var r={};return i=b(i,n),g.each(e,function(n,a){var o=i(n,a,e);t(r,n,o)}),r}};g.groupBy=O(function(t,e,i){g.has(t,i)?t[i].push(e):t[i]=[e]}),g.indexBy=O(function(t,e,i){t[i]=e}),g.countBy=O(function(t,e,i){g.has(t,i)?t[i]++:t[i]=1}),g.toArray=function(t){return t?g.isArray(t)?u.call(t):E(t)?g.map(t,g.identity):g.values(t):[]},g.size=function(t){return null==t?0:E(t)?t.length:g.keys(t).length},g.partition=function(t,e,i){e=b(e,i);var n=[],r=[];return g.each(t,function(t,i,a){(e(t,i,a)?n:r).push(t)}),[n,r]},g.first=g.head=g.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:g.initial(t,t.length-e)},g.initial=function(t,e,i){return u.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},g.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:g.rest(t,Math.max(0,t.length-e))},g.rest=g.tail=g.drop=function(t,e,i){return u.call(t,null==e||i?1:e)},g.compact=function(t){return g.filter(t,g.identity)};var N=function(t,e,i,n){for(var r=[],a=0,o=n||0,s=T(t);s>o;o++){var c=t[o];if(E(c)&&(g.isArray(c)||g.isArguments(c))){e||(c=N(c,e,i));var l=0,u=c.length;for(r.length+=u;u>l;)r[a++]=c[l++]}else i||(r[a++]=c)}return r};g.flatten=function(t,e){return N(t,e,!1)},g.without=function(t){return g.difference(t,u.call(arguments,1))},g.uniq=g.unique=function(t,e,i,n){g.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=b(i,n));for(var r=[],a=[],o=0,s=T(t);s>o;o++){var c=t[o],l=i?i(c,o,t):c;e?(o&&a===l||r.push(c),a=l):i?g.contains(a,l)||(a.push(l),r.push(c)):g.contains(r,c)||r.push(c)}return r},g.union=function(){return g.uniq(N(arguments,!0,!0));
},g.intersection=function(t){for(var e=[],i=arguments.length,n=0,r=T(t);r>n;n++){var a=t[n];if(!g.contains(e,a)){for(var o=1;i>o&&g.contains(arguments[o],a);o++);o===i&&e.push(a)}}return e},g.difference=function(t){var e=N(arguments,!0,!0,1);return g.filter(t,function(t){return!g.contains(e,t)})},g.zip=function(){return g.unzip(arguments)},g.unzip=function(t){for(var e=t&&g.max(t,T).length||0,i=Array(e),n=0;e>n;n++)i[n]=g.pluck(t,n);return i},g.object=function(t,e){for(var i={},n=0,r=T(t);r>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},g.findIndex=e(1),g.findLastIndex=e(-1),g.sortedIndex=function(t,e,i,n){i=b(i,n,1);for(var r=i(e),a=0,o=T(t);o>a;){var s=Math.floor((a+o)/2);i(t[s])<r?a=s+1:o=s}return a},g.indexOf=i(1,g.findIndex,g.sortedIndex),g.lastIndexOf=i(-1,g.findLastIndex),g.range=function(t,e,i){null==e&&(e=t||0,t=0),i=i||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=Array(n),a=0;n>a;a++,t+=i)r[a]=t;return r};var M=function(t,e,i,n,r){if(!(n instanceof e))return t.apply(i,r);var a=x(t.prototype),o=t.apply(a,r);return g.isObject(o)?o:a};g.bind=function(t,e){if(_&&t.bind===_)return _.apply(t,u.call(arguments,1));if(!g.isFunction(t))throw new TypeError("Bind must be called on a function");var i=u.call(arguments,2),n=function(){return M(t,n,e,this,i.concat(u.call(arguments)))};return n},g.partial=function(t){var e=u.call(arguments,1),i=function(){for(var n=0,r=e.length,a=Array(r),o=0;r>o;o++)a[o]=e[o]===g?arguments[n++]:e[o];for(;n<arguments.length;)a.push(arguments[n++]);return M(t,i,this,this,a)};return i},g.bindAll=function(t){var e,i,n=arguments.length;if(1>=n)throw new Error("bindAll must be passed function names");for(e=1;n>e;e++)i=arguments[e],t[i]=g.bind(t[i],t);return t},g.memoize=function(t,e){var i=function(n){var r=i.cache,a=""+(e?e.apply(this,arguments):n);return g.has(r,a)||(r[a]=t.apply(this,arguments)),r[a]};return i.cache={},i},g.delay=function(t,e){var i=u.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},g.defer=g.partial(g.delay,g,1),g.throttle=function(t,e,i){var n,r,a,o=null,s=0;i||(i={});var c=function(){s=i.leading===!1?0:g.now(),o=null,a=t.apply(n,r),o||(n=r=null)};return function(){var l=g.now();s||i.leading!==!1||(s=l);var u=e-(l-s);return n=this,r=arguments,0>=u||u>e?(o&&(clearTimeout(o),o=null),s=l,a=t.apply(n,r),o||(n=r=null)):o||i.trailing===!1||(o=setTimeout(c,u)),a}},g.debounce=function(t,e,i){var n,r,a,o,s,c=function(){var l=g.now()-o;e>l&&l>=0?n=setTimeout(c,e-l):(n=null,i||(s=t.apply(a,r),n||(a=r=null)))};return function(){a=this,r=arguments,o=g.now();var l=i&&!n;return n||(n=setTimeout(c,e)),l&&(s=t.apply(a,r),a=r=null),s}},g.wrap=function(t,e){return g.partial(e,t)},g.negate=function(t){return function(){return!t.apply(this,arguments)}},g.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},g.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},g.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),1>=t&&(e=null),i}},g.once=g.partial(g.before,2);var A=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];g.keys=function(t){if(!g.isObject(t))return[];if(p)return p(t);var e=[];for(var i in t)g.has(t,i)&&e.push(i);return A&&n(t,e),e},g.allKeys=function(t){if(!g.isObject(t))return[];var e=[];for(var i in t)e.push(i);return A&&n(t,e),e},g.values=function(t){for(var e=g.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=t[e[r]];return n},g.mapObject=function(t,e,i){e=b(e,i);for(var n,r=g.keys(t),a=r.length,o={},s=0;a>s;s++)n=r[s],o[n]=e(t[n],n,t);return o},g.pairs=function(t){for(var e=g.keys(t),i=e.length,n=Array(i),r=0;i>r;r++)n[r]=[e[r],t[e[r]]];return n},g.invert=function(t){for(var e={},i=g.keys(t),n=0,r=i.length;r>n;n++)e[t[i[n]]]=i[n];return e},g.functions=g.methods=function(t){var e=[];for(var i in t)g.isFunction(t[i])&&e.push(i);return e.sort()},g.extend=w(g.allKeys),g.extendOwn=g.assign=w(g.keys),g.findKey=function(t,e,i){e=b(e,i);for(var n,r=g.keys(t),a=0,o=r.length;o>a;a++)if(n=r[a],e(t[n],n,t))return n},g.pick=function(t,e,i){var n,r,a={},o=t;if(null==o)return a;g.isFunction(e)?(r=g.allKeys(o),n=y(e,i)):(r=N(arguments,!1,!1,1),n=function(t,e,i){return e in i},o=Object(o));for(var s=0,c=r.length;c>s;s++){var l=r[s],u=o[l];n(u,l,o)&&(a[l]=u)}return a},g.omit=function(t,e,i){if(g.isFunction(e))e=g.negate(e);else{var n=g.map(N(arguments,!1,!1,1),String);e=function(t,e){return!g.contains(n,e)}}return g.pick(t,e,i)},g.defaults=w(g.allKeys,!0),g.create=function(t,e){var i=x(t);return e&&g.extendOwn(i,e),i},g.clone=function(t){return g.isObject(t)?g.isArray(t)?t.slice():g.extend({},t):t},g.tap=function(t,e){return e(t),t},g.isMatch=function(t,e){var i=g.keys(e),n=i.length;if(null==t)return!n;for(var r=Object(t),a=0;n>a;a++){var o=i[a];if(e[o]!==r[o]||!(o in r))return!1}return!0};var R=function(t,e,i,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof g&&(t=t._wrapped),e instanceof g&&(e=e._wrapped);var r=d.call(t);if(r!==d.call(e))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var a="[object Array]"===r;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,s=e.constructor;if(o!==s&&!(g.isFunction(o)&&o instanceof o&&g.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var c=i.length;c--;)if(i[c]===t)return n[c]===e;if(i.push(t),n.push(e),a){if(c=t.length,c!==e.length)return!1;for(;c--;)if(!R(t[c],e[c],i,n))return!1}else{var l,u=g.keys(t);if(c=u.length,g.keys(e).length!==c)return!1;for(;c--;)if(l=u[c],!g.has(e,l)||!R(t[l],e[l],i,n))return!1}return i.pop(),n.pop(),!0};g.isEqual=function(t,e){return R(t,e)},g.isEmpty=function(t){return null==t?!0:E(t)&&(g.isArray(t)||g.isString(t)||g.isArguments(t))?0===t.length:0===g.keys(t).length},g.isElement=function(t){return!(!t||1!==t.nodeType)},g.isArray=f||function(t){return"[object Array]"===d.call(t)},g.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},g.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){g["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),g.isArguments(arguments)||(g.isArguments=function(t){return g.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(g.isFunction=function(t){return"function"==typeof t||!1}),g.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},g.isNaN=function(t){return g.isNumber(t)&&t!==+t},g.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},g.isNull=function(t){return null===t},g.isUndefined=function(t){return void 0===t},g.has=function(t,e){return null!=t&&h.call(t,e)},g.noConflict=function(){return r._=a,this},g.identity=function(t){return t},g.constant=function(t){return function(){return t}},g.noop=function(){},g.property=S,g.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},g.matcher=g.matches=function(t){return t=g.extendOwn({},t),function(e){return g.isMatch(e,t)}},g.times=function(t,e,i){var n=Array(Math.max(0,t));e=y(e,i,1);for(var r=0;t>r;r++)n[r]=e(r);return n},g.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},g.now=Date.now||function(){return(new Date).getTime()};var P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=g.invert(P),D=function(t){var e=function(e){return t[e]},i="(?:"+g.keys(t).join("|")+")",n=RegExp(i),r=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(r,e):t}};g.escape=D(P),g.unescape=D(L),g.result=function(t,e,i){var n=null==t?void 0:t[e];return void 0===n&&(n=i),g.isFunction(n)?n.call(t):n};var Y=0;g.uniqueId=function(t){var e=++Y+"";return t?t+e:e},g.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+j[t]};g.template=function(t,e,i){!e&&i&&(e=i),e=g.defaults({},e,g.templateSettings);var n=RegExp([(e.escape||I).source,(e.interpolate||I).source,(e.evaluate||I).source].join("|")+"|$","g"),r=0,a="__p+='";t.replace(n,function(e,i,n,o,s){return a+=t.slice(r,s).replace(H,$),r=s+e.length,i?a+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),e}),a+="';\n",e.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(e.variable||"obj","_",a)}catch(s){throw s.source=a,s}var c=function(t){return o.call(this,t,g)},l=e.variable||"obj";return c.source="function("+l+"){\n"+a+"}",c},g.chain=function(t){var e=g(t);return e._chain=!0,e};var F=function(t,e){return t._chain?g(e).chain():e};g.mixin=function(t){g.each(g.functions(t),function(e){var i=g[e]=t[e];g.prototype[e]=function(){var t=[this._wrapped];return l.apply(t,arguments),F(this,i.apply(g,t))}})},g.mixin(g),g.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=o[t];g.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],F(this,i)}}),g.each(["concat","join","slice"],function(t){var e=o[t];g.prototype[t]=function(){return F(this,e.apply(this._wrapped,arguments))}}),g.prototype.value=function(){return this._wrapped},g.prototype.valueOf=g.prototype.toJSON=g.prototype.value,g.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return g})}.call(this),function(t,e,i){function n(t,i){this.wrapper="string"==typeof t?e.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={snapThreshold:.25,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,click:!1,tap:!1,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var n in i)this.options[n]=i[n];this.translateZ=this.options.HWCompositing&&a.hasPerspective?" translateZ(0)":"",this.options.useTransition=a.hasTransition&&this.options.useTransition,this.options.useTransform=a.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?a.ease[this.options.bounceEasing]||a.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},a=function(){function n(t){return o===!1?!1:""===o?t:o+t.charAt(0).toUpperCase()+t.substr(1)}var r={},a=e.createElement("div").style,o=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],i=0,n=e.length;n>i;i++)if(t=e[i]+"ransform",t in a)return e[i].substr(0,e[i].length-1);return!1}();r.getTime=Date.now||function(){return(new Date).getTime()},r.extend=function(t,e){for(var i in e)t[i]=e[i]},r.addEvent=function(t,e,i,n){t.addEventListener(e,i,!!n)},r.removeEvent=function(t,e,i,n){t.removeEventListener(e,i,!!n)},r.prefixPointerEvent=function(e){return t.MSPointerEvent?"MSPointer"+e.charAt(9).toUpperCase()+e.substr(10):e},r.momentum=function(t,e,n,r,a,o){var s,c,l=t-e,u=i.abs(l)/n;return o=void 0===o?.001:o,s=t+u*u/(2*o)*(0>l?-1:1),c=u/o,r>s?(s=a?r-a/2.5*(u/8):r,l=i.abs(s-t),c=l/u):s>0&&(s=a?a/2.5*(u/8):0,l=i.abs(t)+s,c=l/u),{destination:i.round(s),duration:c}};var s=n("transform");r.extend(r,{hasTransform:s!==!1,hasPerspective:n("perspective")in a,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:n("transition")in a}),r.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),r.extend(r.style={},{transform:s,transitionTimingFunction:n("transitionTimingFunction"),transitionDuration:n("transitionDuration"),transitionDelay:n("transitionDelay"),transformOrigin:n("transformOrigin")}),r.hasClass=function(t,e){var i=new RegExp("(^|\\s)"+e+"(\\s|$)");return i.test(t.className)},r.addClass=function(t,e){if(!r.hasClass(t,e)){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}},r.removeClass=function(t,e){if(r.hasClass(t,e)){var i=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i," ")}},r.offset=function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}},r.preventDefaultException=function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1},r.extend(r.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});var c=function(t,e,i){var n=1==e?1-t:2==e?t:.5>t?2*t:2*(1-t);return 1==i?n*=n:2==i?n*=n*n:3==i?n*=n*n*n:4==i&&(n*=n*n*n*n),1==e?1-n:2==e?n:.5>t?n/2:1-n/2};return r.extend(r.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return i.sqrt(1- --t*t)}},easeInOutCirc:{style:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",fn:function(t){return(t*=2)<1?-.5*(i.sqrt(1-t*t)-1):.5*(i.sqrt(1-(t-=2)*t)+1)}},cubicOut:{style:"cubic-bezier(0.215, 0.61, 0.355, 1)",fn:function(t){return c(t,1,2)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,n=.4;return 0===t?0:1==t?1:n*i.pow(2,-10*t)*i.sin((t-e/4)*(2*i.PI)/e)+1}}}),r.tap=function(t,i){var n=e.createEvent("Event");n.initEvent(i,!0,!0),n.pageX=t.pageX,n.pageY=t.pageY,t.target.dispatchEvent(n)},r.click=function(t){var i,n=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(i=e.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,t.view,1,n.screenX,n.screenY,n.clientX,n.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),i._constructed=!0,n.dispatchEvent(i))},r}();n.prototype={version:"5.1.3",_init:function(){this._initEvents(),this.options.snap&&this._initSnap()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this.moved=!1,this._execEvent("scrollEnd")))},_start:function(t){if((1==a.eventType[t.type]||0===t.button)&&this.enabled&&(!this.initiated||a.eventType[t.type]===this.initiated)){!this.options.preventDefault||a.isBadAndroid||a.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,n=t.touches?t.touches[0]:t;this.initiated=a.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=a.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this.moved=!1,this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this.moved=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=n.pageX,this.pointY=n.pageY,this.moved=!1,this._execEvent("beforeScrollStart"),this._execEvent("grab")}},_move:function(t){if(this.enabled&&a.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,n,r,o,s=t.touches?t.touches[0]:t,c=s.pageX-this.pointX,l=s.pageY-this.pointY,u=a.getTime();if(this.pointX=s.pageX,this.pointY=s.pageY,this.distX+=c,this.distY+=l,r=i.abs(this.distX),o=i.abs(this.distY),!(u-this.endTime>300&&10>r&&10>o)){if(this.directionLocked||this.options.freeScroll||(r>o+this.options.directionLockThreshold?this.directionLocked="h":o>=r+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}c=this.hasHorizontalScroll?c:0,l=this.hasVerticalScroll?l:0,e=this.x+c,n=this.y+l,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+c/3:e>0?0:this.maxScrollX),(n>0||n<this.maxScrollY)&&(n=this.options.bounce?this.y+l/3:n>0?0:this.maxScrollY),this.directionX=c>0?-1:0>c?1:0,this.directionY=l>0?-1:0>l?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,n),u-this.startTime>300&&(this.startTime=u,this.startX=this.x,this.startY=this.y),this.options.probeType>1&&this._execEvent("scroll")}}},reset:function(){this.isInTransition=0,this.initiated=0,this.endTime=a.getTime()},_end:function(t){if(this.options.marquee){if(!this.enabled)return;this.options.preventDefault&&!a.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault(),this.moved||(this.startX=i.round(this.x),this.startY=i.round(this.y));var e,n,r=(t.changedTouches?t.changedTouches[0]:t,a.getTime()-this.startTime),o=i.round(this.x),s=i.round(this.y),c=i.abs(o-this.startX),l=i.abs(s-this.startY),u=0,d="";if(this.isInTransition=0,this.initiated=0,this.endTime=a.getTime(),this.resetPosition(this.options.bounceTime))return;if(this.scrollTo(o,s),this.options.momentum&&300>r&&this.moved&&(e=this.hasHorizontalScroll?a.momentum(this.x,this.startX,r,this.maxScrollX,this.minScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:o,duration:0},n=this.hasVerticalScroll?a.momentum(this.y,this.startY,r,this.maxScrollY,this.minScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:s,duration:0},o=e.destination,s=n.destination,u=i.max(e.duration,n.duration),this.isInTransition=1),this.options.snap){var h=this._nearestSnap(o,s);this.currentPage=h,u=this.options.snapSpeed||i.max(i.max(i.min(i.abs(o-h.x),1e3),i.min(i.abs(s-h.y),1e3)),this.options.snapSpeed),o=h.x,s=h.y,this.directionX=0,this.directionY=0,d=this.options.bounceEasing}if(o==this.x&&s==this.y||((o>0||o<this.maxScrollX||s>0||s<this.maxScrollY)&&(d=a.ease.quadratic),s<this.maxScrollY&&(s=this.maxScrollY),o<this.maxScrollX&&(o=this.maxScrollX),s>0&&(s=0),o>0&&(o=0),o==this.x&&s==this.y||this.scrollTo(o,s,u,d)),!this.moved)return this.options.tap&&a.tap(t,this.options.tap),this.options.click&&a.click(t),void this._execEvent("scrollCancel");this.moved=!1}else{if(!this.enabled||a.eventType[t.type]!==this.initiated)return;this.options.preventDefault&&!a.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,n,r=(t.changedTouches?t.changedTouches[0]:t,a.getTime()-this.startTime),o=i.round(this.x),s=i.round(this.y),c=i.abs(o-this.startX),l=i.abs(s-this.startY),u=0,d="";if(this.isInTransition=0,this.initiated=0,this.endTime=a.getTime(),this.resetPosition(this.options.bounceTime))return;if(this.scrollTo(o,s),!this.moved)return this.options.tap&&a.tap(t,this.options.tap),this.options.click&&a.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&200>r&&100>c&&100>l)return void this._execEvent("flick");if(this.options.momentum&&300>r&&(e=this.hasHorizontalScroll?a.momentum(this.x,this.startX,r,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:o,duration:0},n=this.hasVerticalScroll?a.momentum(this.y,this.startY,r,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:s,duration:0},o=e.destination,s=n.destination,u=i.max(e.duration,n.duration),this.isInTransition=1),this.options.snap){var h=this._nearestSnap(o,s);this.currentPage=h,u=this.options.snapSpeed||i.max(i.max(i.min(i.abs(o-h.x),1e3),i.min(i.abs(s-h.y),1e3)),this.options.snapSpeed),o=h.x,s=h.y,this.directionX=0,this.directionY=0,d=this.options.bounceEasing}if(o!=this.x||s!=this.y)return(o>0||o<this.maxScrollX||s>0||s<this.maxScrollY)&&(d=a.ease.quadratic),void this.scrollTo(o,s,u,d);this._execEvent("scrollEnd")}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,i=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),e==this.x&&i==this.y?!1:(this.scrollTo(e,i,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=a.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;i>e;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,i,n){t=this.x+t,e=this.y+e,i=i||0,this.scrollTo(t,e,i,n)},scrollTo:function(t,e,i,n){this.hold||(n=n||a.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&n.style?(this._transitionTimingFunction(n.style),this._transitionTime(i),this._translate(t,e)):this._animate(t,e,i,n.fn))},scrollToElement:function(t,e,n,r,o){if(t=t.nodeType?t:this.scroller.querySelector(t)){var s=a.offset(t);s.left-=this.wrapperOffset.left,s.top-=this.wrapperOffset.top,n===!0&&(n=i.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),r===!0&&(r=i.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),s.left-=n||0,s.top-=r||0,s.left=s.left>0?0:s.left<this.maxScrollX?this.maxScrollX:s.left,s.top=s.top>0?0:s.top<this.maxScrollY?this.maxScrollY:s.top,e=void 0===e||null===e||"auto"===e?i.max(i.abs(this.x-s.left),i.abs(this.y-s.top)):e,this.scrollTo(s.left,s.top,e,o)}},_transitionTime:function(t){t=t||0,this.scrollerStyle[a.style.transitionDuration]=t+"ms",!t&&a.isBadAndroid&&(this.scrollerStyle[a.style.transitionDuration]="0.001s")},_transitionTimingFunction:function(t){this.scrollerStyle[a.style.transitionTimingFunction]=t},_translate:function(t,e){if(!this.hold&&(this.options.useTransform&&!this.options.fake?this.scrollerStyle[a.style.transform]="translate("+t+"px,"+i.round(e)+"px)"+this.translateZ:this.options.fake||(t=i.round(t),e=i.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators))for(var n=this.indicators.length;n--;)this.indicators[n].updatePosition()},_initEvents:function(e){var i=e?a.removeEvent:a.addEvent,n=this.options.bindToWrapper?this.wrapper:t;i(t,"orientationchange",this),i(t,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(n,"mousemove",this),i(n,"mousecancel",this),i(n,"mouseup",this)),a.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,a.prefixPointerEvent("pointerdown"),this),i(n,a.prefixPointerEvent("pointermove"),this),i(n,a.prefixPointerEvent("pointercancel"),this),i(n,a.prefixPointerEvent("pointerup"),this)),a.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(n,"touchmove",this),i(n,"touchcancel",this),i(n,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,i,n=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(n=n[a.style.transform].split(")")[0].split(", "),e=+(n[12]||n[4]),i=+(n[13]||n[5])):(e=+n.left.replace(/[^-\d.]/g,""),i=+n.top.replace(/[^-\d.]/g,"")),{x:e,y:i}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,n,r,a,o,s=0,c=0,l=0,u=this.options.snapStepX||this.wrapperWidth,d=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(n=i.round(u/2),r=i.round(d/2);l>-this.scrollerWidth;){for(this.pages[s]=[],t=0,a=0;a>-this.scrollerHeight;)this.pages[s][t]={x:i.max(l,this.maxScrollX),y:i.max(a,this.maxScrollY),width:u,height:d,cx:l-n,cy:a-r},a-=d,t++;l-=u,s++}else for(o=this.options.snap,t=o.length,e=-1;t>s;s++)(0===s||o[s].offsetLeft<=o[s-1].offsetLeft)&&(c=0,e++),this.pages[c]||(this.pages[c]=[]),l=i.max(-o[s].offsetLeft,this.maxScrollX),a=i.max(-o[s].offsetTop,this.maxScrollY),n=l-i.round(o[s].offsetWidth/2),r=a-i.round(o[s].offsetHeight/2),this.pages[c][e]={x:l,y:a,width:o[s].offsetWidth,height:o[s].offsetHeight,cx:n,cy:r},l>this.maxScrollX&&c++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var n=0,r=this.pages.length,a=0;if(i.abs(t-this.absStartX)<this.snapThresholdX&&i.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);r>n;n++)if(t>=this.pages[n][0].cx){t=this.pages[n][0].x;break}for(r=this.pages[n].length;r>a;a++)if(e>=this.pages[0][a].cy){e=this.pages[0][a].y;break}return n==this.currentPage.pageX&&(n+=this.directionX,0>n?n=0:n>=this.pages.length&&(n=this.pages.length-1),t=this.pages[n][0].x),a==this.currentPage.pageY&&(a+=this.directionY,0>a?a=0:a>=this.pages[0].length&&(a=this.pages[0].length-1),e=this.pages[0][a].y),{x:t,y:e,pageX:n,pageY:a}},goToPage:function(t,e,n,r){r=r||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:0>t&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:0>e&&(e=0);var a=this.pages[t][e].x,o=this.pages[t][e].y;n=void 0===n?this.options.snapSpeed||i.max(i.max(i.min(i.abs(a-this.x),1e3),i.min(i.abs(o-this.y),1e3)),300):n,this.currentPage={x:a,y:o,pageX:t,pageY:e},this.scrollTo(a,o,n,r)},_animate:function(t,e,i,n){function o(){if(s.lastAnimation[0]==t&&s.lastAnimation[1]==e){var h,f,p,_=a.getTime();return _>=d?(s.isAnimating=!1,s._translate(t,e),void(s.resetPosition(s.options.bounceTime)||(s.moved=!1,s._execEvent("scrollEnd")))):void(s.isAnimating&&(_=(_-u)/i,p=n(_),h=(t-c)*p+c,f=(e-l)*p+l,s._translate(h,f),s.isAnimating&&r(o),3==s.options.probeType&&s._execEvent("scroll")))}}var s=this,c=this.x,l=this.y,u=a.getTime(),d=u+i;this.lastAnimation=[t,e,i],s.isAnimating=!0,s._execEvent("scrollStart"),o()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},n.utils=a,"undefined"!=typeof module&&module.exports?module.exports=n:t.IScroll=n}(window,document,Math),window.Modernizr=function(t,e,i){function n(t){y.cssText=t}function r(t,e){return n(b.join(t+";")+(e||""))}function a(t,e){return typeof t===e}function o(t,e){return!!~(""+t).indexOf(e)}function s(t,e){for(var n in t){var r=t[n];if(!o(r,"-")&&y[r]!==i)return"pfx"==e?r:!0}return!1}function c(t,e,n){for(var r in t){var o=e[t[r]];if(o!==i)return n===!1?t[r]:a(o,"function")?o.bind(n||e):o}return!1}function l(t,e,i){var n=t.charAt(0).toUpperCase()+t.slice(1),r=(t+" "+x.join(n+" ")+n).split(" ");return a(e,"string")||a(e,"undefined")?s(r,e):(r=(t+" "+S.join(n+" ")+n).split(" "),c(r,e,i))}var u,d,h,f="2.8.3",p={},_=!0,m=e.documentElement,v="modernizr",g=e.createElement(v),y=g.style,b=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),w="Webkit Moz O ms",x=w.split(" "),S=w.toLowerCase().split(" "),k={svg:"http://www.w3.org/2000/svg"},T={},E=[],O=E.slice,N=function(t,i,n,r){var a,o,s,c,l=e.createElement("div"),u=e.body,d=u||e.createElement("body");if(parseInt(n,10))for(;n--;)s=e.createElement("div"),s.id=r?r[n]:v+(n+1),l.appendChild(s);return a=["&#173;",'<style id="s',v,'">',t,"</style>"].join(""),l.id=v,(u?l:d).innerHTML+=a,d.appendChild(l),u||(d.style.background="",d.style.overflow="hidden",c=m.style.overflow,m.style.overflow="hidden",m.appendChild(d)),o=i(l,t),u?l.parentNode.removeChild(l):(d.parentNode.removeChild(d),m.style.overflow=c),!!o},M={}.hasOwnProperty;h=a(M,"undefined")||a(M.call,"undefined")?function(t,e){return e in t&&a(t.constructor.prototype[e],"undefined")}:function(t,e){return M.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var i=O.call(arguments,1),n=function(){if(this instanceof n){var r=function(){};r.prototype=e.prototype;var a=new r,o=e.apply(a,i.concat(O.call(arguments)));
return Object(o)===o?o:a}return e.apply(t,i.concat(O.call(arguments)))};return n}),T.touch=function(){var i;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?i=!0:N(["@media (",b.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){i=9===t.offsetTop}),i},T.rgba=function(){return n("background-color:rgba(150,255,150,.5)"),o(y.backgroundColor,"rgba")},T.opacity=function(){return r("opacity:.55"),/^0.55$/.test(y.opacity)},T.cssanimations=function(){return l("animationName")},T.cssgradients=function(){var t="background-image:",e="gradient(linear,left top,right bottom,from(#9f9),to(white));",i="linear-gradient(left top,#9f9, white);";return n((t+"-webkit- ".split(" ").join(e+t)+b.join(i+t)).slice(0,-t.length)),o(y.backgroundImage,"gradient")},T.csstransforms=function(){return!!l("transform")},T.csstransitions=function(){return l("transition")},T.video=function(){var t=e.createElement("video"),i=!1;try{(i=!!t.canPlayType)&&(i=new Boolean(i),i.ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),i.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),i.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return i},T.svg=function(){return!!e.createElementNS&&!!e.createElementNS(k.svg,"svg").createSVGRect},T.inlinesvg=function(){var t=e.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==k.svg};for(var A in T)h(T,A)&&(d=A.toLowerCase(),p[d]=T[A](),E.push((p[d]?"":"no-")+d));return p.addTest=function(t,e){if("object"==typeof t)for(var n in t)h(t,n)&&p.addTest(n,t[n]);else{if(t=t.toLowerCase(),p[t]!==i)return p;e="function"==typeof e?e():e,"undefined"!=typeof _&&_&&(m.className+=" m-"+(e?"":"no-")+t),p[t]=e}return p},n(""),g=u=null,p._version=f,p._prefixes=b,p._domPrefixes=S,p._cssomPrefixes=x,p.testProp=function(t){return s([t])},p.testAllProps=l,p.testStyles=N,p.prefixed=function(t,e,i){return e?l(t,e,i):l(t,"pfx")},m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(_?" m-js m-"+E.join(" m-"):""),p}(this,this.document),function(t,e,i){function n(t){return"[object Function]"==m.call(t)}function r(t){return"string"==typeof t}function a(){}function o(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function s(){var t=v.shift();g=1,t?t.t?p(function(){("c"==t.t?h.injectCss:h.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),s()):g=0}function c(t,i,n,r,a,c,l){function u(e){if(!f&&o(d.readyState)&&(y.r=f=1,!g&&s(),d.onload=d.onreadystatechange=null,e)){"img"!=t&&p(function(){w.removeChild(d)},50);for(var n in E[i])E[i].hasOwnProperty(n)&&E[i][n].onload()}}var l=l||h.errorTimeout,d=e.createElement(t),f=0,m=0,y={t:n,s:i,e:a,a:c,x:l};1===E[i]&&(m=1,E[i]=[]),"object"==t?d.data=i:(d.src=i,d.type=t),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){u.call(this,m)},v.splice(r,0,y),"img"!=t&&(m||2===E[i]?(w.insertBefore(d,b?null:_),p(u,l)):E[i].push(d))}function l(t,e,i,n,a){return g=0,e=e||"j",r(t)?c("c"==e?S:x,t,e,this.i++,i,n,a):(v.splice(this.i++,0,t),1==v.length&&s()),this}function u(){var t=h;return t.loader={load:l,i:0},t}var d,h,f=e.documentElement,p=t.setTimeout,_=e.getElementsByTagName("script")[0],m={}.toString,v=[],g=0,y="MozAppearance"in f.style,b=y&&!!e.createRange().compareNode,w=b?f:_.parentNode,f=t.opera&&"[object Opera]"==m.call(t.opera),f=!!e.attachEvent&&!f,x=y?"object":f?"script":"img",S=f?"script":x,k=Array.isArray||function(t){return"[object Array]"==m.call(t)},T=[],E={},O={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};h=function(t){function e(t){var e,i,n,t=t.split("!"),r=T.length,a=t.pop(),o=t.length,a={url:a,origUrl:a,prefixes:t};for(i=0;o>i;i++)n=t[i].split("="),(e=O[n.shift()])&&(a=e(a,n));for(i=0;r>i;i++)a=T[i](a);return a}function o(t,r,a,o,s){var c=e(t),l=c.autoCallback;c.url.split(".").pop().split("?").shift(),c.bypass||(r&&(r=n(r)?r:r[t]||r[o]||r[t.split("/").pop().split("?")[0]]),c.instead?c.instead(t,r,a,o,s):(E[c.url]?c.noexec=!0:E[c.url]=1,a.load(c.url,c.forceCSS||!c.forceJS&&"css"==c.url.split(".").pop().split("?").shift()?"c":i,c.noexec,c.attrs,c.timeout),(n(r)||n(l))&&a.load(function(){u(),r&&r(c.origUrl,s,o),l&&l(c.origUrl,s,o),E[c.url]=2})))}function s(t,e){function i(t,i){if(t){if(r(t))i||(d=function(){var t=[].slice.call(arguments);h.apply(this,t),f()}),o(t,d,e,0,l);else if(Object(t)===t)for(c in s=function(){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i}(),t)t.hasOwnProperty(c)&&(!i&&!--s&&(n(d)?d=function(){var t=[].slice.call(arguments);h.apply(this,t),f()}:d[c]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),f()}}(h[c])),o(t[c],d,e,c,l))}else!i&&f()}var s,c,l=!!t.test,u=t.load||t.both,d=t.callback||a,h=d,f=t.complete||a;i(l?t.yep:t.nope,!!u),u&&i(u)}var c,l,d=this.yepnope.loader;if(r(t))o(t,0,d,0);else if(k(t))for(c=0;c<t.length;c++)l=t[c],r(l)?o(l,0,d,0):k(l)?h(l):Object(l)===l&&s(l,d);else Object(t)===t&&s(t,d)},h.addPrefix=function(t,e){O[t]=e},h.addFilter=function(t){T.push(t)},h.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",d=function(){e.removeEventListener("DOMContentLoaded",d,0),e.readyState="complete"},0)),t.yepnope=u(),t.yepnope.executeStack=s,t.yepnope.injectJs=function(t,i,n,r,c,l){var u,d,f=e.createElement("script"),r=r||h.errorTimeout;f.src=t;for(d in n)f.setAttribute(d,n[d]);i=l?s:i||a,f.onreadystatechange=f.onload=function(){!u&&o(f.readyState)&&(u=1,i(),f.onload=f.onreadystatechange=null)},p(function(){u||(u=1,i(1))},r),c?f.onload():_.parentNode.insertBefore(f,_)},t.yepnope.injectCss=function(t,i,n,r,o,c){var l,r=e.createElement("link"),i=c?s:i||a;r.href=t,r.rel="stylesheet",r.type="text/css";for(l in n)r.setAttribute(l,n[l]);o||(document.body.appendChild(r),p(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};var app={effects:{},sizes:{},utils:{},plugins:{},device:{},stores:{}},$root=null,$html=$("html"),$body=$("body"),$document=$(document),$window=$(window),$sections=null,$io=null,$sid=null,$apiUri="http://192.168.1.68:8080/api/",clickEvent=document&&"ontouchstart"in document.documentElement?"tap":"click",$$=window.Zepto||window.jQuery;tempus.lang("ru");var prefixed={transform:Modernizr.prefixed("transform"),"transform-origin":Modernizr.prefixed("transformOrigin")};$.fn.api=function(t){return this.data(t)?this.data(t):this.data(t,{}).data(t)},function(t){var e=function(){t.width=$window.width(),t.height=parseInt(window.innerHeight,10)};$window.on("resize.app",e),e()}(app.sizes),function(t){t.support=Modernizr,t.isMobile=t.support.touch,$html.addClass(t.isMobile?"d-mobile":"d-no-mobile"),t.isRetina=window.devicePixelRatio&&window.devicePixelRatio>1,$html.addClass(t.isRetina?"d-retina":"d-no-retina");var e=function(){t.isPhone=app.sizes.width<768,$html.addClass(t.isPhone?"d-phone":"d-no-phone"),$html.removeClass(t.isPhone?"d-no-phone":"d-phone")};$window.on("resize.phone-check",e),e(),navigator.userAgent.match(/(iPhone)/i)&&(t.isPhone=!0),navigator.userAgent.match(/iPad/i)&&($html.addClass("d-ipad"),t.isIPad=!0),navigator.userAgent.match(/(iPhone|iPod touch)/i)&&($html.addClass("d-iphone"),t.isIPhone=!0),navigator.userAgent.match(/(iPad|iPhone|iPod touch)/i)&&($html.addClass("d-ios"),t.isIOS=!0),navigator.userAgent.match(/.*CPU.*OS 7_\d/i)&&($html.addClass("d-ios7"),t.isIOS7=!0),$html.hasClass("d-ipad d-ios7")&&$window.on("resize orientationchange focusout",function(){window.scrollTo(0,0)}),t.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,$html.addClass(t.isFirefox?"d-firefox":"d-no-firefox")}(app.device),function(t){t.light={},t.light.show=function(t,e,i,n){t[0].style.opacity=1,t[0].style[prefixed.transform]="translateY("+Math.round(i-e*i)+"px) translateZ(0)",0==e&&(t[0].style[prefixed.transform]="translateY(110%)")},t.light.hide=function(t,e,i,n){t[0].style.opacity=(1-.4*e).toFixed(3),t[0].style[prefixed.transform]="translateY("+Math.round(-(n-1)*i-e*i*.5)+"px) translateZ(0)",1==e&&(t[0].style[prefixed.transform]="translateY(-110%)"),0==e&&(t[0].style[prefixed.transform]="translateY("+Math.round(-(n-1)*i)+"px) translateZ(0)")},t.light.move=function(t,e,i){t[0].style.opacity=1,t[0].style[prefixed.transform]="translateY("+Math.round(-e*i)+"px) translateZ(0)"},t.space={},t.space.show=function(t,e){t[0].style.opacity=.33+.67*e;var i="";0==e?i="translate3d(110%, 0, 0)":app.device.isPhone?i="perspective(500px) translate3d("+(-8+8*e)+"%, 0, 0) rotateY("+(-6+6*e)+"deg) scale("+(.8+.2*e)+")":(i="perspective(500px) translate3d("+(-4+4*e)+"%, 0, 0) scale("+(.9+.1*e)+")",app.device.isFirefox||(i=i+"rotateY("+(-4+4*e)+"deg)")),t[0].style[prefixed.transform]=i},t.space.hide=function(t,e){t[0].style.opacity=1,t[0].style[prefixed.transform]="translate3d("+-100*e+"%, 0, 0)",1==e&&(t[0].style[prefixed.transform]="translate3d(-110%, 0, 0)")},t.fold={},t.fold.show=function(t,e){t[0].style.opacity=1,t[0].style[prefixed.transform]="translateY("+(100-100*e)+"%)"},t.fold.hide=function(t,e){t[0].style.opacity=1-.67*e,t[0].style[prefixed.transform]="perspective(500px) translateY("+4*e+"%) rotateX("+3*-e+"deg) scale("+(1-.05*e)+")",1==e&&(t[0].style[prefixed.transform]="translateY(-101%)")}}(app.effects),app.plugins.marquee=function(t,e){var i=t.find(e.screens),n=$('<div class="'+e.spaceClass+'" />').prependTo(t),r=[],a=app.effects[e.effect],o=t.data("name"),s={index:0,prevIndex:0,progress:0,size:0,scrolling:!1,enabled:!0,section:null};i.each(function(t){var i=$(this),a=i.api("screen");a.state={isVisible:!1,isEndShow:!1,isStartShow:!1,isFullShow:!1,isFullHide:!0};var o={index:t,block:i,fake:$('<div class="'+e.spaceClass+'__screen" />'),api:a,ratio:1};r.push(o),n.append(o.fake)});var c=function(){var t=0;s.size=e.vertical?app.sizes.height:app.sizes.width,$.each(r,function(i,n){if(e.vertical){var r=Math.max(n.block.outerHeight(),n.block.find(".screen__frame").outerHeight());i>0&&r>s.size?(n.block.addClass("screen_long"),n.size=r):(n.block.removeClass("screen_long"),n.size=app.sizes.height),n.fake.width(app.sizes.width),n.fake.height(n.size)}else n.size=app.sizes.width,n.fake.width(n.size),n.fake.height(app.sizes.height);n.offset=t,n.ratio=n.size/s.size,t+=n.size})};c();var l=new IScroll(t[0],{marquee:!0,disableMouse:!1,mouseWheel:e.mousewheel,scrollX:!e.vertical,scrollY:e.vertical,bounce:!0,snap:"."+e.spaceClass+"__screen",eventPassthrough:e.vertical?"horizontal":!0,probeType:3,snapSpeed:e.duration,preventDefault:!0,scrollbars:e.vertical?"custom":!1,interactiveScrollbars:e.vertical&&!app.device.support.touch,fake:!0});s.setLimits=function(t){t=Math.min(Math.max(0,t),r.length-1);var i=t>=r.length-1,n=0==t;l[e.vertical?"minScrollY":"minScrollX"]=-r[t].offset+(n?0:r[t-1].size),l[e.vertical?"maxScrollY":"maxScrollX"]=-r[t].offset-(i?r[t].size-s.size:r[t].size),l.currentPage={x:0,y:0,pageX:0,pageY:0},l.currentPage[e.vertical?"y":"x"]=-r[t].offset,l.currentPage[e.vertical?"pageY":"pageX"]=t},s.update=function(){for(var t=-Math.round(l[e.vertical?"y":"x"]),i=0,n=0;n<r.length;n++)t>=r[n].offset&&(i=n);s.position=(t-r[i].offset)/r[i].size,s.progress=i+s.position,s.index!=i&&(s.prevIndex=s.index,s.index=i)},s.hideInvisibles=function(){for(var t=0;t<r.length;t++)t!=s.index&&t!=s.index+1&&(t>s.index+1&&a.show(r[t].block,0,s.size,r[t].ratio),t<s.index&&a.hide(r[t].block,1,s.size,r[t].ratio),r[t].block[0].style.display="none")},s.callScreensAPI=function(){var t=s.index>=r.length-1,e=1/r[s.index].ratio,i={top:0,bottom:0};if(i.top=s.position/e,i.bottom=s.position*r[s.index].ratio-(r[s.index].ratio-1),i.bottom>.6?(r[s.index].api.state.isVisible&&(r[s.index].api.state.isVisible=!1,r[s.index].block.triggerHandler("hide")),t||r[s.index+1].api.state.isVisible||(r[s.index+1].api.state.isVisible=!0,r[s.index+1].block.triggerHandler("show"))):i.top>.4&&(r[s.index]&&!r[s.index].api.state.isVisible&&(r[s.index].api.state.isVisible=!0,r[s.index].block.triggerHandler("show")),!t&&r[s.index+1].api.state.isVisible&&(r[s.index+1].api.state.isVisible=!1,r[s.index+1].block.triggerHandler("hide"))),t||(i.bottom>.1&&!r[s.index+1].api.state.isStartShow?(r[s.index+1].api.state.isStartShow=!0,r[s.index+1].block.triggerHandler("startShow")):i.bottom<.1&&r[s.index+1].api.state.isStartShow&&(r[s.index+1].api.state.isStartShow=!1),i.bottom>.9&&!r[s.index+1].api.state.isEndShow?(r[s.index+1].api.state.isEndShow=!0,r[s.index+1].block.triggerHandler("endShow")):i.bottom<.9&&r[s.index+1].api.state.isEndShow&&(r[s.index+1].api.state.isEndShow=!1)),r[s.index]&&i.bottom<.9&&!r[s.index].api.state.isEndShow?(r[s.index].api.state.isEndShow=!0,r[s.index].block.triggerHandler("endShow")):r[s.index]&&i.bottom>.9&&r[s.index].api.state.isEndShow&&(r[s.index].api.state.isEndShow=!1),r[s.index]&&i.bottom<.1&&!r[s.index].api.state.isStartShow?(r[s.index].api.state.isStartShow=!0,r[s.index].block.triggerHandler("startShow")):r[s.index]&&i.bottom>.1&&r[s.index].api.state.isStartShow&&(r[s.index].api.state.isStartShow=!1),r[s.index]&&i.top>=0&&i.bottom<=0){r[s.index].api.state.isFullShow||(r[s.index].api.state.isFullShow=!0,r[s.index].block.triggerHandler("fullShow"));for(var n=0;n<r.length;n++)n!=s.index&&(r[n].api.state.isFullShow=!1)}else for(var n=0;n<r.length;n++)r[n].api.state.isFullShow=!1;for(var a=[Math.floor(s.progress),Math.ceil(s.progress)],n=0;n<r.length;n++)n==a[0]||n==a[1]?(r[n].api.state.isFullHide=!1,r[n].block[0].style.display="block",s.section=r[n].block.attr("data-marquee")):r[n].api.state.isFullHide||(r[n].block[0].style.display="none",r[n].block.triggerHandler("fullHide"),r[n].api.state.isFullHide=!0)},s.markNav=function(){e.navPrev&&e.navPrev[s.progress<=.5?"addClass":"removeClass"]("i-disabled"),e.navNext&&e.navNext[s.progress>=r.length-1.5?"addClass":"removeClass"]("i-disabled")},s.draw=function(){if(!a.move||r[s.index].ratio*s.position>=r[s.index].ratio-1){var t=1-Math.abs(r[s.index].ratio*s.position-r[s.index].ratio);s.index>=0&&a.hide(r[s.index].block,t,s.size,r[s.index].ratio),s.index<r.length-1&&a.show(r[s.index+1].block,t,s.size,r[s.index+1].ratio)}else s.index>=0&&a.move(r[s.index].block,r[s.index].ratio*s.position,s.size,r[s.index].ratio),s.index<r.length-1&&a.show(r[s.index+1].block,0,s.size,r[s.index+1].ratio);s.hideInvisibles(),s.markNav()},s.onScrollStart=function(){s.scrolling=!0},s.onScroll=function(){if(index=0,s.update(),s.draw(),s.callScreensAPI(),l.moved){for(var t=l[e.vertical?"y":"x"]-l[e.vertical?"pointY":"pointX"],i=0;i<r.length;i++)t<=-r[i].offset&&t>=-r[i].offset-r[i].size&&(index=i);s.setLimits(index)}else if(l.indicators&&l.indicators[0].moved){for(var i=0;i<r.length;i++)l[e.vertical?"y":"x"]-s.size/2<=-r[i].offset&&l[e.vertical?"y":"x"]+s.size/2>=-r[i].offset-r[i].size&&(index=i);s.setLimits(index)}},s.grabTimer=!1;var u=function(){clearTimeout(s.grabTimer),s.scrolling||(s.scrolling=!0)},d=function(){s&&clearTimeout(s.grabTimer),s&&s.scrolling&&(s.scrolling=!1)};if(l.on("beforeWheelSnap",function(){index=0;for(var t=0;t<r.length;t++)l[e.vertical?"y":"x"]-s.size/2<=-r[t].offset&&l[e.vertical?"y":"x"]+s.size/2>=-r[t].offset-r[t].size&&(index=t);l.absStartX=e.vertical?0:-r[index].offset,l.absStartY=-e.vertical?-r[index].offset:0,s.setLimits(index)}),s.onScrollEnd=function(){s.refresh()},s.refresh=function(){s.update(),s.draw(),s.callScreensAPI(),s.setLimits(s.index)},s.resize=function(){return s?($body.addClass("page_resize"),c(),l.refresh(),s.refresh(),void $body.removeClass("page_resize")):!1},s.enable=function(){s.enabled=!0,l.enable(),s.enableKeyboard()},s.disable=function(){s.enabled=!1,l.disable(),s.disableKeyboard()},l.on("scrollStart",function(){return s?void s.onScrollStart():!1}),l.on("scroll",function(){return s?(s.onScroll(),void(l.moved&&u())):!1}),l.on("scrollEnd",function(){return s?(s.onScrollEnd(),void d()):!1}),l.on("grab",function(){if(!s)return!1;u(),s.grabTimer=setTimeout(function(){l&&l.reset(),d()},500);for(var t=0,i=l[e.vertical?"y":"x"]-l[e.vertical?"pointY":"pointX"],n=0;n<r.length;n++)i<=-r[n].offset&&i>=-r[n].offset-r[n].size&&(t=n);s.setLimits(t)}),$window.on("resize",s.resize),s.setLimits(0),s.scrollTo=function(t,i){i=void 0===i&&0!==i?450:i,r[t].block[0].style.display="block",setTimeout(function(){l.goToPage(e.vertical?0:t,e.vertical?t:0,i,IScroll.utils.ease.cubicOut),0==i&&s.refresh()},0)},s.prev=function(t){if(s.scrolling)return!1;t=void 0===t?e.duration:t;var i=-l.y-r[s.index].offset;e.vertical&&i?l.scrollBy(0,Math.min(i,s.size),t,IScroll.utils.ease.cubicOut):e.vertical&&l.y<=-s.size?l.scrollBy(0,s.size,t,IScroll.utils.ease.cubicOut):s.index>0&&l.prev(t,IScroll.utils.ease.cubicOut)},s.next=function(t){if(s.scrolling)return!1;t=void 0===t?e.duration:t;var i=r[s.index].offset+r[s.index].size-(-l.y+s.size);i>.1*s.size&&e.vertical?l.scrollBy(0,-Math.min(i,s.size),t,IScroll.utils.ease.cubicOut):s.index<r.length-1&&l.next(t,IScroll.utils.ease.cubicOut)},s.get=function(t){return s[t]},s.destroy=function(){t.find("."+e.spaceClass).remove(),t.removeData("marquee"),l.destroy(),l=null,s=null},e.vertical){var h=t.find(".iScrollVerticalScrollbar");h.addClass("ui-scroll").prepend('<div class="ui-scroll__bar" />'),h.find(".iScrollIndicator").addClass("ui-scroll__handle").prepend('<div class="ui-scroll__handle__inner" />')}e.navPrev&&e.navPrev.on("click",function(){s.prev()}),e.navNext&&e.navNext.on("click",function(){s.next()});var f="keydown.marquee-"+(o?o:"")+(e.vertical?"v":"h");return s.enableKeyboard=function(){app.device.support.touch||$document.on(f,function(t){$(t.target).is("input,textarea,select")||app.content.opened||(t.which==(e.vertical?38:37)&&s.prev(),t.which==(e.vertical?40:39)&&s.next())})},s.disableKeyboard=function(){app.device.support.touch||$document.off(f)},s.scroll=l,t.data("marquee",{screens:r,onScrollStart:$.noop,onScrollEnd:$.noop,scrollTo:s.scrollTo,get:s.get,scroll:l,update:s.onScroll,resize:s.resize,enable:s.enable,disable:s.disable,destroy:s.destroy,enableKeyboard:s.enableKeyboard,disableKeyboard:s.disableKeyboard}),s},function(){app.sections={ready:!1,items:{},state:null,init:function(e){$sections=$body.find("#sections"),$sections.on("dragstart selectstart",function(){return!1});var i=100,n=0;$sections.find(".section__marquee").each(function(){t.items[this.getAttribute("data-marquee")]=n,0===n&&(t.state=this.getAttribute("data-marquee"),this.style.opacity="1"),this.style.zIndex=i,i--,n++}),t.marquee=app.plugins.marquee($sections,{vertical:!1,screens:".section__marquee",effect:"space",mousewheel:!1,spaceClass:"horizontal-space",duration:app.device.isPhone?350:450});var r=t.marquee.scroll;r.on("scrollEnd",function(){t.state=t.marquee.section,"dashboard"===t.state?app.iScrollDashboardList.refresh():"data"===t.state&&app.iScrollDataList.refresh()}),e&&t.nav(e,0)},nav:function(e,i){if(e){var n=t.items[e];void 0!==n&&(t.state=e,t.marquee.scrollTo(n,void 0!==i?i:void 0))}}};var t=app.sections}(),function(t){t.random=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)},t.raf=function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;return e?e(t):window.setTimeout(t,1e3/60)},t.caf=function(t){var e=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;e(t),t=null},t.support={transitions:Modernizr.csstransitions},t.transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},t.transEndEventName=t.transEndEventNames[Modernizr.prefixed("transition")],t.animEndEventNames={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},t.animEndEventName=t.animEndEventNames[Modernizr.prefixed("animation")],t.onEndTransition=function(e,i){var n=function(e){if(t.support.transitions){if(e.target!=this)return;this.removeEventListener(t.transEndEventName,n)}i&&"function"==typeof i&&i.call(this)};t.support.transitions?e.addEventListener(t.transEndEventName,n):n()},t.onEndAnimation=function(e,i){var n=function(e){if(t.support.transitions){if(e.target!=this)return;this.removeEventListener(t.animEndEventName,n)}i&&"function"==typeof i&&i.call(this)};t.support.transitions?e.addEventListener(t.animEndEventName,n):n()},t.getScroll=function(t){var e=-1*t.x,i=-1*t.y,n=-1*t.maxScrollX,r=-1*t.maxScrollY;return{x:e,y:i,maxX:n,maxY:r}}}(app.utils),riot.tag2("alert-window",'<div class="alert__window__wrapper"> <div class="alert__window__header"> <div class="alert__window__title">{data.title}</div> <div if="{data.subtitle}" class="alert__window__subtitle"></div> <input if="{data.input}" type="text" class="alert__window__input" autocomplete="off" spellcheck="off"> </div> <div class="alert__window__buttons"> <div onclickdelegateupdate="{onCancel}" class="alert__window__button {alert__window__button--active : data.button === ⁗cancel⁗}">{data.cancel && data.cancel.title ? data.cancel.title : ⁗Отмена⁗}</div> <div onclickdelegateupdate="{onSuccess}" class="alert__window__button {alert__window__button--active : data.button === ⁗success⁗}">{data.success && data.success.title ? data.success.title : ⁗OK⁗}</div> </div> </div>',"",'class="alert__window {alert__window--active : active}"',function(t){var e=this;$$(e.root);e.active=!1,e.data={title:null,subtitle:null},e.show=function(t){t&&(e.data=t,e.active=!0,e.update())},e.onSuccess=function(){e.data.success&&"function"==typeof e.data.success.callback&&e.data.success.callback(),e.data.button="success",e.active=!1},e.onCancel=function(){e.data.cancel&&"function"==typeof e.data.cancel.callback&&e.data.cancel.callback(),e.data.button="cancel",e.active=!1}}),riot.tag2("chat-list-raw","","","",function(t){this.root.innerHTML=t.content}),riot.tag2("chat-list",'<div class="section section__primary chat__list"> <header> <div class="header__title">iMessenger</div> <div class="header__left"> <div class="chat__list__close header__icon header__icon__back"></div> </div> <div class="header__right"> <div class="chat__list__header__photo header__icon header__icon__avatar"> <div if="{lastClient.avatar}" class="header__icon__avatar__container"> <div riot-style="background-image:url({lastClient.avatar})" class="header__icon__avatar__image"></div> </div> <div if="{lastClient.id}" class="header__icon__avatar__status {lastClient.online ? \'header__icon__avatar__status--online\' : \'header__icon__avatar__status--offline\'}"></div> </div> </div> </header> <div id="chat__list__scroll" class="section__wrapper"> <div class="chat__list__container section__container"> <div onclickdelegate="{openRoom}" each="{user in users}" no-reorder class="chat__list__item"> <div class="chat__list__photo {chat__list__photo--avatar : user.avatar}"> <div if="{user.avatar}" riot-style="background-image:url({user.avatar})" class="chat__list__avatar"></div> </div> <div class="chat__list__status {user.online ? \'chat__list__status--online\' : \'chat__list__status--offline\'}"></div> <div class="chat__list__text"> <div class="chat__list__time">{user.joinTime}</div> <div class="chat__list__counts {chat__list__counts--active : user.newMessages}">{user.newMessages}</div> <div class="chat__list__title">{user.name ? user.name : \'Гость\'}</div> <div class="chat__list__message">{user.lastMessage ? user.lastMessage : \'С вами хотят пообщаться\'}</div> </div> </div> </div> </div> <div if="{!users.length}" class="chat__list__empty"><span class="chat__list__empty__text">Сейчас нет активных чатов</span></div> </div> <div class="section chat__body"> <div each="{user in users}" no-reorder id="chat__room__{user.id}" class="section section__secondary"> <header> <div class="header__title header__title__chat__room">{user.name ? user.name : \'Гость\'}</div> <div class="header__left"> <div class="chat__room__close header__icon header__icon__back"></div> </div> <div class="header__right"> <div class="chat__header__photo header__icon header__icon__avatar"> <div if="{user.avatar}" class="header__icon__avatar__container"> <div riot-style="background-image:url({user.avatar})" class="header__icon__avatar__image"></div> </div> <div if="{user.id}" class="header__icon__avatar__status {user.online ? \'header__icon__avatar__status--online\' : \'header__icon__avatar__status--offline\'}"></div> </div> </div> </header> <div id="chat__room__scroll__{user.id}" class="section__wrapper"> <div class="section__container chat__room__container"> <div each="{message in user.messages}" no-reorder class="chat__message {message.me ? \'chat__message__left\' : \'chat__message__right\'}"> <div class="{message.me ? \'chat__message__que\' : \'chat__message__answer\'} {chat__message__system : message.type !== \'chat\'} {chat__message__system--active : message.type == \'auth\' && user.auth || message.type == \'phone\' && user.phone || message.type == \'email\' && user.email} {chat__message__new : message.new} chat__message__inner"> <chat-list-raw content="{message.text}">{message.text}</chat-list-raw> <div if="{message.type === \'auth\' && !user.auth}" class="chat__message__icon--auth"></div> <div if="{message.type === \'auth\' && user.auth}" class="chat__message__icon--checked"></div> <div if="{message.type === \'phone\'}" class="chat__message__icon--phone"></div> <div if="{message.type === \'email\'}" class="chat__message__icon--email"></div> </div> </div> </div> </div> <div class="chat__panel"> <div class="chat__panel__info"> <div class="chat__panel__info__typing {chat__panel__info__typing--active : client_id && client_id == typed_id}">Вам печатают сообщение...</div> </div> <div class="chat__panel__effect {chat__panel__effect--active : client_id && client_id == typed_id}"> <div class="chat__panel__effect__bar"></div> <div class="chat__panel__effect__dots {chat__panel__effect__dots--active : client_id && client_id == typed_id}"> <div class="chat__panel__effect__dot chat__panel__effect__dot1"></div> <div class="chat__panel__effect__dot chat__panel__effect__dot2"></div> <div class="chat__panel__effect__dot chat__panel__effect__dot3"></div> </div> </div> <form class="chat__panel__form"> <div class="chat__panel__menu"> <i class="chat__panel__menu__circle"></i> <select onchange="{changeOptions}" name="chat__select__options" class="chat__select__options"> <option value="1">Предложить представиться</option> <option value="2">Предложить оставить телефон</option> <option value="3">Предложить оставить email</option> <option value="4">Прикрепить картинку</option> </select> </div> <input onclickdelegate="{focusInput}" type="text" name="chat__panel__input" class="chat__panel__input" placeholder="Набрать сообщение..." autocomplete="off"> <div onclickdelegate="{sendMessage}" class="chat__panel__button"></div> </form> </div> </div> </div> <div each="{user in users}" no-reorder id="chat__metrika__{user.id}" class="section section__right section__right__not__fully section__header__without"> <div class="chat__metrika__close"></div> <div id="chat__metrika__wrapper__{user.id}" class="section__wrapper section__wrapper__metrika"> <div class="section__container"> <div class="chat__metrika__header"> <div class="chat__metrika__time">{user.joinTime}</div> <div class="chat__metrika__photo {user.online ? \'chat__metrika__photo--online\' : \'chat__metrika__photo--offline\'}"> <div if="{user.avatar}" class="chat__metrika__avatar" riot-style="background-image:url({user.avatar})"></div> </div> <div if="{user.profile.bdate}" class="chat__metrika__bdate">{user.profile.bdate}</div> <div class="chat__metrika__title">{user.name ? user.name : \'Гость\'}</div> </div> <div class="chat__metrika__content"> <div if="{user.phone}" class="chat__metrika__tile"> <div class="chat__metrika__tile__title">Телефон: <span class="chat__metrika__text__blue">{user.phone}</span></div> </div> <div class="chat__metrika__tile"> <div class="chat__metrika__tile__subtitle">По данным счетчика</div> <div class="chat__metrika__tile__text">{user.metrika.visit}-й раз на сайте, {user.metrika.city}</div> </div> <div if="{user.metrika.start}" class="chat__metrika__tile"> <div class="chat__metrika__tile__subtitle">Страница входа</div> <div class="chat__metrika__tile__text"><a class="chat__metrika__link" href="{user.metrika.start}" target="_blank">{user.metrika.start}</a></div> </div> <div class="chat__metrika__tile"> <div class="chat__metrika__tile__subtitle">На сайт перешли {user.metrika.adv ? \'по рекламе\' : \'с\'}</div> <div class="chat__metrika__tile__text"> {⁗Яндекс.Директ⁗ : user.metrika.adv && user.metrika.referer === ⁗yandex⁗} {⁗Яндекс.Поиск⁗ : !user.metrika.adv && user.metrika.referer === ⁗yandex⁗} {⁗Google.Adwords⁗ : user.metrika.adv && user.metrika.referer === ⁗google⁗} {⁗Google.Поиск⁗ : !user.metrika.adv && user.metrika.referer === ⁗google⁗} {⁗Rambler.Поиск⁗ : user.metrika.referer === ⁗rambler⁗} {⁗Yahoo.Поиск⁗ : user.metrika.referer === ⁗yahoo⁗} {⁗Bing.Поиск⁗ : user.metrika.referer === ⁗bing⁗} {⁗Mail.ru.Поиск⁗ : user.metrika.referer === ⁗mail⁗} <virtual if="{user.metrika.referer && user.metrika.referer.match(/http/)}"> {user.metrika.referer} </virtual> <virtual if="{user.metrika.keyword}">, {user.metrika.keyword}</virtual> </div> </div> <div if="{user.metrika.pages}" class="chat__metrika__tile"> <div class="chat__metrika__tile__title">Посещено: {user.metrika.pages} страниц(ы)</div> <div class="chat__metrika__pages__container"> <div each="{link in user.metrika.pagesData}" no-reorder class="chat__metrika__tile"> <a class="chat__metrika__link" target="_blank" href="{link}">{link}</a> </div> </div> </div> </div> </div> </div> </div> <svg style="position:absolute" xmlns="http://www.w3.org/2000/svg" version="1.1"> <defs> <filter id="goo"> <fegaussianblur in="SourceGraphic" stddeviation="10" result="blur"></fegaussianblur> <fecolormatrix in="blur" mode="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 19 -9" result="goo"></fecolormatrix> <fecomposite in="SourceGraphic" in2="goo"></fecomposite> </filter> </defs> </svg>',"",'data-marquee="chat" class="section section__marquee"',function(t){var e=this,i=$$(e.root);e.sid=777,e.users=[],e.activity=!1,e.ready=!1,e.socket_id=null,e.user_id=sessionStorage.chat_uid||(new Date).getTime()+Math.round(1e4*Math.random()),e.lastClient=sessionStorage.chat_client&&JSON.parse(sessionStorage.chat_client)||{},e.client_id=null,e.timeOutTyped=null,e.typed_id=null,e.iScrollList=null,e.iScrollRoom={},e.iScrollMetrika={},e.socket=io.connect("http://5.101.124.21:8008",{reconnection:!1}),e.reconnectInterval=null,sessionStorage.chat_uid||(sessionStorage.chat_uid=e.user_id),this.on("mount",function(){setTimeout(function(){e.socket.connected||(e.reconnect(),console.log("Chat: невозможно подключиться к серверу!"))},1e3),e.socket.on("connect",function(){console.log("Chat: соединение установленно!"),clearInterval(e.reconnectInterval),e.reconnectInterval=null,e.ready=!0,e.socket_id=this.id,e.socket.emit("join",{id:e.user_id,sid:e.sid,admin:!0})});var t=$$(i.children()[0]),n=$$(i.children()[1]);i.find(".chat__list__close").on(clickEvent,function(){app.sections.nav("data-list"),app.iScrollDataList.refresh()}),e.openRoom=function(i){var n=$$(i.currentTarget),r=this._item.user.id,a=$$(e["chat__room__"+r]);try{n.addClass("chat__list__item--active").siblings().removeClass("chat__list__item--active")}catch(i){}a.addClass("section--show"),t.addClass("section--hidden"),e.client_id=r,e.scrollDown(),app.utils.onEndAnimation(e["chat__room__"+r],function(){e.activity=!0,a.addClass("section--active").removeClass("section--show"),e.users.forEach(function(t,i){(e.lastClient&&e.lastClient.id!==r||!e.lastClient&&t.id==r)&&(e.lastClient={id:t.id,avatar:t.avatar,online:t.online},sessionStorage.chat_client=JSON.stringify(e.lastClient),e.update())}),e.viewedList()})},n.on(clickEvent,".chat__room__close",function(){var i=$$(e["chat__room__"+e.client_id]);
i.addClass("section--hidden"),t.removeClass("section--hidden"),app.utils.onEndAnimation(e["chat__room__"+e.client_id],function(){e.client_id=null,e.activity=!1,i.removeClass("section--active").removeClass("section--hidden"),e.update()})}),i.find(".chat__list__header__photo").on(clickEvent,function(){if(e.lastClient&&e.lastClient.id){var t=$$(e["chat__metrika__"+e.lastClient.id]);t.addClass("section--show")}}),n.on(clickEvent,".chat__header__photo",function(){if(e.client_id){var t=$$(e["chat__metrika__"+e.client_id]);t.addClass("section--show")}}),i.on(clickEvent,".chat__metrika__close",function(){if(e.lastClient&&e.lastClient.id){var t=$$(e["chat__metrika__"+e.lastClient.id]);t.removeClass("section--show")}})}),e.socket.on("update_"+e.sid,function(t){if(e.ready){if(e.users=t,e.typed_id=null,e.activity&&e.users.forEach(function(t,i){if(t.id==e.client_id){var n=t.messages.length-1;e.users[i].messages[n]["new"]=!0}}),e.update(),e.client_id)e.users.length?(e.iScrollRoom[e.client_id].refresh(),e.iScrollRoom[e.client_id].scrollTo(0,e.iScrollRoom[e.client_id].maxScrollY,400,IScroll.utils.ease.cubicOut)):(e.client_id=null,e.lastClient=null,sessionStorage.chat_client=null,e.update());else if(!e.client_id)if(e.users.length&&e.lastClient){var i=!1;e.users.forEach(function(t,n){e.lastClient.id===t.id&&(i=!0)}),i||(e.lastClient=null,sessionStorage.chat_client=null,e.update())}else e.lastClient=null,sessionStorage.chat_client=null,e.update();e.scrollContent(e.users),clearTimeout(e.timeOutTyped),e.activity&&app.utils.onEndAnimation(e["chat__room__"+e.client_id].querySelector(".chat__message__new"),function(){setTimeout(function(){e.users.forEach(function(t,i){if(t.id==e.client_id){var n=t.messages.length-1;e.users[i].messages[n]["new"]=!1}}),e.update()},300)})}}),e.socket.on("notify_"+e.sid,function(t){e.activity&&e.client_id===t&&e.viewedList()}),e.socket.on("update_offer"+e.sid,function(t){e.tags["chat-list-raw"].forEach(function(e,i){if(e.message.type===t||"auth"===e.message.type&&("name"===t||"profile"===t)){var n=e.message.text;e.root.innerHTML=n}})}),e.socket.on("typed_"+e.sid,function(t){e.ready&&e.client_id===t&&(clearTimeout(e.timeOutTyped),e.typed_id=t,e.update(),e.timeOutTyped=setTimeout(function(){e.typed_id=null,e.update()},5e3))}),e.socket.on("disconnect",function(){e.reconnect(),console.log("Chat: соединение потеряно!"),e.users=[],e.update()}),e.reconnect=function(){e.reconnectInterval||(e.reconnectInterval=setInterval(function(){e.socket.connect()},500),console.log("Chat: запуск реконнекта!"))},e.scrollContent=function(t){e.iScrollList||(e.iScrollList=new IScroll(e.chat__list__scroll,{scrollX:!1,scrollY:!0,mouseWheel:!0})),t.forEach(function(t,i){e.iScrollRoom[t.id]||(e.iScrollRoom[t.id]=new IScroll(e["chat__room__scroll__"+t.id],{scrollX:!1,scrollY:!0,mouseWheel:!0}),e.iScrollRoom[t.id].scrollTo(0,e.iScrollRoom[t.id].maxScrollY),e.iScrollMetrika[t.id]=new IScroll(e["chat__metrika__wrapper__"+t.id],{scrollX:!1,scrollY:!0,mouseWheel:!0}),function n(){app.utils.raf(n),app.utils.getScroll(e.iScrollRoom[t.id])}(),function r(){app.utils.raf(r),app.utils.getScroll(e.iScrollMetrika[t.id])}(),e["chat__room__scroll__"+t.id].addEventListener("touchstart",function(i){e["chat__room__"+t.id].querySelector(".chat__panel__input").blur()}))})},e.scrollDown=function(t){e.client_id&&e.iScrollRoom[e.client_id]&&(e.iScrollRoom[e.client_id].refresh(),e.iScrollRoom[e.client_id].scrollTo(0,e.iScrollRoom[e.client_id].maxScrollY))},e.focusInput=function(){setTimeout(function(){e.socket.emit("typed",e.client_id)},app.device.isMobile?400:0)},e.sendMessage=function(t){t.preventDefault(),t.stopPropagation();var i=this.chat__panel__input.value;i.length&&(this.chat__panel__input.value="",this.chat__panel__input.blur(),setTimeout(function(){e.socket.emit("send",{id:e.client_id,message:i})},app.device.isMobile?400:0))},e.changeOptions=function(t){var i=t.target.value;"1"===i?e.socket.emit("send",{id:e.client_id,type:"auth",message:"Предложение представиться"}):"2"===i?e.socket.emit("send",{id:e.client_id,type:"phone",message:"Предложение оставить телефон"}):"3"===i&&e.socket.emit("send",{id:e.client_id,type:"email",message:"Предложение оставить email"})},e.viewedList=function(){var t=!1;e.users.forEach(function(i,n){i.id===e.client_id&&e.users[n].newMessages>0&&(e.users[n].newMessages=0,e.users[n].messages.forEach(function(t,e){t.viewed=!0}),e.socket.emit("viewed",n),t=!0)}),t&&e.update()}}),riot.tag2("login-section",'<div class="login__section__logo"></div> <div class="login__section__form"> <div class="login__section__item login__section__item--login"> <div class="login__section__item__title">логин</div> <div class="login__section__item__circle login__section__item__circle--login"></div> <input class="login__section__input" name="login" type="text" placeholder="логин" spellcheck="false" autocomplete="off"> </div> <div class="login__section__item login__section__item--pass"> <div class="login__section__item__circle login__section__item__circle--pass"></div> <div class="login__section__item__title">пароль</div> <input class="login__section__input" name="password" type="text" placeholder="пароль" spellcheck="false" autocomplete="off"> </div> </div> <div class="login__section__footer"> <div class="login__section__button">Войти</div> </div>',"",'class="login__section"',function(t){var e=this,i=$$(e.root);this.on("mount",function(){i.find(".login__section__item__circle").on("click",function(){i.addClass("login__section--input"),i.find(".login__section__input[name=login]").focus()}),i.find(".login__section__input").on("focus blur",function(t){"focus"===t.type?i.addClass("login__section--focus"):"blur"===t.type&&i.removeClass("login__section--focus")}),i.find(".login__section__button").on("click",function(t){i.addClass("login__section--loading"),setTimeout(function(){i.addClass("login__section--enter")},1500)})})}),riot.tag2("popup-select",'<div class="popup__select__wrapper"> <div if="{type === ⁗status⁗}" class="popup__select__container"> <div onclickdelegateupdateall="{onSelect}" each="{items}" no-reorder class="popup__select__item {popup__select__item--active : _id == value}"> <div class="popup__select__status__color popup__select__status__{color}"> <span class="popup__select__item__title">{title}</span> </div> </div> </div> <div if="{type === ⁗status⁗ && icon.type}" class="popup__select__status__icon"> <div if="{icon.type !== ⁗profile⁗}" class="popup__select__status__icon__item popup__select__status__icon__item--{icon.type}"></div> <div if="{icon.type === ⁗profile⁗}" class="popup__select__status__icon__item" riot-style="background-image:url({icon.image})"></div> </div> <div if="{!type}" class="popup__select__container"> <div onclickdelegateupdateall="{onSelect}" each="{items}" no-reorder class="popup__select__item"> <span class="popup__select__item__title">{title}</span> </div> </div> </div>',"",'class="popup__select {popup__select--active : active}"',function(t){var e=this,i=$$(e.root);e.active=!1,e.items={},e.show=function(t){t&&(e.type=t.type,e.icon=t.icon,e.items=t.data,e.value=t.value,e.callback=t.callback,e.active=!0,e.update())},e.onSelect=function(){var t=this._id;e.value=t,e.active=!1,e.callback&&e.callback(t)},this.on("mount",function(){i.on(clickEvent,function(t){t.target.getAttribute("class")&&t.target.getAttribute("class").match(/popup__select--active/)&&(e.active=!1,e.update())})})}),riot.tag2("root-section",'<section id="sections"> <dashboard-section></dashboard-section> <data-section></data-section> </section> <popup-select></popup-select> <alert-window></alert-window> <alarm-section></alarm-section>',"",'id="root"',function(t){$root=this,this.on("mount",function(){app.sections.init("dashboard")})}),riot.tag2("alarm-list",'<div class="section__container"> <header class="header__black"> <div class="header__title">iCalendar</div> <div class="header__left"> <div class="alarm__list__close header__icon header__icon__back"></div> </div> <div class="header__right"> <div class="alarm__list__icon__add header__icon"></div> </div> </header> <div each="{item in data}" no-reorder class="alarm__list__item alarm__list__item{utils.getBetweenDay(item.date)} {alarm__list__item--off : !item.active}"> <div onclickdelegateupdate="{switchAlarm}" class="alarm__list__item__switch"></div> <div onclickdelegate="{openAlarm}" riot-item=".alarm__settings" riot-addclass="section--show" class="alarm__list__time"><span class="alarm__list__hour">{utils.getHours(item.time)}</span>:{utils.getMinutes(item.time)}</div> <div onclickdelegate="{openPhone}" riot-item=".alarm__settings" riot-addclass="section--show" class="alarm__list__text"> <div if="{item.phone}" class="alarm__list__phone">{item.phone}</div> <div class="alarm__list__when"><strong class="alarm__list__strong">{utils.getDate(item.date)}</strong><virtual if="{item.name}">, {item.name}</virtual></div> </div> <div class="alarm__list__days"> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Пн⁗}">Пн</div> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Вт⁗}">Вт</div> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Ср⁗}">Ср</div> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Чт⁗}">Чт</div> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Пт⁗}">Пт</div> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Сб⁗}">Сб</div> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Вс⁗}">Вс</div> </div> <div onclickdelegate="{removeAlarm}" class="alarm__list__item__remove"></div> </div> </div> <div if="{!data.length}" class="section__wrapper__alarm__empty"> <div class="section__wrapper__alarm__empty__text">Сейчас нет активных напоминаний</div> </div>',"",'id="alarm__list__scroll" class="section__wrapper section__wrapper__alarm"',function(t){var e=this,i=$$(e.root),n=$$(e.parent.root);e.data=[{id:"1",date:"2016-04-04",time:"720",phone:"89160172086",name:"Ирина",active:!0},{id:"2",date:"2016-04-04",time:"750",phone:"89160172086",name:"Ирина",active:!0},{id:"3",date:"2016-04-05",time:"960",phone:"89855216480",name:"Ирина",active:!0},{id:"4",date:"2016-04-06",time:"1020",phone:"9264571727",name:"Ирина",active:!0},{id:"5",date:"2016-04-07",time:"1080",phone:"9264571727",name:"Ирина",active:!0},{id:"6",date:"2016-04-08",time:"1080",phone:"9264571727",name:"Ирина",active:!0},{id:"7",date:"2016-04-09",time:"1080",phone:"9264571727",name:"Ирина",active:!0}],e.data.forEach(function(t,i){e.data[i].date=tempus().calc({day:i}).format("%Y-%m-%d")}),e.utils={getBetweenDay:function(t){var e=tempus(t).between(tempus(),"day");return e=1>e&&e>-7?Math.abs(e)+1:-6>e?7:0},getDate:function(t){var e=tempus(t).between(tempus(),"day");return 0===e?"сегодня":-1===e?"завтра":tempus(t).format("%d, %b")},getHours:function(t){return Math.floor(t/60)},getMinutes:function(t){var e=t-60*Math.floor(t/60);return 10>e?"0"+e:e},dayOfWeek:function(t){return tempus(t).dayOfWeek("short")}},e.switchAlarm=function(){this.item.active?this.item.active=!1:this.item.active=!0},e.openAlarm=function(){e.settings.alarmShow({alarm:this.item,section:"time"})},e.openPhone=function(){e.settings.alarmShow({alarm:this.item,section:"phone"})},e.removeAlarm=function(t){var i=this,n=this.item.id,r=$$(t.target.parentNode);r.addClass("alarm__list__item--remove"),app.utils.onEndAnimation(r[0],function(){r[0].style[prefixed.transform]="",r[0].show=!1,e.data.forEach(function(t,i){t.id===n&&e.data.splice(i,1)}),i.update(),e.iScrollAlarmList.refresh()})},this.on("mount",function(){e.settings=e.parent.tags["alarm-settings"],i.find(".header__icon__back").on(clickEvent,function(){n.removeClass("section--show")}),e.iScrollAlarmList=new IScroll(i[0],{scrollX:!0,scrollY:!0}),function r(){app.utils.raf(r),app.utils.getScroll(e.iScrollAlarmList)}();var t=function(t,e){this.el=$$(t),this.items=e,this.touchStart(),this.touchMove(),this.touchEnd()};t.prototype={isAnimating:!1,startTime:null,firstTouch:{x:null,y:null},touchDelta:{x:null,y:null},touchStart:function(){var t=this;this.el.on(app.device.isMobile?"touchstart":"mousedown",this.items,function(e){e.preventDefault(),t.isAnimating=!1,t.item=e.currentTarget,t.startTime=t.getTime(),app.device.isMobile?t.firstTouch={x:parseInt(e.changedTouches[0].clientX),y:parseInt(e.changedTouches[0].clientY)}:t.firstTouch={x:parseInt(e.clientX),y:parseInt(e.clientY)}})},touchMove:function(){var t=this;this.el.on(app.device.isMobile?"touchmove":"mousemove",this.items,function(e){e.preventDefault();var i=function(){app.device.isMobile?t.touchDelta={x:parseInt(e.changedTouches[0].clientX)-t.firstTouch.x,y:Math.abs(parseInt(e.changedTouches[0].clientY)-t.firstTouch.y)}:t.touchDelta={x:parseInt(e.clientX)-t.firstTouch.x,y:Math.abs(parseInt(e.clientY)-t.firstTouch.y)},t.touchDelta.x<0?t.direction="left":t.direction="right";var i=t.getTime()-t.startTime,n=t.item&&t.item.show;100>i&&!t.isAnimating&&!n||t.touchDelta.y>12||!n&&(t.touchDelta.x>0||t.touchDelta.x>=-10)||n&&t.touchDelta.x<0||(t.isAnimating=!0,n?t.item.style[prefixed.transform]="translate3d("+(t.touchDelta.x-150)+"px, 0, 0)":t.item.style[prefixed.transform]="translate3d("+.4*t.touchDelta.x+"px, 0, 0)")};app.utils.raf(i),i()})},touchEnd:function(){var t=this;this.el.on(app.device.isMobile?"touchend":"mouseup",this.items,function(e){e.preventDefault(),t.item.show||"left"!==t.direction?t.item.show&&"right"===t.direction&&(Math.abs(t.touchDelta.x)>50?t.slide(!1):t.slide(!0)):Math.abs(t.touchDelta.x)>75?t.slide(!0):t.slide(!1),t.isAnimating=!1})},slide:function(t){var e=this;this.$item=$$(this.item),this.$item.addClass("alarm__list__item--animate"),t?(this.item.style[prefixed.transform]="translate3d(-150px, 0, 0)",this.item.show=!0):(this.item.style[prefixed.transform]="",this.item.show=!1),app.utils.onEndTransition(this.item,function(){e.$item.removeClass("alarm__list__item--animate")})},getTime:function(){return(new Date).getTime()}},new t(i[0],".alarm__list__item")})}),riot.tag2("alarm-section","<alarm-list></alarm-list> <alarm-settings></alarm-settings>","",'class="section section__right alarm-section section__header__nofixed"',function(t){}),riot.tag2("alarm-settings",'<div class="section__down__wrapper alarm__settings__wrapper {alarm__settings--off : !alarm.active} {alarm__settings--dateSelect : section === ⁗date⁗} {alarm__settings--phone : section === ⁗phone⁗}"> <div onclickdelegateupdate="{switcher}" class="alarm__settings__switch">ON</div> <div onclickdelegateupdate="{sectionDate}" class="alarm__settings__date__select"> <div class="alarm__settings__date__text"><span class="alarm__settings__day">{utils.dayAlarm(alarm.date)}</span> {utils.monthAlarm(alarm.date)}</div> <div class="alarm__settings__weekday">{utils.dayOfWeek(alarm.date)}</div> </div> <div class="alarm__settings__date"> <div class="alarm__settings__date__container"> <div id="alarm__settings__iscroll__days" class="alarm__settings__iscroll__wrapper"> <div class="alarm__settings__iscroll__container"> <div each="{item in days}" no-reorder data-value="{item.value}" class="alarm__settings__date__item {alarm__settings__item--active : item.active}">{item.title}</div> </div> </div> </div> <div class="alarm__settings__date__container"> <div id="alarm__settings__iscroll__months" class="alarm__settings__iscroll__wrapper"> <div class="alarm__settings__iscroll__container"> <div each="{item in months}" no-reorder data-value="{item.value}" class="alarm__settings__date__item {alarm__settings__item--active : item.active}">{item.title}</div> </div> </div> </div> <div onclickdelegate="{setDateNow}" class="alarm__settings__date__now"> <span class="alarm__settings__date__now__title">Сегодня:</span>&nbsp; {dateNow} </div> </div> <div class="alarm__settings__time"> <div class="alarm__settings__time__container"> <div id="alarm__settings__iscroll__hours" class="alarm__settings__iscroll__wrapper"> <div class="alarm__settings__iscroll__container"> <div each="{item in hours}" no-reorder data-value="{item.value}" class="alarm__settings__time__item {alarm__settings__item--active : item.active}">{item.title}</div> </div> </div> </div> <div class="alarm__settings__time__dots">:</div> <div class="alarm__settings__time__container"> <div id="alarm__settings__iscroll__minutes" class="alarm__settings__iscroll__wrapper"> <div class="alarm__settings__iscroll__container"> <div each="{item in minutes}" no-reorder data-value="{item.value}" class="alarm__settings__time__item {alarm__settings__item--active : item.active}">{item.title}</div> </div> </div> </div> </div> <div class="alarm__settings__phone"> <div class="alarm__settings__phone__text">{alarm.phone}</div> <div if="{alarm.name}" class="alarm__settings__phone__name">{alarm.name}</div> <div class="alarm__settings__phone__button"> <div class="alarm__settings__phone__button__text">позвонить</div> </div> </div> <div class="alarm__settings__buttons__left"> <div onclickdelegateupdate="{sectionTime}" class="alarm__settings__buttons__left__btn alarm__settings__button__options {alarm__settings__buttons__left__btn--active : section === ⁗time⁗ || section === ⁗date⁗}"></div> <div onclickdelegateupdate="{sectionPhone}" class="alarm__settings__buttons__left__btn alarm__settings__button__phone {alarm__settings__buttons__left__btn--active : section === ⁗phone⁗}"></div> </div> <div class="alarm__settings__buttons"> <div onclickdelegate="{success}" riot-item=".alarm__settings" riot-removeclass="section--show" class="alarm__settings__button alarm__settings__button__success"></div> <div onclickdelegate="{cancel}" riot-item=".alarm__settings" riot-removeclass="section--show" class="alarm__settings__button alarm__settings__button__cancel"></div> </div> </div>',"",'class="section section__down alarm__settings"',function(t){var e=this,i=$$(e.root),n=e.parent.tags["alarm-list"];e.activity=!1,e.section="time",e.alarm={id:null,show:!1,date:"2016-04-03",time:"720",active:!0},e.utils={dateNow:function(){return tempus()},getHours:function(t){for(var e=[],i=9;20>i;i++){var n=i;10>n&&(n="0"+n),e.push({title:n,value:i,active:t===i})}return e},getMinutes:function(t){for(var e=[],i=0;12>i;i++){var n=5*i;10>n&&(n="0"+(0===n?0:n)),e.push({title:n,value:5*i,active:t===i})}return e},getDays:function(t,e){for(var i=[],n=1;e+1>n;n++){var r=n;10>r&&(r="0"+r),i.push({title:r,value:n,active:t===n})}return i},getMonths:function(t){for(var e=[],i=1;13>i;i++)e.push({title:tempus({month:i}).format("%B"),value:i,active:t===i});return e},dayOfWeek:function(t){return tempus(t).dayOfWeek("short")},dayAlarm:function(t){return tempus(t).format("%d")},monthAlarm:function(t){return tempus(t).format("%B")}};var r=e.utils.dateNow();e.dayCount=r.dayCount(),e.hours=e.utils.getHours(),e.minutes=e.utils.getMinutes(),e.days=e.utils.getDays(r.format("%d"),31),e.months=e.utils.getMonths(r.format("%m")),e.switcher=function(){e.alarm.active?e.alarm.active=!1:e.alarm.active=!0},e.sectionTime=function(){e.section="time"},e.sectionDate=function(){"date"===e.section?e.section="time":e.section="date"},e.sectionPhone=function(){e.section="phone"},e.setDateNow=function(){var t=tempus();e.alarm.date=t.format("%Y-%m-%d");var i=t.format("%d"),n=t.format("%m"),r=t.dayCount();e.dayCount!=r&&(e.days=e.utils.getDays(i,r),e.daysScroll.refresh()),e.activity=!1,e.daysScroll.scrollTo(i),e.monthsScroll.scrollTo(n),this.update(),setTimeout(function(){e.activity=!0},500)},e.alarmShow=function(t){e.alarm=JSON.stringify(t.alarm),e.alarm=JSON.parse(e.alarm),e.section=t.section;var n=tempus(e.alarm.date).format("%d"),r=tempus(e.alarm.date).format("%m"),a=tempus(e.alarm.date).dayCount();e.dayCount!=a&&(e.days=e.utils.getDays(n,a),e.daysScroll.refresh()),e.daysScroll.scrollTo(n),e.monthsScroll.scrollTo(r),e.hoursScroll.scrollTo(Math.floor(e.alarm.time/60)),e.minutesScroll.scrollTo(e.alarm.time-60*Math.floor(e.alarm.time/60)),e.dateNow=tempus().format("%d %b, %a"),app.utils.onEndTransition(i[0],function(){e.activity=!0,e.update()})},e.success=function(){var t=60*e.hoursScroll.value+e.minutesScroll.value;e.alarm.time=t,n.data.forEach(function(t,i){t.id===e.alarm.id&&(n.data[i]=e.alarm)}),n.data.sort(e.compareDate),n.update(),e.activity=!1},e.cancel=function(){e.activity=!1},e.compareDate=function(t,e){return t.date>e.date?1:t.date<e.date?-1:void 0},this.on("mount",function(){var t=function(){};t.prototype={init:function(t,n){var r=this,a=0;this.wrapper=i.find("#alarm__settings__iscroll__"+t),this.container=this.wrapper.children(),this.step=parseInt(this.container.find(".alarm__settings__"+n+"__item:first").height()),this.item=n,this.container.find(".alarm__settings__"+n+"__item").each(function(){this.setAttribute("data-step",a),a+=r.step}),this.scroll=new IScroll(this.wrapper[0],{scrollX:!1,scrollY:!0,snap:!0,snapSpeed:"time"===n?200:300,probeType:3}),function o(){app.utils.raf(o),app.utils.getScroll(r.scroll)}(),this.wrapper.on(clickEvent,".alarm__settings__"+n+"__item",function(){r.scroll.scrollToElement(this,200,null,null,IScroll.utils.ease.cubicOut)}),this.scroll.on("scrollEnd",function(){var i=Math.abs(this.y),a=r.container.find(".alarm__settings__"+n+"__item[data-step='"+i+"']");if(a.length&&(a.addClass("alarm__settings__item--active").siblings().removeClass("alarm__settings__item--active"),r.value=parseInt(a[0].getAttribute("data-value")),e.activity&&("months"===t&&r.calcDays(),"days"===t||"months"===t))){var o=e.daysScroll.value,s=e.monthsScroll.value;10>o&&(o="0"+o),10>s&&(s="0"+s),console.log("scrollEnd"),e.alarm.date=e.alarm.date.replace(/(\d+)-\d+-\d+/g,"$1-"+s+"-"+o),e.update()}})},calcDays:function(){var t=tempus({month:this.value}).dayCount();e.dayCount!=t&&(e.days=e.utils.getDays(e.daysScroll.value,t),e.dayCount=parseInt(t),e.daysScroll.value&&e.daysScroll.value>e.dayCount&&(e.daysScroll.value=e.dayCount,e.daysScroll.scrollTo(e.dayCount)),e.daysScroll.refresh())},refresh:function(){this.scroll.refresh();var t=this,e=0;t.container.find(".alarm__settings__"+t.item+"__item").each(function(){this.setAttribute("data-step",e),e+=t.step})},scrollTo:function(t){(t||0===t)&&(t=parseInt(t),this.value=t,this.scroll.scrollToElement(this.container.find("div[data-value='"+t+"']")[0],1))}},e.hoursScroll=new t,e.hoursScroll.init("hours","time"),e.minutesScroll=new t,e.minutesScroll.init("minutes","time"),e.daysScroll=new t,e.daysScroll.init("days","date"),e.monthsScroll=new t,e.monthsScroll.init("months","date")})}),riot.tag2("dashboard-balance",'<div id="dashboard__balance__scroll" class="section__wrapper"> <div class="section__container"> <header class="header__black"> <div class="header__title">Ваш баланс</div> <div class="header__left"> <div onclickdelegate="{onClose}" class="alarm__list__close header__icon header__icon__back"></div> </div> <div class="header__right dashboard__balance__days"> 28 дн </div> </header> <div class="dashboard__screen"> <div class="dashboard__balance__label">остаток</div> <div id="dashboard__balance__big" class="dashboard__screen__circle"></div> </div> <div class="dashboard__balance__button">Пополнить баланс</div> <div class="dashboard__table"> <div class="dashboard__table__row"> <div class="c-gray">12 мар 2016</div> <div class="t-right"><strong>1 250,0 Р</strong></div> </div> <div class="dashboard__table__row"> <div class="c-gray">7 мар 2016</div> <div class="t-right"><strong>3 480,0 Р</strong></div> </div> <div class="dashboard__table__row"> <div class="c-gray">5 мар 2016</div> <div class="t-right"><strong>900,0 Р</strong></div> </div> </div> </div> </div>',"",'class="section section__secondary section__header__nofixed"',function(t){var e=this,i=$$(e.root),n=e.parent.tags["dashboard-list"];e.onClose=function(t){n.closeSection("balance")},this.on("mount",function(){i.find("#dashboard__balance__big").circliful({foregroundColor:"#68f5ff",foregroundBorderWidth:8.5,backgroundBorderWidth:8.5,showPercent:!1,percent:88,textFamily:"roboto",textSize:"25px",target:"4 750,0"}),e.iScrollList=new IScroll(e.dashboard__balance__scroll,{scrollX:!1,scrollY:!0}),function t(){app.utils.raf(t),app.utils.getScroll(e.iScrollList)}()})}),riot.tag2("dashboard-currency",'<div id="dashboard__currency__scroll" class="section__wrapper"> <div class="section__container"> <header class="header__black"> <div class="header__title">Курсы валют</div> <div class="header__left"> <div onclickdelegate="{onClose}" class="alarm__list__close header__icon header__icon__back"></div> </div> <div class="header__right"> <div class="header__icon UI__menu__circleV UI__menu__circle--white"><div class="UI__menu__circle__item"></div></div> </div> </header> <div class="dashboard__screen dashboard__screen--currency"> <div class="dashboard__screen__label">cегодня</div> <div class="dashboard__screen__label dashboard__screen__label--left">ЦБ РФ</div> <div class="dashboard__screen__currency dashboard__screen__currency--line"> <div class="dashboard__screen__currency__item dashboard__screen__currency__value">{data.get(⁗usd⁗)} <span class="dashboard__screen__currency__rub">Р</span></div> <div class="dashboard__screen__currency__item dashboard__screen__currency__title">$</div> </div> <div class="dashboard__screen__currency"> <div class="dashboard__screen__currency__item dashboard__screen__currency__title">&euro;</div> <div class="dashboard__screen__currency__item dashboard__screen__currency__value">{data.get(⁗euro⁗)} <span class="dashboard__screen__currency__rub">Р</span></div> </div> </div> <div class="dashboard__table"> <div each="{item in data.get(⁗items⁗)}" no-reorder class="dashboard__table__row"> <div class="dashboard__table__string c-gray">{item.title}</div> <div class="t-right"><strong>{item.value} Р</strong></div> </div> </div> </div> </div>',"",'class="section section__secondary section__header__nofixed"',function(t){var e=this,i=($$(e.root),e.parent.tags["dashboard-list"]);e.data=new Baobab({usd:null,euro:null,items:[]}),this.on("mount",function(){e.iScrollList=new IScroll(e.dashboard__currency__scroll,{scrollX:!1,scrollY:!0}),function t(){app.utils.raf(t),app.utils.getScroll(e.iScrollList)}()}),e.onClose=function(t){i.closeSection("currency")}}),riot.tag2("dashboard-list",'<div id="dashboard__scroll" class="section__wrapper"> <div class="section__container section__container__dashboard"> <header class="header__dashboard"> <div class="header__title">Инфо-панель</div> <div class="header__left"> <div class="dashboard__openMenu header__icon UI__menu"><div class="UI__menu__item"></div></div> </div> <div class="header__right"> <div onclickdelegate="{openDataList}" class="dashboard__next__section header__icon header__icon__next__white"></div> </div> </header> <div onclickdelegate="{openBalance}" class="dashboard__tile dashboard__tile__balance"> <div class="dashboard__tile__label">пополнить</div> <div id="dashboard__balance" class="dashboard__circle"></div> <div class="dashboard__title"> <div class="dashboard__subtitle">Ваш баланс:</div> <div class="dashboard__balance">4 750,0 <span class="dashboard__balance__rub">Р</span></div> </div> </div> <div onclickdelegate="{openTraffic}" class="dashboard__tile dashboard__tile__traffic"> <div class="dashboard__tile__label">подробнее</div> <div id="dashboard__traffic__score" class="dashboard__circle"></div> <div class="dashboard__title">Входящие</div> </div> <div class="dashboard__tile"> <span id="dashboard__traffic__graph">5,3,9,6,5,9,7,3,5,2</span> </div> <div onclickdelegate="{openWeather}" class="dashboard__tile dashboard__tile__weather"> <div class="dashboard__tile__label">сегодня</div> <canvas id="partly-cloudy-night" class="dashboard__weather__canvas"></canvas> <div class="dashboard__weather"> <div class="dashboard__weather__temp">{data.weather.day > 0 ? ⁗+⁗ + data.weather.day : data.weather.day}...<span class="dashboard__weather__temp__to">{data.weather.night > 0 ? ⁗+⁗ + data.weather.night : data.weather.night}</span></div> <div class="dashboard__weather__text">{data.weather.type}</div> <div class="dashboard__weather__text">{data.weather.humidity}% / {data.weather.pressure} мм рт.с.</div> </div> </div> <div onclickdelegate="{openCurrency}" class="dashboard__tile dashboard__tile__currency"> <div class="dashboard__currency"> <div class="dashboard__currency__title">$</div> <div class="dashboard__currency__value">{data.currency.usd}</div> </div> <div class="dashboard__currency"> <div class="dashboard__currency__title">&euro;</div> <div class="dashboard__currency__value">{data.currency.euro}</div> </div> </div> </div> </div>',"",'class="section section__primary"',function(t){var e=this,i=$$(e.root);$$(e.parent.root);e.data={weather:{},currency:{}},this.on("mount",function(){if($fetch("dashboard/init","get").then(function(t){var i=e.sections.weather.tag,n=e.sections.currency.tag.data;i.data=t.weather,e.data.weather=t.weather.now,n.set("items",t.currency);var r=n.get("items",{code:"USD"},"value"),a=n.get("items",{code:"EUR"},"value");n.set("usd",String(r).replace(/\./g,",")),n.set("euro",String(a).replace(/\./g,",")),e.data.currency={usd:String(parseFloat(r).toFixed(2)).replace(/\./g,","),euro:String(parseFloat(a).toFixed(2)).replace(/\./g,",")},e.update(),e.sections.weather.tag.update(),e.sections.currency.tag.update(),e.sections.currency.tag.iScrollList.refresh()}),e.sections={balance:{tag:e.parent.tags["dashboard-balance"],section:$$(e.parent.tags["dashboard-balance"].root)},traffic:{tag:e.parent.tags["dashboard-traffic"],section:$$(e.parent.tags["dashboard-traffic"].root)},weather:{tag:e.parent.tags["dashboard-weather"],section:$$(e.parent.tags["dashboard-weather"].root)},currency:{tag:e.parent.tags["dashboard-currency"],section:$$(e.parent.tags["dashboard-currency"].root)}},i.find("#dashboard__balance").circliful({foregroundColor:"#68f5ff",backgroundColor:"#f0f4fb",textColor:"#333947",foregroundBorderWidth:10,backgroundBorderWidth:10,percent:88}),i.find("#dashboard__traffic__score").circliful({foregroundColor:"#fcde30",backgroundColor:"#f0f4fb",textColor:"#333947",foregroundBorderWidth:10,backgroundBorderWidth:10,textSize:"35px",showPercent:!1,percent:54,target:12}),i.find("#dashboard__traffic__graph").peity("bar",{fill:["#839ae3","#62e1d8"],width:"100%",height:"100px"}),"undefined"!=typeof Skycons){var t=new Skycons({color:"#839ae3"},{resizeClear:!0});t.add("partly-cloudy-night",Skycons.PARTLY_CLOUDY_NIGHT),t.play()}e.iScrollList=new IScroll(e.dashboard__scroll,{scrollX:!1,scrollY:!0}),function n(){app.utils.raf(n),app.utils.getScroll(e.iScrollList)}(),app.iScrollDashboardList=e.iScrollList}),e.openDataList=function(t){app.sections.nav("data")},e.openBalance=function(t){e.openSection("balance")},e.openTraffic=function(t){e.openSection("traffic")},e.openWeather=function(t){e.openSection("weather")},e.openCurrency=function(t){e.openSection("currency")},e.openSection=function(t){e.sections[t].section.addClass("section--show"),i.addClass("section--hidden"),app.utils.onEndAnimation(e.sections[t].section[0],function(){e.sections[t].section.addClass("section--active").removeClass("section--show"),e.sections[t].tag.iScrollList.refresh()})},e.closeSection=function(t){e.sections[t].section.addClass("section--hidden"),i.removeClass("section--hidden"),app.utils.onEndAnimation(e.sections[t].section[0],function(){e.sections[t].section.removeClass("section--active").removeClass("section--hidden")})}}),riot.tag2("dashboard-section","<dashboard-list></dashboard-list> <dashboard-balance></dashboard-balance> <dashboard-traffic></dashboard-traffic> <dashboard-weather></dashboard-weather> <dashboard-currency></dashboard-currency>","",'data-marquee="dashboard" class="section section__marquee section__header__nofixed"',function(t){}),riot.tag2("dashboard-traffic",'<div id="dashboard__traffic__scroll" class="section__wrapper"> <div class="section__container"> <header class="header__black"> <div class="header__title">Статистика входящих</div> <div class="header__left"> <div onclickdelegate="{onClose}" class="alarm__list__close header__icon header__icon__back"></div> </div> <div class="header__right"> <div class="header__icon UI__menu__circleV UI__menu__circle--white"><div class="UI__menu__circle__item"></div></div> </div> </header> <div class="dashboard__screen"> <div class="dashboard__screen__label">cегодня</div> <span id="dashboard__traffic__big">5,3,9,6</span> </div> <div class="dashboard__table"> <div class="dashboard__table__row"> <div class="dashboard__table__title w-70p"><span class="dashboard__table__circle" style="background:#00d1fe"></span>Обратные звонки</div> <div class="w-15p t-center c-gray">12%</div> <div class="w-15p t-center"><strong>3</strong></div> </div> <div class="dashboard__table__row"> <div class="dashboard__table__title w-70p"><span class="dashboard__table__circle" style="background:#ffe02d"></span>Онлайн-чаты</div> <div class="w-15p t-center c-gray">24%</div> <div class="w-15p t-center"><strong>5</strong></div> </div> <div class="dashboard__table__row"> <div class="dashboard__table__title w-70p"><span class="dashboard__table__circle" style="background:#b77de9"></span>Сообщения</div> <div class="w-15p t-center c-gray">27%</div> <div class="w-15p t-center"><strong>6</strong></div> </div> <div class="dashboard__table__row"> <div class="dashboard__table__title w-70p"><span class="dashboard__table__circle" style="background:#ff9498"></span>Заявки</div> <div class="w-15p t-center c-gray">18%</div> <div class="w-15p t-center"><strong>4</strong></div> </div> </div> </div> </div>',"",'class="section section__secondary section__header__nofixed"',function(t){
var e=this,i=($$(e.root),e.parent.tags["dashboard-list"]);e.onClose=function(t){i.closeSection("traffic")},this.on("mount",function(){$$(e.dashboard__traffic__big).peity("donut",{fill:["#00d1fe","#ffe02d","#b77de9","#ff9498"],width:176,height:176}),e.iScrollList=new IScroll(e.dashboard__traffic__scroll,{scrollX:!1,scrollY:!0}),function t(){app.utils.raf(t),app.utils.getScroll(e.iScrollList)}()})}),riot.tag2("dashboard-weather",'<div id="dashboard__weather__scroll" class="section__wrapper"> <div class="section__container"> <header class="header__black"> <div class="header__title">Прогноз погоды</div> <div class="header__left"> <div onclickdelegate="{onClose}" class="alarm__list__close header__icon header__icon__back"></div> </div> <div class="header__right"> <div class="header__icon UI__menu__circleV UI__menu__circle--white"><div class="UI__menu__circle__item"></div></div> </div> </header> <div class="dashboard__screen"> <div class="dashboard__screen__label">сейчас</div> <div class="dashboard__screen__label dashboard__screen__label--left">Москва</div> <div class="dashboard__screen__weather"> <div class="dashboard__screen__weather__description"> <div class="dashboard__screen__weather__temp">{data.now.temp > 0 ? ⁗+⁗ + data.now.temp : data.now.temp}</div> <div class="dashboard__screen__weather__text">{data.now.type}</div> <div class="dashboard__screen__weather__text">Влаж. {data.now.humidity}%</div> <div class="dashboard__screen__weather__text">{data.now.pressure} мм рт.ст.</div> </div> <div class="dashboard__screen__weather__svg"></div> </div> </div> <div class="dashboard__weather__week"> <div each="{item in data.days}" no-reorder class="dashboard__weather__week__item"> <div class="dashboard__weather__week__title">{getDate(item.date)}</div> <canvas id="dashboard__weather__week1" class="dashboard__weather__week__canvas"></canvas> <div class="dashboard__weather__week__temp">{item.day > 0 ? ⁗+⁗ + item.day : item.day}</div> </div> </div> </div> </div>',"",'class="section section__secondary section__header__nofixed"',function(t){var e=this,i=($$(e.root),e.parent.tags["dashboard-list"]);e.data={},this.on("mount",function(){var t=new Skycons({color:"#158ffe"},{resizeClear:!0});t.add("dashboard__weather__week1",Skycons.CLEAR_DAY),e.iScrollList=new IScroll(e.dashboard__weather__scroll,{scrollX:!1,scrollY:!0}),function i(){app.utils.raf(i),app.utils.getScroll(e.iScrollList)}()}),e.getDate=function(t){return tempus(t).format("%d/%m")},e.onClose=function(t){i.closeSection("weather")}}),riot.tag2("data-header",'<div onclickdelegate="{openMenu}" class="header__title">{headerTitle}</div> <div class="header__left"> <div class="header__icon UI__menu"><div class="UI__menu__item"></div></div> </div> <div class="header__right"> <div onclickdelegate="{openAlarm}" class="header__icon header__icon__alarm header__icon__alarm--active"> <div class="header__icon__alarm__counts">3</div> </div> <div class="header__icon UI__menu__circleV UI__menu__circle--white"><div class="UI__menu__circle__item"></div></div> </div> <div class="header__data__panel {header__data__panel--active : show}"> <div class="header__left"> <div onclickdelegateupdate="{onClear}" class="header__icon header__icon__back__white"></div> <div class="header__icon header__data__panel__count">{counts}</div> </div> <div class="header__right"> <div onclickdelegateupdate="{onViewed}" class="header__icon header__data__panel__viewed"></div> <div onclickdelegateupdate="{onImportant}" class="header__icon header__data__panel__important"></div> <div onclickdelegate="{onRemove}" class="header__icon header__data__panel__remove"></div> <div onclickdelegate="{onStatus}" class="header__icon header__data__panel__folder"></div> <div onclickdelegate="{onCheckAll}" class="header__icon UI__menu__circleV UI__menu__circle--white"><div class="UI__menu__circle__item"></div></div> </div> </div> <div class="data__list__loader"> <i class="data__list__loader__blank"></i> </div>',"",'class="header header__data__list"',function(t){var e=this,i=($$(e.root),$root.tags["alert-window"]),n=$root.tags["popup-select"],r=e.parent.tags["data-list"],a=e.parent.tags["data-menu"],o=$$(r.root);if(e.headerTitle="Входящие",this.on("mount",function(){e.loader()}),e.openMenu=function(){a.show()},e.onClear=function(t){r.unChecked(),e.show=!1,e.counts=0,t&&e.update()},e.onViewed=function(){$fetch("data/list/viewed","put",r.getCheckedIds()),r.data.get("isChecked",function(t){t["new"]=!1}),e.onClear()},e.onImportant=function(){r.data.get("isChecked",function(t){t.important?(t.important=!1,$fetch("data/list/unimportant","put",[t._id])):(t.important=!0,$fetch("data/list/important","put",[t._id]))}),e.onClear()},e.onRemove=function(){i.show({title:"Удалить выбранные?",success:{callback:function(){$fetch("data/list/remove","delete",r.getCheckedIds()),r.data.get("isChecked",function(t){t.remove=!0}),e.onClear(!0),app.utils.onEndTransition(o.find(".data__list__item--remove:first")[0],function(){for(var t=r.data._data.items,e=0;e<t.length;e++)t[e].remove&&(t.splice(e,1),e--);r.update(),r.iScrollList.refresh()})}}})},e.onStatus=function(){n.show({type:"status",data:r.data.get("status"),callback:function(t){$fetch("data/list/status/"+t,"put",r.getCheckedIds()),r.data.get("isChecked",function(e){e.status=t}),e.onClear(!0)}})},e.onCheckAll=function(){var t=0;r.data.get("items",function(e){e.checked=!0,t++}),e.counts=t,e.update(),r.update()},$root.tags["alarm-section"]){var s=$$($root.tags["alarm-section"].root);e.openAlarm=function(){s.addClass("section--show")}}e.loader=function(){if(e.loader.app)return void e.loader.app.start();var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(){this.addBanner=t(this.addBanner,this)};i.prototype.loaded=0,i.prototype.loop=0,i.prototype.total=80,i.prototype.lastPicked=["blank","blank","blank"],i.prototype.colors=["red","green","blue","yellow","purple"],i.prototype.end=!0,i.prototype.init=function(){this.getElements()},i.prototype.start=function(){if(this.end){var t=this;this.loaded=0,this.loadSim=null,this.loadCheck=null,this.end=!1,this.loop++,this.addListeners(),setTimeout(function(){t.el.setAttribute("class","data__list__loader data__list__loader--active")},350)}},i.prototype.getElements=function(){return this.el=document.getElementsByClassName("data__list__loader")[0]},i.prototype.addListeners=function(){var t=this;this.animationLoop=function(){t.loadSim=setInterval(function(t){return function(){return t.loaded+=1+Math.floor(4*Math.random())}}(t),200),t.loadCheck=setInterval(function(e){return function(){return e.loaded<e.total?e.addBanner():(e.loadSim&&setTimeout(function(){t.el.setAttribute("class","data__list__loader"),t.end=!0},1500),clearInterval(e.loadSim),e.loadSim=null,clearInterval(e.loadCheck))}}(t),200)},this.loop<2&&app.utils.raf(this.animationLoop),this.animationLoop()},i.prototype.addBanner=function(){var t,e,i;for(t=document.createElement("i"),e=this.lastPicked[0];-1!==this.lastPicked.indexOf(e);)e=this.colors[Math.floor(Math.random()*this.colors.length)];for(this.lastPicked.unshift(e),this.lastPicked.pop(),t.setAttribute("class","data__list__loader__"+e),this.el.insertBefore(t,this.el.children[0]),i=[];this.el.children.length>12;)i.push(this.el.removeChild(this.el.children[12]));return i},e.loader.app=new i,e.loader.app.init()}}),riot.tag2("data-list",'<div class="section__container section__container__data__list"> <div each="{item in data.get(\'items\')}" no-reorder class="data__list__item data__list__status--{getStatusColor(item.status)} {data__list__item--new : item.new} {data__list__item--checked : item.checked} {data__list__item--important : item.important} {data__list__item--remove : item.remove} {data__list__item--animation : item.animation}"> <div if="{item.alarm}" class="data__list__alarm"></div> <div class="data__list__date">{getDate(item.date)}</div> <div onclickdelegateupdate="{onChecked}" class="data__list__photo"> <div if="{item.type !== ⁗profile⁗}" class="data__list__photo__item data__list__icon data__list__icon--{item.type}"></div> <div if="{item.type === ⁗profile⁗}" class="data__list__photo__item"> <div class="data__list__photo__image" riot-style="background-image:url({item.image})"></div> </div> </div> <div class="data__list__textarea"> <div class="data__list__title"> <span class="data__list__name"> <virtual if="{item.type === ⁗order⁗}">#заявка,</virtual> <virtual if="{item.type === ⁗chat⁗}">#онлайн-чат,</virtual> <virtual if="{item.type === ⁗callback⁗}">#звонок,</virtual> <virtual if="{item.type === ⁗feedback⁗}">#письмо,</virtual> <virtual if="{item.type === ⁗profile⁗}">#профиль,</virtual> </span> {item.title} </div> <div class="data__list__text"> <virtual if="{item.type !== ⁗callback⁗}">{item.text}</virtual> <span if="{item.type === ⁗callback⁗}" class="data__list__strong">{item.text}</span> </div> </div> <div onclickdelegate="{selectStatus}" class="data__list__options"><div class="data__list__options__item"></div></div> </div> </div> <div onclickdelegate="{openChat}" class="chat__circle__button"> <div class="chat__circle__button__messages chat__circle__button__messages--active">4</div> </div>',"",'class="section__wrapper"',function(t){var e=this,i=$$(e.root),n=$root.tags["popup-select"];e.data=new Baobab({items:[],status:[],isChecked:Baobab.monkey(["items"],function(t){return t.filter(function(t){return t.checked===!0})})}),this.on("mount",function(){$fetch("data/list/init","get").then(function(t){e.data.set("items",t.list),e.data.set("status",t.status),e.update(),e.iScrollList.refresh()}),e.panel=e.parent.tags["data-header"],e.iScrollList=new IScroll(i[0],{scrollX:!1,scrollY:!0}),function t(){app.utils.raf(t);var i=app.utils.getScroll(e.iScrollList);e.panel.show||(i.y<-80?e.panel.loader():i.y>0&&i.maxY-i.y<40)}(),app.iScrollDataList=e.iScrollList}),e.getCheckedIds=function(){return _.pluck(e.data.get("isChecked"),"_id")},e.getDate=function(t){var e=tempus().between(tempus(t),"day");return e>0?tempus(t).format("%H:%M"):-1===e?"вчера":tempus(t).format("%d %b")},e.getStatusColor=function(t){return e.data.get("status",{_id:t},"color")},e.onChecked=function(){this.item.checked?(this.item.checked=!1,e.data.select("items",{_id:this.item._id}).set("checked",!1)):(this.item.checked=!0,e.data.select("items",{_id:this.item._id}).set("checked",!0));var t=e.data.get("isChecked").length;t?e.panel.show=!0:e.panel.show=!1,e.panel.counts=t,e.panel.update()},e.unChecked=function(){e.data.get("isChecked",function(t){t.checked=!1}),e.update()},e.selectStatus=function(){var t=this,i=this.item._id;n.show({type:"status",icon:{type:this.item.type,image:this.item.image},data:e.data.get("status"),value:this.item.status,callback:function(n){$fetch("data/list/status/"+n,"put",[i]),e.data.select("items",{_id:i}).set("status",n),t.update()}})},e.openChat=function(){app.sections.nav("chat")}}),riot.tag2("data-menu",'<div onclickdelegateupdateall="{onSelect}" each="{items}" no-reorder class="data__menu__item {data__menu__item--active : name == value}"> <span class="data__menu__item__icon data__menu__item--{name}">{subtitle}</span> </div>',"",'class="data__menu {data__menu--active : active}"',function(t){var e=this,i=($$(e.root),e.parent.tags["data-header"]);e.active=!1,e.value="inbox",e.items=[{title:"Звонки",subtitle:"Звонки c сайта",name:"callback"},{title:"Письма",subtitle:"Все письма",name:"feedback"},{title:"Онлайн-чаты",subtitle:"Онлайн-чаты",name:"chat"},{title:"Заявки",subtitle:"Все заявки",name:"order"},{title:"Входящие",subtitle:"Все входящие",name:"inbox"}],e.show=function(){e.active=!0,e.update()},e.onSelect=function(){e.value=this.name,e.active=!1,i.headerTitle=this.title,i.update()}}),riot.tag2("data-section","<data-header></data-header> <data-list></data-list> <data-menu></data-menu>","",'data-marquee="data" class="section section__marquee section__data__list"',function(t){}),function(){$document.on("touchmove MSPointerMove",function(t){t.preventDefault()}),$window.on("mousewheel",function(t){t.preventDefault()}),$window.on("scroll",function(){$html.add($body).scrollTop(0)}),$sid=777,riot.mount("*")}();