!function(t,e){"use strict";function i(t,e,i){var n={};return n[t.key]=e,t.pos&&(n[t.pos]=i),n}function n(t,e){for(var i,n=e.length,a=t.length;n>a;)i=e[--n],e.splice(n,1),i.unmount()}function a(t,e){Object.keys(t.tags).forEach(function(i){var n=t.tags[i];$(n)?p(n,function(t){k(t,i,e)}):k(n,i,e)})}function s(t,e,i){var n,a=t._root;for(t._virts=[];a;)n=a.nextSibling,i?e.insertBefore(a,i._root):e.appendChild(a),t._virts.push(a),a=n}function r(t,e,i,n){for(var a,s=t._root,r=0;n>r;r++)a=s.nextSibling,e.insertBefore(s,i._root),s=a}function o(t,e,o){m(t,"each");var c,l=typeof y(t,"no-reorder")!==G||m(t,"no-reorder"),u=C(t),_=F[u]||{tmpl:t.outerHTML},h=it.test(u),p=t.parentNode,f=document.createTextNode(""),v=w(t),g="option"===u.toLowerCase(),b=[],x=[],k="VIRTUAL"==t.tagName;o=rt.loopKeys(o),p.insertBefore(f,t),e.one("before-mount",function(){t.parentNode.removeChild(t),p.stub&&(p=e.root)}).on("update",function(){var m=rt(o.val,e),y=document.createDocumentFragment();$(m)||(c=m||!1,m=c?Object.keys(m).map(function(t){return i(o,t,m[t])}):[]);for(var w=0,S=m.length;S>w;w++){var T=m[w],C=l&&T instanceof Object&&!c,P=x.indexOf(T),M=~P&&C?P:w,L=b[M];T=!c&&o.key?i(o,T,w):T,!C&&!L||C&&!~P||!L?(L=new d(_,{parent:e,isLoop:!0,hasImpl:!!F[u],root:h?p:t.cloneNode(),item:T},t.innerHTML),L.mount(),k&&(L._root=L.root.firstChild),w!=b.length&&b[w]?(k?s(L,p,b[w]):p.insertBefore(L.root,b[w].root),x.splice(w,0,T)):k?s(L,y):y.appendChild(L.root),b.splice(w,0,L),M=w):L.update(T,!0),M!==w&&C&&b[w]&&(k?r(L,p,b[w],t.childNodes.length):p.insertBefore(L.root,b[w].root),o.pos&&(L[o.pos]=w),b.splice(w,0,b.splice(M,1)[0]),x.splice(w,0,x.splice(M,1)[0]),!v&&L.tags&&a(L,w)),L._item=T,E(L,"_parent",e)}if(n(m,b),g){if(p.appendChild(y),p.length){var A,D=p.options;for(p.selectedIndex=A=-1,w=0;w<D.length;w++)(D[w].selected=D[w].__selected)&&0>A&&(p.selectedIndex=A=w)}}else p.insertBefore(y,f);v&&(e.tags[u]=b),x=m.slice()})}function c(t,e,i,n){D(t,function(t){if(1==t.nodeType){if(t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||y(t,"each")?1:0,i){var a=w(t);a&&!t.isLoop&&i.push(S(a,{root:t,parent:e},t.innerHTML,e))}t.isLoop&&!n||H(t,e,[])}})}function l(t,e,i){function n(t,e,n){rt.hasExpr(e)&&i.push(P({dom:t,expr:e},n))}D(t,function(t){var i,a=t.nodeType;return 3==a&&"STYLE"!=t.parentNode.tagName&&n(t,t.nodeValue),1==a?(i=y(t,"each"))?(o(t,e,i),!1):(p(t.attributes,function(e){var i=e.name,a=i.split("__")[1];return n(t,e.value,{attr:a||i,bool:a}),a?(m(t,i),!1):void 0}),w(t)?!1:void 0):void 0})}function d(t,i,n){function a(){var t=k&&x?_:w||_;p(I.attributes,function(e){var i=e.value;y[g(e.name)]=rt.hasExpr(i)?rt(i,t):i}),p(Object.keys(Y),function(e){y[g(e)]=rt(Y[e],t)})}function s(t){for(var e in S)typeof _[e]!==tt&&L(_,e)&&(_[e]=t[e])}function r(){_.parent&&x&&p(Object.keys(_.parent),function(t){var e=!M(nt,t)&&M(R,t);(typeof _[t]===tt||e)&&(e||R.push(t),_[t]=_.parent[t])})}function o(t){_.update(t,!0)}function d(t){if(p(D,function(e){e[t?"mount":"unmount"]()}),w){var e=t?"on":"off";x?w[e]("unmount",_.unmount):w[e]("update",o)[e]("unmount",_.unmount)}}var u,_=W.observable(this),y=X(i.opts)||{},w=i.parent,x=i.isLoop,k=i.hasImpl,S=A(i.item),C=[],D=[],I=i.root,j=I.tagName.toLowerCase(),Y={},R=[];t.name&&I._tag&&I._tag.unmount(!0),this.isMounted=!1,I.isLoop=x,I._tag=this,E(this,"_riot_id",++U),P(this,{parent:w,root:I,opts:y,tags:{}},S),p(I.attributes,function(t){var e=t.value;rt.hasExpr(e)&&(Y[t.name]=e)}),u=ot(t.tmpl,n),E(this,"update",function(t,e){return t=A(t),r(),t&&v(S)&&(s(t),S=t),P(_,t),a(),_.trigger("update",t),h(C,_),e&&_.parent?_.parent.one("updated",function(){_.trigger("updated")}):lt(function(){_.trigger("updated")}),this}),E(this,"mixin",function(){return p(arguments,function(t){var e;t=typeof t===G?W.mixin(t):t,f(t)?(e=new t,t=t.prototype):e=t,p(Object.getOwnPropertyNames(t),function(t){"init"!=t&&(_[t]=f(e[t])?e[t].bind(_):e[t])}),e.init&&e.init.bind(_)()}),this}),E(this,"mount",function(){a();var e=W.mixin(V);if(e&&_.mixin(e),t.fn&&t.fn.call(_,y),l(u,_,C),d(!0),t.attrs&&O(t.attrs,function(t,e){b(I,t,e)}),(t.attrs||k)&&l(_.root,_,C),_.parent&&!x||_.update(S),_.trigger("before-mount"),x&&!k)I=u.firstChild;else{for(;u.firstChild;)I.appendChild(u.firstChild);I.stub&&(I=w.root)}E(_,"root",I),x&&c(_.root,_.parent,null,!0),!_.parent||_.parent.isMounted?(_.isMounted=!0,_.trigger("mount")):_.parent.one("mount",function(){N(_.root)||(_.parent.isMounted=_.isMounted=!0,_.trigger("mount"))})}),E(this,"unmount",function(t){var i,n=I,a=n.parentNode,s=q.indexOf(_);if(_.trigger("before-unmount"),~s&&q.splice(s,1),this._virts&&p(this._virts,function(t){t.parentNode&&t.parentNode.removeChild(t)}),a){if(w)i=T(w),$(i.tags[j])?p(i.tags[j],function(t,e){t._riot_id==_._riot_id&&i.tags[j].splice(e,1)}):i.tags[j]=e;else for(;n.firstChild;)n.removeChild(n.firstChild);t?m(a,"riot-tag"):a.removeChild(n)}_.trigger("unmount"),d(),_.off("*"),_.isMounted=!1,delete I._tag}),c(u,this,D)}function u(e,i,n,a){n[e]=function(e){var s,r=a._parent,o=a._item;if(!o)for(;r&&!o;)o=r._item,r=r._parent;e=e||t.event,L(e,"currentTarget")&&(e.currentTarget=n),L(e,"target")&&(e.target=e.srcElement),L(e,"which")&&(e.which=e.charCode||e.keyCode),e.item=o,i.call(a,e)===!0||/radio|check/.test(n.type)||(e.preventDefault&&e.preventDefault(),e.returnValue=!1),e.preventUpdate||(s=o?T(r):a,s.update())}}function _(t,e,i){t&&(t.insertBefore(i,e),t.removeChild(e))}function h(t,e){p(t,function(t,i){var n=t.dom,a=t.attr,s=rt(t.expr,e),r=t.dom.parentNode;if(t.bool?(s=!!s,"selected"===a&&(n.__selected=s)):null==s&&(s=""),t.value!==s){if(t.value=s,!a)return s+="",void(r&&("TEXTAREA"===r.tagName?(r.value=s,at||(n.nodeValue=s)):n.nodeValue=s));if("value"===a)return void(n.value=s);if(m(n,a),f(s))u(a,s,n,e);else if("if"==a){var o=t.stub,c=function(){_(o.parentNode,o,n)},l=function(){_(n.parentNode,n,o)};s?o&&(c(),n.inStub=!1,N(n)||D(n,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(o=t.stub=o||document.createTextNode(""),n.parentNode?l():(e.parent||e).one("updated",l),n.inStub=!0)}else"show"===a?n.style.display=s?"":"none":"hide"===a?n.style.display=s?"none":"":t.bool?(n[a]=s,s&&b(n,a,a)):(0===s||s&&typeof s!==Q)&&(z(a,Z)&&a!=K&&(a=a.slice(Z.length)),b(n,a,s))}})}function p(t,e){for(var i,n=t?t.length:0,a=0;n>a;a++)i=t[a],null!=i&&e(i,a)===!1&&a--;return t}function f(t){return typeof t===et||!1}function v(t){return t&&typeof t===Q}function m(t,e){t.removeAttribute(e)}function g(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})}function y(t,e){return t.getAttribute(e)}function b(t,e,i){t.setAttribute(e,i)}function w(t){return t.tagName&&F[y(t,J)||y(t,K)||t.tagName.toLowerCase()]}function x(t,e,i){var n=i.tags[e];n?($(n)||n!==t&&(i.tags[e]=[n]),M(i.tags[e],t)||i.tags[e].push(t)):i.tags[e]=t}function k(t,e,i){var n,a=t.parent;a&&(n=a.tags[e],$(n)?n.splice(i,0,n.splice(n.indexOf(t),1)[0]):x(t,e,a))}function S(t,e,i,n){var a=new d(t,e,i),s=C(e.root),r=T(n);return a.parent=r,a._parent=n,x(a,s,r),r!==n&&x(a,s,n),e.root.innerHTML="",a}function T(t){for(var e=t;!w(e.root)&&e.parent;)e=e.parent;return e}function E(t,e,i,n){return Object.defineProperty(t,e,P({value:i,enumerable:!1,writable:!1,configurable:!1},n)),t}function C(t){var e=w(t),i=y(t,"name"),n=i&&!rt.hasExpr(i)?i:e?e.name:t.tagName.toLowerCase();return n}function P(t){for(var e,i=arguments,n=1;n<i.length;++n)if(e=i[n])for(var a in e)L(t,a)&&(t[a]=e[a]);return t}function M(t,e){return~t.indexOf(e)}function $(t){return Array.isArray(t)||t instanceof Array}function L(t,e){var i=Object.getOwnPropertyDescriptor(t,e);return typeof t[e]===tt||i&&i.writable}function A(t){if(!(t instanceof d||t&&typeof t.trigger==et))return t;var e={};for(var i in t)M(nt,i)||(e[i]=t[i]);return e}function D(t,e){if(t){if(e(t)===!1)return;for(t=t.firstChild;t;)D(t,e),t=t.nextSibling}}function O(t,e){for(var i,n=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;i=n.exec(t);)e(i[1].toLowerCase(),i[2]||i[3]||i[4])}function N(t){for(;t;){if(t.inStub)return!0;t=t.parentNode}return!1}function I(t){return document.createElement(t)}function j(t,e){return(e||document).querySelectorAll(t)}function Y(t,e){return(e||document).querySelector(t)}function X(t){function e(){}return e.prototype=t,new e}function R(t){return y(t,"id")||y(t,"name")}function H(t,e,i){var n,a=R(t),s=function(s){M(i,a)||(n=$(s),s?(!n||n&&!M(s,t))&&(n?s.push(t):e[a]=[s,t]):e[a]=t)};a&&(rt.hasExpr(a)?e.one("mount",function(){a=R(t),s(e[a])}):s(e[a]))}function z(t,e){return t.slice(0,e.length)===e}function B(t,e,i){var n=F[e],a=t._innerHTML=t._innerHTML||t.innerHTML;return t.innerHTML="",n&&t&&(n=new d(n,{root:t,opts:i},a)),n&&n.mount&&(n.mount(),M(q,n)||q.push(n)),n}var W={version:"v2.3.17",settings:{}},U=0,q=[],F={},V="__global_mixin",Z="riot-",K=Z+"tag",J="data-is",G="string",Q="object",tt="undefined",et="function",it=/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,nt=["_item","_id","_parent","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],at=0|(t&&t.document||{}).documentMode;W.observable=function(t){t=t||{};var e={},i=Array.prototype.slice,n=function(t,e){t.replace(/\S+/g,e)};return Object.defineProperties(t,{on:{value:function(i,a){return"function"!=typeof a?t:(n(i,function(t,i){(e[t]=e[t]||[]).push(a),a.typed=i>0}),t)},enumerable:!1,writable:!1,configurable:!1},off:{value:function(i,a){return"*"!=i||a?n(i,function(t){if(a)for(var i,n=e[t],s=0;i=n&&n[s];++s)i==a&&n.splice(s--,1);else delete e[t]}):e={},t},enumerable:!1,writable:!1,configurable:!1},one:{value:function(e,i){function n(){t.off(e,n),i.apply(t,arguments)}return t.on(e,n)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(a){for(var s,r=arguments.length-1,o=new Array(r),c=0;r>c;c++)o[c]=arguments[c+1];return n(a,function(n){s=i.call(e[n]||[],0);for(var a,r=0;a=s[r];++r){if(a.busy)return;a.busy=1,a.apply(t,a.typed?[n].concat(o):o),s[r]!==a&&r--,a.busy=0}e["*"]&&"*"!=n&&t.trigger.apply(t,["*",n].concat(o))}),t},enumerable:!1,writable:!1,configurable:!1}}),t},function(e){function i(t){return t.split(/[\/?#]/)}function n(t,e){var i=new RegExp("^"+e[S](/\*/g,"([^/?#]+?)")[S](/\.\./,".*")+"$"),n=t.match(i);return n?n.slice(1):void 0}function a(t,e){var i;return function(){clearTimeout(i),i=setTimeout(t,e)}}function s(t){p=a(u,1),M[x](T,p),M[x](E,p),$[x](O,_),t&&u(!0)}function r(){this.$=[],e.observable(this),I.on("stop",this.s.bind(this)),I.on("emit",this.e.bind(this))}function o(t){return t[S](/^\/|\/$/,"")}function c(t){return"string"==typeof t}function l(t){return(t||A.href||"")[S](y,"")}function d(t){return"#"==f[0]?(t||A.href||"").split(f)[1]||"":l(t)[S](f,"")}function u(t){var e=0==X;if(!(X>=P)&&(X++,Y.push(function(){var e=d();(t||e!=v)&&(I[C]("emit",e),v=e)}),e)){for(;Y.length;)Y[0](),Y.shift();X=0}}function _(t){if(!(1!=t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)){for(var e=t.target;e&&"A"!=e.nodeName;)e=e.parentNode;!e||"A"!=e.nodeName||e[k]("download")||!e[k]("href")||e.target&&"_self"!=e.target||-1==e.href.indexOf(A.href.match(y)[0])||(e.href==A.href||e.href.split("#")[0]!=A.href.split("#")[0]&&("#"==f||0===l(e.href).indexOf(f))&&h(d(e.href),e.title||$.title))&&t.preventDefault()}}function h(t,e,i){return L?(t=f+o(t),e=e||$.title,i?L.replaceState(null,e,t):L.pushState(null,e,t),$.title=e,j=!1,u(),j):I[C]("emit",d(t))}var p,f,v,m,g,y=/^.+?\/+[^\/]+/,b="EventListener",w="remove"+b,x="add"+b,k="hasAttribute",S="replace",T="popstate",E="hashchange",C="trigger",P=3,M="undefined"!=typeof t&&t,$="undefined"!=typeof document&&document,L=M&&history,A=M&&(L.location||M.location),D=r.prototype,O=$&&"ontouchstart"in $.documentElement?"tap":"click",N=!1,I=e.observable(),j=!1,Y=[],X=0;D.m=function(t,e,i){!c(t)||e&&!c(e)?e?this.r(t,e):this.r("@",t):h(t,e,i||!1)},D.s=function(){this.off("*"),this.$=[]},D.e=function(t){this.$.concat("@").some(function(e){var i=("@"==e?m:g)(o(t),o(e));return"undefined"!=typeof i?(this[C].apply(null,[e].concat(i)),j=!0):void 0},this)},D.r=function(t,e){"@"!=t&&(t="/"+o(t),this.$.push(t)),this.on(t,e)};var R=new r,H=R.m.bind(R);H.create=function(){var t=new r;return t.m.stop=t.s.bind(t),t.m.bind(t)},H.base=function(t){f=t||"#",v=d()},H.exec=function(){u(!0)},H.parser=function(t,e){t||e||(m=i,g=n),t&&(m=t),e&&(g=e)},H.query=function(){var t={},e=A.href||v;return e[S](/[?&](.+?)=([^&]*)/g,function(e,i,n){t[i]=n}),t},H.stop=function(){N&&(M&&(M[w](T,p),M[w](E,p),$[w](O,_)),I[C]("stop"),N=!1)},H.start=function(t){N||(M&&("complete"==document.readyState?s(t):M[x]("load",function(){setTimeout(function(){s(t)},1)})),N=!0)},H.base(),H.parser(),e.route=H}(W);var st=function(t){function e(t){return t}function i(t,e){return e||(e=m),new RegExp(t.source.replace(/{/g,e[2]).replace(/}/g,e[3]),t.global?l:"")}function n(t){if(t===p)return f;var e=t.split(" ");if(2!==e.length||/[\x00-\x1F<>a-zA-Z0-9'",;\\]/.test(t))throw new Error('Unsupported brackets "'+t+'"');return e=e.concat(t.replace(/(?=[[\]()*+?.^$|])/g,"\\").split(" ")),e[4]=i(e[1].length>1?/{[\S\s]*?}/:f[4],e),e[5]=i(t.length>3?/\\({|})/g:f[5],e),e[6]=i(f[6],e),e[7]=RegExp("\\\\("+e[3]+")|([[({])|("+e[3]+")|"+_,l),e[8]=t,e}function a(t){return t instanceof RegExp?o(t):m[t]}function s(t){(t||(t=p))!==m[8]&&(m=n(t),o=t===p?e:i,m[9]=o(f[9]),m[10]=o(f[10])),v=t}function r(t){var e;t=t||{},e=t.brackets,Object.defineProperty(t,"brackets",{set:s,get:function(){return v},enumerable:!0}),c=t,s(e)}var o,c,l="g",d=/\/\*[^*]*\*+(?:[^*\/][^*]*\*+)*\//g,u=/"[^"\\]*(?:\\[\S\s][^"\\]*)*"|'[^'\\]*(?:\\[\S\s][^'\\]*)*'/g,_=u.source+"|"+/(?:\breturn\s+|(?:[$\w\)\]]|\+\+|--)\s*(\/)(?![*\/]))/.source+"|"+/\/(?=[^*\/])[^[\/\\]*(?:(?:\[(?:\\.|[^\]\\]*)*\]|\\.)[^[\/\\]*)*?(\/)[gim]*/.source,h={"(":RegExp("([()])|"+_,l),"[":RegExp("([[\\]])|"+_,l),"{":RegExp("([{}])|"+_,l)},p="{ }",f=["{","}","{","}",/{[^}]*}/,/\\([{}])/g,/\\({)|{/g,RegExp("\\\\(})|([[({])|(})|"+_,l),p,/^\s*{\^?\s*([$\w]+)(?:\s*,\s*(\S+))?\s+in\s+(\S.*)\s*}/,/(^|[^\\]){=[\S\s]*?}/],v=t,m=[];return a.split=function(t,e,i){function n(t){e||r?l.push(t&&t.replace(i[5],"$1")):l.push(t)}function a(t,e,i){var n,a=h[e];for(a.lastIndex=i,i=1;(n=a.exec(t))&&(!n[1]||(n[1]===e?++i:--i)););return i?t.length:a.lastIndex}i||(i=m);var s,r,o,c,l=[],d=i[6];for(r=o=d.lastIndex=0;s=d.exec(t);){if(c=s.index,r){if(s[2]){d.lastIndex=a(t,s[2],d.lastIndex);continue}if(!s[3])continue}s[1]||(n(t.slice(o,c)),o=d.lastIndex,d=i[6+(r^=1)],d.lastIndex=o)}return t&&o<t.length&&n(t.slice(o)),l},a.hasExpr=function(t){return m[4].test(t)},a.loopKeys=function(t){var e=t.match(m[9]);return e?{key:e[1],pos:e[2],val:m[0]+e[3].trim()+m[1]}:{val:t.trim()}},a.hasRaw=function(t){return m[10].test(t)},a.array=function(t){return t?n(t):m},Object.defineProperty(a,"settings",{set:r,get:function(){return c}}),a.settings="undefined"!=typeof W&&W.settings||{},a.set=s,a.R_STRINGS=u,a.R_MLCOMMS=d,a.S_QBLOCKS=_,a}(),rt=function(){function e(t,e){return t?(o[t]||(o[t]=n(t))).call(e,i):t}function i(t,i){e.errorHandler&&(t.riotData={tagName:i&&i.root&&i.root.tagName,_riot_id:i&&i._riot_id},e.errorHandler(t))}function n(t){var e=a(t);return"try{return "!==e.slice(0,11)&&(e="return "+e),new Function("E",e+";")}function a(t){var e,i=[],n=st.split(t.replace(/\u2057/g,'"'),1);if(n.length>2||n[0]){var a,r,o=[];for(a=r=0;a<n.length;++a)e=n[a],e&&(e=1&a?s(e,1,i):'"'+e.replace(/\\/g,"\\\\").replace(/\r\n?|\n/g,"\\n").replace(/"/g,'\\"')+'"')&&(o[r++]=e);e=2>r?o[0]:"["+o.join(",")+'].join("")'}else e=s(n[1],0,i);return i[0]&&(e=e.replace(l,function(t,e){return i[e].replace(/\r/g,"\\r").replace(/\n/g,"\\n")})),e}function s(t,e,i){function n(e,i){var n,a=1,s=d[e];for(s.lastIndex=i.lastIndex;n=s.exec(t);)if(n[0]===e)++a;else if(!--a)break;i.lastIndex=a?t.length:s.lastIndex}if("="===t[0]&&(t=t.slice(1)),t=t.replace(c,function(t,e){return t.length>2&&!e?""+(i.push(t)-1)+"~":t}).replace(/\s+/g," ").trim().replace(/\ ?([[\({},?\.:])\ ?/g,"$1")){for(var a,s=[],o=0;t&&(a=t.match(u))&&!a.index;){var l,_,h=/,|([[{(])|$/g;for(t=RegExp.rightContext,l=a[2]?i[a[2]].slice(1,-1).trim().replace(/\s+/g," "):a[1];_=(a=h.exec(t))[1];)n(_,h);_=t.slice(0,a.index),t=RegExp.rightContext,s[o++]=r(_,1,l)}t=o?o>1?"["+s.join(",")+'].join(" ").trim()':s[0]:r(t,e)}return t}function r(t,e,i){var n;return t=t.replace(h,function(t,e,i,a,s){return i&&(a=n?0:a+t.length,"this"!==i&&"global"!==i&&"window"!==i?(t=e+'("'+i+_+i,a&&(n="."===(s=s[a])||"("===s||"["===s)):a&&(n=!p.test(s.slice(a)))),t}),n&&(t="try{return "+t+"}catch(e){E(e,this)}"),i?t=(n?"function(){"+t+"}.call(this)":"("+t+")")+'?"'+i+'":""':e&&(t="function(v){"+(n?t.replace("return ","v="):"v=("+t+")")+';return v||v===0?v:""}.call(this)'),t}var o={};e.haveRaw=st.hasRaw,e.hasExpr=st.hasExpr,e.loopKeys=st.loopKeys,e.errorHandler=null;var c=RegExp(st.S_QBLOCKS,"g"),l=/\x01(\d+)~/g,d={"(":/[()]/g,"[":/[[\]]/g,"{":/[{}]/g},u=/^(?:(-?[_A-Za-z\xA0-\xFF][-\w\xA0-\xFF]*)|\x01(\d+)~):/,_='"in this?this:'+("object"!=typeof t?"global":"window")+").",h=/[,{][$\w]+:|(^ *|[^$\w\.])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\w]))([$_A-Za-z][$\w]*)/g,p=/^(?=(\.[$\w]+))\1(?:[^.[(]|$)/;return e.parse=function(t){return t},e.version=st.version="v2.3.21",e}(),ot=function dt(){function dt(i,n){var a=i&&i.match(/^\s*<([-\w]+)/),s=a&&a[1].toLowerCase(),r=I("div");return i=e(i,n),o.test(s)?r=t(r,i,s):r.innerHTML=i,r.stub=!0,r}function t(t,e,i){var n="o"===i[0],a=n?"select>":"table>";if(t.innerHTML="<"+a+e.trim()+"</"+a,a=t.firstChild,n)a.selectedIndex=-1;else{var s=r[i];s&&1===a.childElementCount&&(a=Y(s,a))}return a}function e(t,e){if(!i.test(t))return t;var r={};return e=e&&e.replace(a,function(t,e,i){return r[e]=r[e]||i,""}).trim(),t.replace(s,function(t,e,i){return r[e]||i||""}).replace(n,function(t,i){return e||i||""})}var i=/<yield\b/i,n=/<yield\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,a=/<yield\s+to=['"]([^'">]*)['"]\s*>([\S\s]*?)<\/yield\s*>/gi,s=/<yield\s+from=['"]?([-\w]+)['"]?\s*(?:\/>|>([\S\s]*?)<\/yield\s*>)/gi,r={tr:"tbody",th:"tr",td:"tr",col:"colgroup"},o=at&&10>at?it:/^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/;return dt}(),ct=function(e){if(!t)return{add:function(){},inject:function(){}};var i=function(){var t=I("style");b(t,"type","text/css");var e=Y("style[type=riot]");return e?(e.id&&(t.id=e.id),e.parentNode.replaceChild(t,e)):document.getElementsByTagName("head")[0].appendChild(t),t}(),n=i.styleSheet,a="";return Object.defineProperty(e,"styleNode",{value:i,writable:!0}),{add:function(t){a+=t},inject:function(){a&&(n?n.cssText+=a:i.innerHTML+=a,a="")}}}(W),lt=function(t){var e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame;if(!e||/iP(ad|hone|od).*OS 6/.test(t.navigator.userAgent)){var i=0;e=function(t){var e=Date.now(),n=Math.max(16-(e-i),0);setTimeout(function(){t(i=e+n)},n)}}return e}(t||{});W.util={brackets:st,tmpl:rt},W.mixin=function(){var t={};return function(e,i){return v(e)?(i=e,void(t[V]=P(t[V]||{},i))):i?void(t[e]=i):t[e]}}(),W.tag=function(t,e,i,n,a){return f(n)&&(a=n,/^[\w\-]+\s?=/.test(i)?(n=i,i=""):n=""),i&&(f(i)?a=i:ct.add(i)),t=t.toLowerCase(),F[t]={name:t,tmpl:e,attrs:n,fn:a},t},W.tag2=function(t,e,i,n,a){return i&&ct.add(i),F[t]={name:t,tmpl:e,attrs:n,fn:a},t},W.mount=function(t,e,i){function n(t){var e="";return p(t,function(t){/[^-\w]/.test(t)||(t=t.trim().toLowerCase(),e+=",["+J+'="'+t+'"],['+K+'="'+t+'"]')}),e}function a(){var t=Object.keys(F);return t+n(t)}function s(t){if(t.tagName){var n=y(t,J)||y(t,K);e&&n!==e&&(n=e,b(t,J,e));var a=B(t,n||t.tagName.toLowerCase(),i);a&&c.push(a)}else t.length&&p(t,s)}var r,o,c=[];if(ct.inject(),v(e)&&(i=e,e=0),typeof t===G?("*"===t?t=o=a():t+=n(t.split(/, */)),r=t?j(t):[]):r=t,"*"===e){if(e=o||a(),r.tagName)r=j(e,r);else{var l=[];p(r,function(t){l.push(j(e,t))}),r=l}e=0}return s(r),c},W.update=function(){return p(q,function(t){t.update()})},W.Tag=d,typeof exports===Q?module.exports=W:typeof define===et&&typeof define.amd!==tt?define(function(){return W}):t.riot=W}("undefined"!=typeof window?window:void 0);var Zepto=function(){function t(t){return null==t?String(t):V[Z.call(t)]||"object"}function e(e){return"function"==t(e)}function i(t){return null!=t&&t==t.window}function n(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function a(e){return"object"==t(e)}function s(t){return a(t)&&!i(t)&&Object.getPrototypeOf(t)==Object.prototype}function r(t){return"number"==typeof t.length}function o(t){return $.call(t,function(t){return null!=t})}function c(t){return t.length>0?S.fn.concat.apply([],t):t}function l(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function d(t){return t in O?O[t]:O[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function u(t,e){return"number"!=typeof e||N[l(t)]?e:e+"px"}function _(t){var e,i;return D[t]||(e=A.createElement(t),A.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),D[t]=i),D[t]}function h(t){return"children"in t?L.call(t.children):S.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function p(t,e){var i,n=t?t.length:0;for(i=0;n>i;i++)this[i]=t[i];this.length=n,this.selector=e||""}function f(t,e,i){for(k in e)i&&(s(e[k])||Q(e[k]))?(s(e[k])&&!s(t[k])&&(t[k]={}),Q(e[k])&&!Q(t[k])&&(t[k]=[]),f(t[k],e[k],i)):e[k]!==x&&(t[k]=e[k])}function v(t,e){return null==e?S(t):S(t).filter(e)}function m(t,i,n,a){return e(i)?i.call(t,n,a):i}function g(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function y(t,e){var i=t.className||"",n=i&&i.baseVal!==x;return e===x?n?i.baseVal:i:void(n?i.baseVal=e:t.className=e)}function b(t){try{return t?"true"==t||("false"==t?!1:"null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?S.parseJSON(t):t):t}catch(e){return t}}function w(t,e){e(t);for(var i=0,n=t.childNodes.length;n>i;i++)w(t.childNodes[i],e)}var x,k,S,T,E,C,P=[],M=P.concat,$=P.filter,L=P.slice,A=window.document,D={},O={},N={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},I=/^\s*<(\w+|!)[^>]*>/,j=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,X=/^(?:body|html)$/i,R=/([A-Z])/g,H=["val","css","html","text","data","width","height","offset"],z=["after","prepend","before","append"],B=A.createElement("table"),W=A.createElement("tr"),U={tr:A.createElement("tbody"),tbody:B,thead:B,tfoot:B,td:W,th:W,"*":A.createElement("div")},q=/complete|loaded|interactive/,F=/^[\w-]*$/,V={},Z=V.toString,K={},J=A.createElement("div"),G={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Q=Array.isArray||function(t){return t instanceof Array};return K.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,a=t.parentNode,s=!a;return s&&(a=J).appendChild(t),n=~K.qsa(a,e).indexOf(t),s&&J.removeChild(t),n},E=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},C=function(t){return $.call(t,function(e,i){return t.indexOf(e)==i})},K.fragment=function(t,e,i){var n,a,r;return j.test(t)&&(n=S(A.createElement(RegExp.$1))),n||(t.replace&&(t=t.replace(Y,"<$1></$2>")),e===x&&(e=I.test(t)&&RegExp.$1),e in U||(e="*"),r=U[e],r.innerHTML=""+t,n=S.each(L.call(r.childNodes),function(){r.removeChild(this)})),s(i)&&(a=S(n),S.each(i,function(t,e){H.indexOf(t)>-1?a[t](e):a.attr(t,e)})),n},K.Z=function(t,e){return new p(t,e)},K.isZ=function(t){return t instanceof K.Z},K.init=function(t,i){var n;if(!t)return K.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&I.test(t))n=K.fragment(t,RegExp.$1,i),t=null;else{if(i!==x)return S(i).find(t);n=K.qsa(A,t)}else{if(e(t))return S(A).ready(t);if(K.isZ(t))return t;if(Q(t))n=o(t);else if(a(t))n=[t],t=null;else if(I.test(t))n=K.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==x)return S(i).find(t);n=K.qsa(A,t)}}return K.Z(n,t)},S=function(t,e){return K.init(t,e)},S.extend=function(t){var e,i=L.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach(function(i){f(t,i,e)}),t},K.qsa=function(t,e){var i,n="#"==e[0],a=!n&&"."==e[0],s=n||a?e.slice(1):e,r=F.test(s);return t.getElementById&&r&&n?(i=t.getElementById(s))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:L.call(r&&!n&&t.getElementsByClassName?a?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},S.contains=A.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},S.type=t,S.isFunction=e,S.isWindow=i,S.isArray=Q,S.isPlainObject=s,S.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},S.inArray=function(t,e,i){return P.indexOf.call(e,t,i)},S.camelCase=E,S.trim=function(t){return null==t?"":String.prototype.trim.call(t)},S.uuid=0,S.support={},S.expr={},S.noop=function(){},S.map=function(t,e){var i,n,a,s=[];if(r(t))for(n=0;n<t.length;n++)i=e(t[n],n),null!=i&&s.push(i);else for(a in t)i=e(t[a],a),null!=i&&s.push(i);return c(s)},S.each=function(t,e){var i,n;if(r(t)){for(i=0;i<t.length;i++)if(e.call(t[i],i,t[i])===!1)return t}else for(n in t)if(e.call(t[n],n,t[n])===!1)return t;return t},S.grep=function(t,e){return $.call(t,e)},window.JSON&&(S.parseJSON=JSON.parse),S.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){V["[object "+e+"]"]=e.toLowerCase()}),S.fn={constructor:K.Z,length:0,forEach:P.forEach,reduce:P.reduce,push:P.push,sort:P.sort,splice:P.splice,indexOf:P.indexOf,concat:function(){var t,e,i=[];for(t=0;t<arguments.length;t++)e=arguments[t],i[t]=K.isZ(e)?e.toArray():e;return M.apply(K.isZ(this)?this.toArray():this,i)},map:function(t){return S(S.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return S(L.apply(this,arguments))},ready:function(t){return q.test(A.readyState)&&A.body?t(S):A.addEventListener("DOMContentLoaded",function(){t(S)},!1),this},get:function(t){return t===x?L.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return P.every.call(this,function(e,i){return t.call(e,i,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):S($.call(this,function(e){return K.matches(e,t)}))},add:function(t,e){return S(C(this.concat(S(t,e))))},is:function(t){return this.length>0&&K.matches(this[0],t)},not:function(t){var i=[];if(e(t)&&t.call!==x)this.each(function(e){t.call(this,e)||i.push(this)});else{var n="string"==typeof t?this.filter(t):r(t)&&e(t.item)?L.call(t):S(t);this.forEach(function(t){n.indexOf(t)<0&&i.push(t)})}return S(i)},has:function(t){return this.filter(function(){return a(t)?S.contains(this,t):S(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!a(t)?t:S(t)},last:function(){var t=this[this.length-1];return t&&!a(t)?t:S(t)},find:function(t){var e,i=this;return e=t?"object"==typeof t?S(t).filter(function(){var t=this;return P.some.call(i,function(e){return S.contains(e,t)})}):1==this.length?S(K.qsa(this[0],t)):this.map(function(){return K.qsa(this,t)}):S()},closest:function(t,e){var i=this[0],a=!1;for("object"==typeof t&&(a=S(t));i&&!(a?a.indexOf(i)>=0:K.matches(i,t));)i=i!==e&&!n(i)&&i.parentNode;return S(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=S.map(i,function(t){return(t=t.parentNode)&&!n(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return v(e,t)},parent:function(t){return v(C(this.pluck("parentNode")),t)},children:function(t){return v(this.map(function(){return h(this)}),t)},contents:function(){return this.map(function(){return this.contentDocument||L.call(this.childNodes)})},siblings:function(t){return v(this.map(function(t,e){return $.call(h(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return S.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=_(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var i=e(t);if(this[0]&&!i)var n=S(t).get(0),a=n.parentNode||this.length>1;return this.each(function(e){S(this).wrapAll(i?t.call(this,e):a?n.cloneNode(!0):n)})},wrapAll:function(t){if(this[0]){S(this[0]).before(t=S(t));for(var e;(e=t.children()).length;)t=e.first();S(t).append(this)}return this},wrapInner:function(t){var i=e(t);return this.each(function(e){var n=S(this),a=n.contents(),s=i?t.call(this,e):t;a.length?a.wrapAll(s):n.append(s)})},unwrap:function(){return this.parent().each(function(){S(this).replaceWith(S(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=S(this);(t===x?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return S(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return S(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each(function(e){var i=this.innerHTML;S(this).empty().append(m(this,t,e,i))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){var i=m(this,t,e,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,e){var i;return"string"!=typeof t||1 in arguments?this.each(function(i){if(1===this.nodeType)if(a(t))for(k in t)g(this,k,t[k]);else g(this,t,m(this,e,i,this.getAttribute(t)))}):this.length&&1===this[0].nodeType?!(i=this[0].getAttribute(t))&&t in this[0]?this[0][t]:i:x},removeAttr:function(t){return this.each(function(){1===this.nodeType&&t.split(" ").forEach(function(t){g(this,t)},this)})},prop:function(t,e){return t=G[t]||t,1 in arguments?this.each(function(i){this[t]=m(this,e,i,this[t])}):this[0]&&this[0][t]},data:function(t,e){var i="data-"+t.replace(R,"-$1").toLowerCase(),n=1 in arguments?this.attr(i,e):this.attr(i);return null!==n?b(n):x},val:function(t){return 0 in arguments?this.each(function(e){this.value=m(this,t,e,this.value)}):this[0]&&(this[0].multiple?S(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each(function(e){var i=S(this),n=m(this,t,e,i.offset()),a=i.offsetParent().offset(),s={top:n.top-a.top,left:n.left-a.left};"static"==i.css("position")&&(s.position="relative"),i.css(s)});if(!this.length)return null;if(!S.contains(A.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,i){if(arguments.length<2){var n,a=this[0];if(!a)return;if(n=getComputedStyle(a,""),"string"==typeof e)return a.style[E(e)]||n.getPropertyValue(e);if(Q(e)){var s={};return S.each(e,function(t,e){s[e]=a.style[E(e)]||n.getPropertyValue(e)}),s}}var r="";if("string"==t(e))i||0===i?r=l(e)+":"+u(e,i):this.each(function(){this.style.removeProperty(l(e))});else for(k in e)e[k]||0===e[k]?r+=l(k)+":"+u(k,e[k])+";":this.each(function(){this.style.removeProperty(l(k))});return this.each(function(){this.style.cssText+=";"+r})},index:function(t){return t?this.indexOf(S(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?P.some.call(this,function(t){return this.test(y(t))},d(t)):!1},addClass:function(t){return t?this.each(function(e){if("className"in this){
T=[];var i=y(this),n=m(this,t,e,i);n.split(/\s+/g).forEach(function(t){S(this).hasClass(t)||T.push(t)},this),T.length&&y(this,i+(i?" ":"")+T.join(" "))}}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===x)return y(this,"");T=y(this),m(this,t,e,T).split(/\s+/g).forEach(function(t){T=T.replace(d(t)," ")}),y(this,T.trim())}})},toggleClass:function(t,e){return t?this.each(function(i){var n=S(this),a=m(this,t,i,y(this));a.split(/\s+/g).forEach(function(t){(e===x?!n.hasClass(t):e)?n.addClass(t):n.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===x?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===x?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),n=X.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(S(t).css("margin-top"))||0,i.left-=parseFloat(S(t).css("margin-left"))||0,n.top+=parseFloat(S(e[0]).css("border-top-width"))||0,n.left+=parseFloat(S(e[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||A.body;t&&!X.test(t.nodeName)&&"static"==S(t).css("position");)t=t.offsetParent;return t})}},S.fn.detach=S.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});S.fn[t]=function(a){var s,r=this[0];return a===x?i(r)?r["inner"+e]:n(r)?r.documentElement["scroll"+e]:(s=this.offset())&&s[t]:this.each(function(e){r=S(this),r.css(t,m(this,a,e,r[t]()))})}}),z.forEach(function(e,i){var n=i%2;S.fn[e]=function(){var e,a,s=S.map(arguments,function(i){return e=t(i),"object"==e||"array"==e||null==i?i:K.fragment(i)}),r=this.length>1;return s.length<1?this:this.each(function(t,e){a=n?e:e.parentNode,e=0==i?e.nextSibling:1==i?e.firstChild:2==i?e:null;var o=S.contains(A.documentElement,a);s.forEach(function(t){if(r)t=t.cloneNode(!0);else if(!a)return S(t).remove();a.insertBefore(t,e),o&&w(t,function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},S.fn[n?e+"To":"insert"+(i?"Before":"After")]=function(t){return S(t)[e](this),this}}),K.Z.prototype=p.prototype=S.fn,K.uniq=C,K.deserializeValue=b,S.zepto=K,S}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function e(e,i,n){var a=t.Event(i);return t(e).trigger(a,n),!a.isDefaultPrevented()}function i(t,i,n,a){return t.global?e(i||g,n,a):void 0}function n(e){e.global&&0===t.active++&&i(e,null,"ajaxStart")}function a(e){e.global&&!--t.active&&i(e,null,"ajaxStop")}function s(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||i(e,n,"ajaxBeforeSend",[t,e])===!1?!1:void i(e,n,"ajaxSend",[t,e])}function r(t,e,n,a){var s=n.context,r="success";n.success.call(s,t,r,e),a&&a.resolveWith(s,[t,r,e]),i(n,s,"ajaxSuccess",[e,n,t]),c(r,e,n)}function o(t,e,n,a,s){var r=a.context;a.error.call(r,n,e,t),s&&s.rejectWith(r,[n,e,t]),i(a,r,"ajaxError",[n,a,t||e]),c(e,n,a)}function c(t,e,n){var s=n.context;n.complete.call(s,e,t),i(n,s,"ajaxComplete",[e,n]),a(n)}function l(){}function d(t){return t&&(t=t.split(";",2)[0]),t&&(t==k?"html":t==x?"json":b.test(t)?"script":w.test(t)&&"xml")||"text"}function u(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function _(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=u(e.url,e.data),e.data=void 0)}function h(e,i,n,a){return t.isFunction(i)&&(a=n,n=i,i=void 0),t.isFunction(n)||(a=n,n=void 0),{url:e,data:i,success:n,dataType:a}}function p(e,i,n,a){var s,r=t.isArray(i),o=t.isPlainObject(i);t.each(i,function(i,c){s=t.type(c),a&&(i=n?a:a+"["+(o||"object"==s||"array"==s?i:"")+"]"),!a&&r?e.add(c.name,c.value):"array"==s||!n&&"object"==s?p(e,c,n,i):e.add(i,c)})}var f,v,m=0,g=window.document,y=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,x="application/json",k="text/html",S=/^\s*$/,T=g.createElement("a");T.href=window.location.href,t.active=0,t.ajaxJSONP=function(e,i){if(!("type"in e))return t.ajax(e);var n,a,c=e.jsonpCallback,l=(t.isFunction(c)?c():c)||"jsonp"+ ++m,d=g.createElement("script"),u=window[l],_=function(e){t(d).triggerHandler("error",e||"abort")},h={abort:_};return i&&i.promise(h),t(d).on("load error",function(s,c){clearTimeout(a),t(d).off().remove(),"error"!=s.type&&n?r(n[0],h,e,i):o(null,c||"error",h,e,i),window[l]=u,n&&t.isFunction(u)&&u(n[0]),u=n=void 0}),s(h,e)===!1?(_("abort"),h):(window[l]=function(){n=arguments},d.src=e.url.replace(/\?(.+)=\?/,"?$1="+l),g.head.appendChild(d),e.timeout>0&&(a=setTimeout(function(){_("timeout")},e.timeout)),h)},t.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:x,xml:"application/xml, text/xml",html:k,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var i,a,c=t.extend({},e||{}),h=t.Deferred&&t.Deferred();for(f in t.ajaxSettings)void 0===c[f]&&(c[f]=t.ajaxSettings[f]);n(c),c.crossDomain||(i=g.createElement("a"),i.href=c.url,i.href=i.href,c.crossDomain=T.protocol+"//"+T.host!=i.protocol+"//"+i.host),c.url||(c.url=window.location.toString()),(a=c.url.indexOf("#"))>-1&&(c.url=c.url.slice(0,a)),_(c);var p=c.dataType,m=/\?.+=\?/.test(c.url);if(m&&(p="jsonp"),c.cache!==!1&&(e&&e.cache===!0||"script"!=p&&"jsonp"!=p)||(c.url=u(c.url,"_="+Date.now())),"jsonp"==p)return m||(c.url=u(c.url,c.jsonp?c.jsonp+"=?":c.jsonp===!1?"":"callback=?")),t.ajaxJSONP(c,h);var y,b=c.accepts[p],w={},x=function(t,e){w[t.toLowerCase()]=[t,e]},k=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,E=c.xhr(),C=E.setRequestHeader;if(h&&h.promise(E),c.crossDomain||x("X-Requested-With","XMLHttpRequest"),x("Accept",b||"*/*"),(b=c.mimeType||b)&&(b.indexOf(",")>-1&&(b=b.split(",",2)[0]),E.overrideMimeType&&E.overrideMimeType(b)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&x("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(v in c.headers)x(v,c.headers[v]);if(E.setRequestHeader=x,E.onreadystatechange=function(){if(4==E.readyState){E.onreadystatechange=l,clearTimeout(y);var e,i=!1;if(E.status>=200&&E.status<300||304==E.status||0==E.status&&"file:"==k){if(p=p||d(c.mimeType||E.getResponseHeader("content-type")),"arraybuffer"==E.responseType||"blob"==E.responseType)e=E.response;else{e=E.responseText;try{"script"==p?(0,eval)(e):"xml"==p?e=E.responseXML:"json"==p&&(e=S.test(e)?null:t.parseJSON(e))}catch(n){i=n}if(i)return o(i,"parsererror",E,c,h)}r(e,E,c,h)}else o(E.statusText||null,E.status?"error":"abort",E,c,h)}},s(E,c)===!1)return E.abort(),o(null,"abort",E,c,h),E;if(c.xhrFields)for(v in c.xhrFields)E[v]=c.xhrFields[v];var P="async"in c?c.async:!0;E.open(c.type,c.url,P,c.username,c.password);for(v in w)C.apply(E,w[v]);return c.timeout>0&&(y=setTimeout(function(){E.onreadystatechange=l,E.abort(),o(null,"timeout",E,c,h)},c.timeout)),E.send(c.data?c.data:null),E},t.get=function(){return t.ajax(h.apply(null,arguments))},t.post=function(){var e=h.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=h.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,i,n){if(!this.length)return this;var a,s=this,r=e.split(/\s/),o=h(e,i,n),c=o.success;return r.length>1&&(o.url=r[0],a=r[1]),o.success=function(e){s.html(a?t("<div>").html(e.replace(y,"")).find(a):e),c&&c.apply(s,arguments)},t.ajax(o),this};var E=encodeURIComponent;t.param=function(e,i){var n=[];return n.add=function(e,i){t.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(E(e)+"="+E(i))},p(n,e,i),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){function e(e,n){var c=e[o],l=c&&a[c];if(void 0===n)return l||i(e);if(l){if(n in l)return l[n];var d=r(n);if(d in l)return l[d]}return s.call(t(e),n)}function i(e,i,s){var c=e[o]||(e[o]=++t.uuid),l=a[c]||(a[c]=n(e));return void 0!==i&&(l[r(i)]=s),l}function n(e){var i={};return t.each(e.attributes||c,function(e,n){0==n.name.indexOf("data-")&&(i[r(n.name.replace("data-",""))]=t.zepto.deserializeValue(n.value))}),i}var a={},s=t.fn.data,r=t.camelCase,o=t.expando="Zepto"+ +new Date,c=[];t.fn.data=function(n,a){return void 0===a?t.isPlainObject(n)?this.each(function(e,a){t.each(n,function(t,e){i(a,t,e)})}):0 in this?e(this[0],n):void 0:this.each(function(){i(this,n,a)})},t.fn.removeData=function(e){return"string"==typeof e&&(e=e.split(/\s+/)),this.each(function(){var i=this[o],n=i&&a[i];n&&t.each(e||n,function(t){delete n[e?r(this):t]})})},["remove","empty"].forEach(function(e){var i=t.fn[e];t.fn[e]=function(){var t=this.find("*");return"remove"===e&&(t=t.add(this)),t.removeData(),i.call(this)}})}(Zepto),function(t){function e(t,e){var i=this.os={},n=this.browser={},a=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),s=t.match(/(Android);?[\s\/]+([\d.]+)?/),r=!!t.match(/\(Macintosh\; Intel /),o=t.match(/(iPad).*OS\s([\d_]+)/),c=t.match(/(iPod)(.*OS\s([\d_]+))?/),l=!o&&t.match(/(iPhone\sOS)\s([\d_]+)/),d=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=/Win\d{2}|Windows/.test(e),_=t.match(/Windows Phone ([\d.]+)/),h=d&&t.match(/TouchPad/),p=t.match(/Kindle\/([\d.]+)/),f=t.match(/Silk\/([\d._]+)/),v=t.match(/(BlackBerry).*Version\/([\d.]+)/),m=t.match(/(BB10).*Version\/([\d.]+)/),g=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),y=t.match(/PlayBook/),b=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),w=t.match(/Firefox\/([\d.]+)/),x=t.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),k=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),S=!b&&t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),T=S||t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(n.webkit=!!a)&&(n.version=a[1]),s&&(i.android=!0,i.version=s[2]),l&&!c&&(i.ios=i.iphone=!0,i.version=l[2].replace(/_/g,".")),o&&(i.ios=i.ipad=!0,i.version=o[2].replace(/_/g,".")),c&&(i.ios=i.ipod=!0,i.version=c[3]?c[3].replace(/_/g,"."):null),_&&(i.wp=!0,i.version=_[1]),d&&(i.webos=!0,i.version=d[2]),h&&(i.touchpad=!0),v&&(i.blackberry=!0,i.version=v[2]),m&&(i.bb10=!0,i.version=m[2]),g&&(i.rimtabletos=!0,i.version=g[2]),y&&(n.playbook=!0),p&&(i.kindle=!0,i.version=p[1]),f&&(n.silk=!0,n.version=f[1]),!f&&i.android&&t.match(/Kindle Fire/)&&(n.silk=!0),b&&(n.chrome=!0,n.version=b[1]),w&&(n.firefox=!0,n.version=w[1]),x&&(i.firefoxos=!0,i.version=x[1]),k&&(n.ie=!0,n.version=k[1]),T&&(r||i.ios||u)&&(n.safari=!0,i.ios||(n.version=T[1])),S&&(n.webview=!0),i.tablet=!!(o||y||s&&!t.match(/Mobile/)||w&&t.match(/Tablet/)||k&&!t.match(/Phone/)&&t.match(/Touch/)),i.phone=!(i.tablet||i.ipod||!(s||l||d||v||m||b&&t.match(/Android/)||b&&t.match(/CriOS\/([\d.]+)/)||w&&t.match(/Mobile/)||k&&t.match(/Touch/)))}e.call(t,navigator.userAgent,navigator.platform),t.__detect=e}(Zepto),function(t){function e(t){return t._zid||(t._zid=_++)}function i(t,i,s,r){if(i=n(i),i.ns)var o=a(i.ns);return(v[e(t)]||[]).filter(function(t){return t&&(!i.e||t.e==i.e)&&(!i.ns||o.test(t.ns))&&(!s||e(t.fn)===e(s))&&(!r||t.sel==r)})}function n(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function a(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function s(t,e){return t.del&&!g&&t.e in y||!!e}function r(t){return b[t]||g&&y[t]||t}function o(i,a,o,c,d,_,h){var p=e(i),f=v[p]||(v[p]=[]);a.split(/\s/).forEach(function(e){if("ready"==e)return t(document).ready(o);var a=n(e);a.fn=o,a.sel=d,a.e in b&&(o=function(e){var i=e.relatedTarget;return!i||i!==this&&!t.contains(this,i)?a.fn.apply(this,arguments):void 0}),a.del=_;var p=_||o;a.proxy=function(t){if(t=l(t),!t.isImmediatePropagationStopped()){t.data=c;var e=p.apply(i,t._args==u?[t]:[t].concat(t._args));return e===!1&&(t.preventDefault(),t.stopPropagation()),e}},a.i=f.length,f.push(a),"addEventListener"in i&&i.addEventListener(r(a.e),a.proxy,s(a,h))})}function c(t,n,a,o,c){var l=e(t);(n||"").split(/\s/).forEach(function(e){i(t,e,a,o).forEach(function(e){delete v[l][e.i],"removeEventListener"in t&&t.removeEventListener(r(e.e),e.proxy,s(e,c))})})}function l(e,i){return(i||!e.isDefaultPrevented)&&(i||(i=e),t.each(S,function(t,n){var a=i[t];e[t]=function(){return this[n]=w,a&&a.apply(i,arguments)},e[n]=x}),(i.defaultPrevented!==u?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=w)),e}function d(t){var e,i={originalEvent:t};for(e in t)k.test(e)||t[e]===u||(i[e]=t[e]);return l(i,t)}var u,_=1,h=Array.prototype.slice,p=t.isFunction,f=function(t){return"string"==typeof t},v={},m={},g="onfocusin"in window,y={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents",t.event={add:o,remove:c},t.proxy=function(i,n){var a=2 in arguments&&h.call(arguments,2);if(p(i)){var s=function(){return i.apply(n,a?a.concat(h.call(arguments)):arguments)};return s._zid=e(i),s}if(f(n))return a?(a.unshift(i[n],i),t.proxy.apply(null,a)):t.proxy(i[n],i);throw new TypeError("expected function")},t.fn.bind=function(t,e,i){return this.on(t,e,i)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var w=function(){return!0},x=function(){return!1},k=/^([A-Z]|returnValue$|layer[XY]$)/,S={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,i){return this.on(e,t,i)},t.fn.undelegate=function(t,e,i){return this.off(e,t,i)},t.fn.live=function(e,i){return t(document.body).delegate(this.selector,e,i),this},t.fn.die=function(e,i){return t(document.body).undelegate(this.selector,e,i),this},t.fn.on=function(e,i,n,a,s){var r,l,_=this;return e&&!f(e)?(t.each(e,function(t,e){_.on(t,i,n,e,s)}),_):(f(i)||p(a)||a===!1||(a=n,n=i,i=u),(a===u||n===!1)&&(a=n,n=u),a===!1&&(a=x),_.each(function(u,_){s&&(r=function(t){return c(_,t.type,a),a.apply(this,arguments)}),i&&(l=function(e){var n,s=t(e.target).closest(i,_).get(0);return s&&s!==_?(n=t.extend(d(e),{currentTarget:s,liveFired:_}),(r||a).apply(s,[n].concat(h.call(arguments,1)))):void 0}),o(_,e,a,n,i,l||r)}))},t.fn.off=function(e,i,n){var a=this;return e&&!f(e)?(t.each(e,function(t,e){a.off(t,i,e)}),a):(f(i)||p(n)||n===!1||(n=i,i=u),n===!1&&(n=x),a.each(function(){c(this,e,n,i)}))},t.fn.trigger=function(e,i){return e=f(e)||t.isPlainObject(e)?t.Event(e):l(e),e._args=i,this.each(function(){e.type in y&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,i)})},t.fn.triggerHandler=function(e,n){var a,s;return this.each(function(r,o){a=d(f(e)?t.Event(e):e),a._args=n,a.target=o,t.each(i(o,e.type||e),function(t,e){return s=e.proxy(a),a.isImmediatePropagationStopped()?!1:void 0})}),s},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}}),t.Event=function(t,e){f(t)||(e=t,t=e.type);var i=document.createEvent(m[t]||"Events"),n=!0;if(e)for(var a in e)"bubbles"==a?n=!!e[a]:i[a]=e[a];return i.initEvent(t,n,!0),l(i)}}(Zepto),function(t){t.fn.serializeArray=function(){var e,i,n=[],a=function(t){return t.forEach?t.forEach(a):void n.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,function(n,s){i=s.type,e=s.name,e&&"fieldset"!=s.nodeName.toLowerCase()&&!s.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||s.checked)&&a(t(s).val())}),n},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var i=t.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){function e(t){return"tagName"in t?t:t.parentNode}if(t.os.ios){var i,n={};t(document).bind("gesturestart",function(t){var a=Date.now();a-(n.last||a),n.target=e(t.target),i&&clearTimeout(i),n.e1=t.scale,n.last=a}).bind("gesturechange",function(t){n.e2=t.scale}).bind("gestureend",function(e){n.e2>0?(0!=Math.abs(n.e1-n.e2)&&t(n.target).trigger("pinch")&&t(n.target).trigger("pinch"+(n.e1-n.e2>0?"In":"Out")),n.e1=n.e2=n.last=0):"last"in n&&(n={})}),["pinch","pinchIn","pinchOut"].forEach(function(e){t.fn[e]=function(t){return this.bind(e,t)}})}}(Zepto),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t){try{return e(t)}catch(i){return null}}}}(),function(t){String.prototype.trim===t&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===t&&(Array.prototype.reduce=function(e){if(void 0===this||null===this)throw new TypeError;var i,n=Object(this),a=n.length>>>0,s=0;if("function"!=typeof e)throw new TypeError;if(0==a&&1==arguments.length)throw new TypeError;if(arguments.length>=2)i=arguments[1];else for(;;){if(s in n){i=n[s++];break}if(++s>=a)throw new TypeError}for(;a>s;)s in n&&(i=e.call(t,i,n[s],s,n)),s++;return i})}(),function(t){function e(e){return e=t(e),!(!e.width()&&!e.height())&&"none"!==e.css("display")}function i(t,e){t=t.replace(/=#\]/g,'="#"]');var i,n,a=o.exec(t);if(a&&a[2]in r&&(i=r[a[2]],n=a[3],t=a[1],n)){var s=Number(n);n=isNaN(s)?n.replace(/^["']|["']$/g,""):s}return e(t,i,n)}var n=t.zepto,a=n.qsa,s=n.matches,r=t.expr[":"]={visible:function(){return e(this)?this:void 0},hidden:function(){return e(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(t){return 0===t?this:void 0},last:function(t,e){return t===e.length-1?this:void 0},eq:function(t,e,i){return t===i?this:void 0},contains:function(e,i,n){return t(this).text().indexOf(n)>-1?this:void 0},has:function(t,e,i){return n.qsa(this,i).length?this:void 0}},o=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),c=/^\s*>/,l="Zepto"+ +new Date;n.qsa=function(e,s){return i(s,function(i,r,o){try{var d;!i&&r?i="*":c.test(i)&&(d=t(e).addClass(l),i="."+l+" "+i);var u=a(e,i)}catch(_){throw console.error("error performing selector: %o",s),_}finally{d&&d.removeClass(l)}return r?n.uniq(t.map(u,function(t,e){return r.call(t,e,u,o)})):u})},n.matches=function(t,e){return i(e,function(e,i,n){return(!e||s(t,e))&&(!i||i.call(t,null,n)===t)})}}(Zepto),function(t){function e(t,e,i,n){return Math.abs(t-e)>=Math.abs(i-n)?t-e>0?"Left":"Right":i-n>0?"Up":"Down"}function i(){d=null,_.last&&(_.el.trigger("longTap"),_={})}function n(){d&&clearTimeout(d),d=null}function a(){o&&clearTimeout(o),c&&clearTimeout(c),l&&clearTimeout(l),d&&clearTimeout(d),o=c=l=d=null,_={}}function s(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function r(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}var o,c,l,d,u,_={},h=750;t(document).ready(function(){var p,f,v,m,g=0,y=0;"MSGesture"in window&&(u=new MSGesture,u.target=document.body),t(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(_.el.trigger("swipe"),_.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(e){(!(m=r(e,"down"))||s(e))&&(v=m?e:e.touches[0],e.touches&&1===e.touches.length&&_.x2&&(_.x2=void 0,_.y2=void 0),p=Date.now(),f=p-(_.last||p),_.el=t("tagName"in v.target?v.target:v.target.parentNode),o&&clearTimeout(o),_.x1=v.pageX,_.y1=v.pageY,f>0&&250>=f&&(_.isDoubleTap=!0),_.last=p,d=setTimeout(i,h),u&&m&&u.addPointer(e.pointerId))}).on("touchmove MSPointerMove pointermove",function(t){(!(m=r(t,"move"))||s(t))&&(v=m?t:t.touches[0],n(),_.x2=v.pageX,_.y2=v.pageY,g+=Math.abs(_.x1-_.x2),y+=Math.abs(_.y1-_.y2))}).on("touchend MSPointerUp pointerup",function(i){(!(m=r(i,"up"))||s(i))&&(n(),_.x2&&Math.abs(_.x1-_.x2)>30||_.y2&&Math.abs(_.y1-_.y2)>30?l=setTimeout(function(){_.el.trigger("swipe"),_.el.trigger("swipe"+e(_.x1,_.x2,_.y1,_.y2)),_={}},0):"last"in _&&(30>g&&30>y?c=setTimeout(function(){var e=t.Event("tap");e.cancelTouch=a,_.el.trigger(e),_.isDoubleTap?(_.el&&_.el.trigger("doubleTap"),_={}):o=setTimeout(function(){o=null,_.el&&_.el.trigger("singleTap"),_={}},250)},0):_={}),g=y=0)}).on("touchcancel MSPointerCancel pointercancel",a),t(window).on("scroll",a)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto),function(t,e,i){function n(t,i){this.wrapper="string"==typeof t?e.querySelector(t):t,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={snapThreshold:.25,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,click:!1,tap:!1,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0};for(var n in i)this.options[n]=i[n];this.translateZ=this.options.HWCompositing&&s.hasPerspective?" translateZ(0)":"",this.options.useTransition=s.hasTransition&&this.options.useTransition,this.options.useTransform=s.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?s.ease[this.options.bounceEasing]||s.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}var a=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},s=function(){function n(t){return r===!1?!1:""===r?t:r+t.charAt(0).toUpperCase()+t.substr(1)}var a={},s=e.createElement("div").style,r=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],i=0,n=e.length;n>i;i++)if(t=e[i]+"ransform",t in s)return e[i].substr(0,e[i].length-1);return!1}();a.getTime=Date.now||function(){return(new Date).getTime()},a.extend=function(t,e){for(var i in e)t[i]=e[i]},a.addEvent=function(t,e,i,n){t.addEventListener(e,i,!!n)},a.removeEvent=function(t,e,i,n){t.removeEventListener(e,i,!!n)},a.prefixPointerEvent=function(e){return t.MSPointerEvent?"MSPointer"+e.charAt(9).toUpperCase()+e.substr(10):e},a.momentum=function(t,e,n,a,s,r){var o,c,l=t-e,d=i.abs(l)/n;return r=void 0===r?.0034:r,o=t+d*d/(2*r)*(0>l?-1:1),c=d/r,a>o?(o=s?a-s/2.5*(d/8):a,l=i.abs(o-t),c=l/d):o>0&&(o=s?s/2.5*(d/8):0,l=i.abs(t)+o,c=l/d),{destination:i.round(o),duration:c}};var o=n("transform");a.extend(a,{hasTransform:o!==!1,hasPerspective:n("perspective")in s,hasTouch:"ontouchstart"in t,hasPointer:t.PointerEvent||t.MSPointerEvent,hasTransition:n("transition")in s}),a.isBadAndroid=/Android /.test(t.navigator.appVersion)&&!/Chrome\/\d/.test(t.navigator.appVersion),a.extend(a.style={},{transform:o,transitionTimingFunction:n("transitionTimingFunction"),transitionDuration:n("transitionDuration"),transitionDelay:n("transitionDelay"),transformOrigin:n("transformOrigin")}),a.hasClass=function(t,e){var i=new RegExp("(^|\\s)"+e+"(\\s|$)");return i.test(t.className)},a.addClass=function(t,e){if(!a.hasClass(t,e)){var i=t.className.split(" ");i.push(e),t.className=i.join(" ")}},a.removeClass=function(t,e){if(a.hasClass(t,e)){var i=new RegExp("(^|\\s)"+e+"(\\s|$)","g");t.className=t.className.replace(i," ")}},a.offset=function(t){for(var e=-t.offsetLeft,i=-t.offsetTop;t=t.offsetParent;)e-=t.offsetLeft,i-=t.offsetTop;return{left:e,top:i}},a.preventDefaultException=function(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1},a.extend(a.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});var c=function(t,e,i){var n=1==e?1-t:2==e?t:.5>t?2*t:2*(1-t);return 1==i?n*=n:2==i?n*=n*n:3==i?n*=n*n*n:4==i&&(n*=n*n*n*n),1==e?1-n:2==e?n:.5>t?n/2:1-n/2};return a.extend(a.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(t){return i.sqrt(1- --t*t)}},easeInOutCirc:{style:"cubic-bezier(0.785, 0.135, 0.15, 0.86)",fn:function(t){return(t*=2)<1?-.5*(i.sqrt(1-t*t)-1):.5*(i.sqrt(1-(t-=2)*t)+1)}},cubicOut:{style:"cubic-bezier(0.215, 0.61, 0.355, 1)",fn:function(t){return c(t,1,2)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(t){var e=4;return(t-=1)*t*((e+1)*t+e)+1}},bounce:{style:"",fn:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},elastic:{style:"",fn:function(t){var e=.22,n=.4;return 0===t?0:1==t?1:n*i.pow(2,-10*t)*i.sin((t-e/4)*(2*i.PI)/e)+1}}}),a.tap=function(t,i){var n=e.createEvent("Event");n.initEvent(i,!0,!0),n.pageX=t.pageX,n.pageY=t.pageY,t.target.dispatchEvent(n)},a.click=function(t){var i,n=t.target;/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||(i=e.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,t.view,1,n.screenX,n.screenY,n.clientX,n.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null),i._constructed=!0,n.dispatchEvent(i))},a}();n.prototype={version:"5.1.3",_init:function(){this._initEvents(),this.options.snap&&this._initSnap()},destroy:function(){this._initEvents(!0),this._execEvent("destroy")},_transitionEnd:function(t){t.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this.moved=!1,this._execEvent("scrollEnd")))},_start:function(t){if((1==s.eventType[t.type]||0===t.button)&&this.enabled&&(!this.initiated||s.eventType[t.type]===this.initiated)){!this.options.preventDefault||s.isBadAndroid||s.preventDefaultException(t.target,this.options.preventDefaultException)||t.preventDefault();var e,n=t.touches?t.touches[0]:t;this.initiated=s.eventType[t.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this._transitionTime(),this.startTime=s.getTime(),this.options.useTransition&&this.isInTransition?(this.isInTransition=!1,e=this.getComputedPosition(),this._translate(i.round(e.x),i.round(e.y)),this.moved=!1,this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this.moved=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=n.pageX,this.pointY=n.pageY,this.moved=!1,this._execEvent("beforeScrollStart"),this._execEvent("grab")}},_move:function(t){if(this.enabled&&s.eventType[t.type]===this.initiated){this.options.preventDefault&&t.preventDefault();var e,n,a,r,o=t.touches?t.touches[0]:t,c=o.pageX-this.pointX,l=o.pageY-this.pointY,d=s.getTime();if(this.pointX=o.pageX,this.pointY=o.pageY,this.distX+=c,this.distY+=l,a=i.abs(this.distX),r=i.abs(this.distY),!(d-this.endTime>300&&10>a&&10>r)){if(this.directionLocked||this.options.freeScroll||(a>r+this.options.directionLockThreshold?this.directionLocked="h":r>=a+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)t.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)t.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);c=0}c=this.hasHorizontalScroll?c:0,l=this.hasVerticalScroll?l:0,e=this.x+c,n=this.y+l,(e>0||e<this.maxScrollX)&&(e=this.options.bounce?this.x+c/3:e>0?0:this.maxScrollX),(n>0||n<this.maxScrollY)&&(n=this.options.bounce?this.y+l/3:n>0?0:this.maxScrollY),this.directionX=c>0?-1:0>c?1:0,this.directionY=l>0?-1:0>l?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(e,n),d-this.startTime>300&&(this.startTime=d,this.startX=this.x,this.startY=this.y),this.options.probeType>1&&this._execEvent("scroll")}}},reset:function(){this.isInTransition=0,this.initiated=0,this.endTime=s.getTime()},_end:function(t){if(this.options.marquee){if(!this.enabled)return;this.options.preventDefault&&!s.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault(),this.moved||(this.startX=i.round(this.x),this.startY=i.round(this.y));var e,n,a=(t.changedTouches?t.changedTouches[0]:t,s.getTime()-this.startTime),r=i.round(this.x),o=i.round(this.y),c=i.abs(r-this.startX),l=i.abs(o-this.startY),d=0,u="";if(this.isInTransition=0,this.initiated=0,this.endTime=s.getTime(),this.resetPosition(this.options.bounceTime))return;if(this.scrollTo(r,o),this.options.momentum&&300>a&&this.moved&&(e=this.hasHorizontalScroll?s.momentum(this.x,this.startX,a,this.maxScrollX,this.minScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:r,duration:0},n=this.hasVerticalScroll?s.momentum(this.y,this.startY,a,this.maxScrollY,this.minScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:o,duration:0},r=e.destination,o=n.destination,d=i.max(e.duration,n.duration),this.isInTransition=1),this.options.snap){var _=this._nearestSnap(r,o);this.currentPage=_,d=this.options.snapSpeed||i.max(i.max(i.min(i.abs(r-_.x),1e3),i.min(i.abs(o-_.y),1e3)),this.options.snapSpeed),r=_.x,o=_.y,this.directionX=0,this.directionY=0,u=this.options.bounceEasing}if(r==this.x&&o==this.y||((r>0||r<this.maxScrollX||o>0||o<this.maxScrollY)&&(u=s.ease.quadratic),o<this.maxScrollY&&(o=this.maxScrollY),r<this.maxScrollX&&(r=this.maxScrollX),o>0&&(o=0),r>0&&(r=0),r==this.x&&o==this.y||this.scrollTo(r,o,d,u)),!this.moved)return this.options.tap&&s.tap(t,this.options.tap),this.options.click&&s.click(t),void this._execEvent("scrollCancel");this.moved=!1}else{if(!this.enabled||s.eventType[t.type]!==this.initiated)return;this.options.preventDefault&&!s.preventDefaultException(t.target,this.options.preventDefaultException)&&t.preventDefault();var e,n,a=(t.changedTouches?t.changedTouches[0]:t,s.getTime()-this.startTime),r=i.round(this.x),o=i.round(this.y),c=i.abs(r-this.startX),l=i.abs(o-this.startY),d=0,u="";if(this.isInTransition=0,this.initiated=0,this.endTime=s.getTime(),this.resetPosition(this.options.bounceTime))return;if(this.scrollTo(r,o),!this.moved)return this.options.tap&&s.tap(t,this.options.tap),this.options.click&&s.click(t),void this._execEvent("scrollCancel");if(this._events.flick&&200>a&&100>c&&100>l)return void this._execEvent("flick");if(this.options.momentum&&300>a&&(e=this.hasHorizontalScroll?s.momentum(this.x,this.startX,a,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{
destination:r,duration:0},n=this.hasVerticalScroll?s.momentum(this.y,this.startY,a,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:o,duration:0},r=e.destination,o=n.destination,d=i.max(e.duration,n.duration),this.isInTransition=1),this.options.snap){var _=this._nearestSnap(r,o);this.currentPage=_,d=this.options.snapSpeed||i.max(i.max(i.min(i.abs(r-_.x),1e3),i.min(i.abs(o-_.y),1e3)),this.options.snapSpeed),r=_.x,o=_.y,this.directionX=0,this.directionY=0,u=this.options.bounceEasing}if(r!=this.x||o!=this.y)return(r>0||r<this.maxScrollX||o>0||o<this.maxScrollY)&&(u=s.ease.quadratic),void this.scrollTo(r,o,d,u);this._execEvent("scrollEnd")}},_resize:function(){var t=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){t.refresh()},this.options.resizePolling)},resetPosition:function(t){var e=this.x,i=this.y;return t=t||0,!this.hasHorizontalScroll||this.x>0?e=0:this.x<this.maxScrollX&&(e=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),e==this.x&&i==this.y?!1:(this.scrollTo(e,i,t,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=s.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(t,e){this._events[t]||(this._events[t]=[]),this._events[t].push(e)},off:function(t,e){if(this._events[t]){var i=this._events[t].indexOf(e);i>-1&&this._events[t].splice(i,1)}},_execEvent:function(t){if(this._events[t]){var e=0,i=this._events[t].length;if(i)for(;i>e;e++)this._events[t][e].apply(this,[].slice.call(arguments,1))}},scrollBy:function(t,e,i,n){t=this.x+t,e=this.y+e,i=i||0,this.scrollTo(t,e,i,n)},scrollTo:function(t,e,i,n){this.hold||(n=n||s.ease.circular,this.isInTransition=this.options.useTransition&&i>0,!i||this.options.useTransition&&n.style?(this._transitionTimingFunction(n.style),this._transitionTime(i),this._translate(t,e)):this._animate(t,e,i,n.fn))},scrollToElement:function(t,e,n,a,r){if(t=t.nodeType?t:this.scroller.querySelector(t)){var o=s.offset(t);o.left-=this.wrapperOffset.left,o.top-=this.wrapperOffset.top,n===!0&&(n=i.round(t.offsetWidth/2-this.wrapper.offsetWidth/2)),a===!0&&(a=i.round(t.offsetHeight/2-this.wrapper.offsetHeight/2)),o.left-=n||0,o.top-=a||0,o.left=o.left>0?0:o.left<this.maxScrollX?this.maxScrollX:o.left,o.top=o.top>0?0:o.top<this.maxScrollY?this.maxScrollY:o.top,e=void 0===e||null===e||"auto"===e?i.max(i.abs(this.x-o.left),i.abs(this.y-o.top)):e,this.scrollTo(o.left,o.top,e,r)}},_transitionTime:function(t){t=t||0,this.scrollerStyle[s.style.transitionDuration]=t+"ms",!t&&s.isBadAndroid&&(this.scrollerStyle[s.style.transitionDuration]="0.001s")},_transitionTimingFunction:function(t){this.scrollerStyle[s.style.transitionTimingFunction]=t},_translate:function(t,e){if(!this.hold&&(this.options.useTransform&&!this.options.fake?this.scrollerStyle[s.style.transform]="translate("+t+"px,"+i.round(e)+"px)"+this.translateZ:this.options.fake||(t=i.round(t),e=i.round(e),this.scrollerStyle.left=t+"px",this.scrollerStyle.top=e+"px"),this.x=t,this.y=e,this.indicators))for(var n=this.indicators.length;n--;)this.indicators[n].updatePosition()},_initEvents:function(e){var i=e?s.removeEvent:s.addEvent,n=this.options.bindToWrapper?this.wrapper:t;i(t,"orientationchange",this),i(t,"resize",this),this.options.click&&i(this.wrapper,"click",this,!0),this.options.disableMouse||(i(this.wrapper,"mousedown",this),i(n,"mousemove",this),i(n,"mousecancel",this),i(n,"mouseup",this)),s.hasPointer&&!this.options.disablePointer&&(i(this.wrapper,s.prefixPointerEvent("pointerdown"),this),i(n,s.prefixPointerEvent("pointermove"),this),i(n,s.prefixPointerEvent("pointercancel"),this),i(n,s.prefixPointerEvent("pointerup"),this)),s.hasTouch&&!this.options.disableTouch&&(i(this.wrapper,"touchstart",this),i(n,"touchmove",this),i(n,"touchcancel",this),i(n,"touchend",this)),i(this.scroller,"transitionend",this),i(this.scroller,"webkitTransitionEnd",this),i(this.scroller,"oTransitionEnd",this),i(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,i,n=t.getComputedStyle(this.scroller,null);return this.options.useTransform?(n=n[s.style.transform].split(")")[0].split(", "),e=+(n[12]||n[4]),i=+(n[13]||n[5])):(e=+n.left.replace(/[^-\d.]/g,""),i=+n.top.replace(/[^-\d.]/g,"")),{x:e,y:i}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,e,n,a,s,r,o=0,c=0,l=0,d=this.options.snapStepX||this.wrapperWidth,u=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(n=i.round(d/2),a=i.round(u/2);l>-this.scrollerWidth;){for(this.pages[o]=[],t=0,s=0;s>-this.scrollerHeight;)this.pages[o][t]={x:i.max(l,this.maxScrollX),y:i.max(s,this.maxScrollY),width:d,height:u,cx:l-n,cy:s-a},s-=u,t++;l-=d,o++}else for(r=this.options.snap,t=r.length,e=-1;t>o;o++)(0===o||r[o].offsetLeft<=r[o-1].offsetLeft)&&(c=0,e++),this.pages[c]||(this.pages[c]=[]),l=i.max(-r[o].offsetLeft,this.maxScrollX),s=i.max(-r[o].offsetTop,this.maxScrollY),n=l-i.round(r[o].offsetWidth/2),a=s-i.round(r[o].offsetHeight/2),this.pages[c][e]={x:l,y:s,width:r[o].offsetWidth,height:r[o].offsetHeight,cx:n,cy:a},l>this.maxScrollX&&c++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=i.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var t=this.options.snapSpeed||i.max(i.max(i.min(i.abs(this.x-this.startX),1e3),i.min(i.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,t)})},_nearestSnap:function(t,e){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var n=0,a=this.pages.length,s=0;if(i.abs(t-this.absStartX)<this.snapThresholdX&&i.abs(e-this.absStartY)<this.snapThresholdY)return this.currentPage;for(t>0?t=0:t<this.maxScrollX&&(t=this.maxScrollX),e>0?e=0:e<this.maxScrollY&&(e=this.maxScrollY);a>n;n++)if(t>=this.pages[n][0].cx){t=this.pages[n][0].x;break}for(a=this.pages[n].length;a>s;s++)if(e>=this.pages[0][s].cy){e=this.pages[0][s].y;break}return n==this.currentPage.pageX&&(n+=this.directionX,0>n?n=0:n>=this.pages.length&&(n=this.pages.length-1),t=this.pages[n][0].x),s==this.currentPage.pageY&&(s+=this.directionY,0>s?s=0:s>=this.pages[0].length&&(s=this.pages[0].length-1),e=this.pages[0][s].y),{x:t,y:e,pageX:n,pageY:s}},goToPage:function(t,e,n,a){a=a||this.options.bounceEasing,t>=this.pages.length?t=this.pages.length-1:0>t&&(t=0),e>=this.pages[t].length?e=this.pages[t].length-1:0>e&&(e=0);var s=this.pages[t][e].x,r=this.pages[t][e].y;n=void 0===n?this.options.snapSpeed||i.max(i.max(i.min(i.abs(s-this.x),1e3),i.min(i.abs(r-this.y),1e3)),300):n,this.currentPage={x:s,y:r,pageX:t,pageY:e},this.scrollTo(s,r,n,a)},_animate:function(t,e,i,n){function r(){if(o.lastAnimation[0]==t&&o.lastAnimation[1]==e){var _,h,p,f=s.getTime();return f>=u?(o.isAnimating=!1,o._translate(t,e),void(o.resetPosition(o.options.bounceTime)||(o.moved=!1,o._execEvent("scrollEnd")))):void(o.isAnimating&&(f=(f-d)/i,p=n(f),_=(t-c)*p+c,h=(e-l)*p+l,o._translate(_,h),o.isAnimating&&a(r),3==o.options.probeType&&o._execEvent("scroll")))}}var o=this,c=this.x,l=this.y,d=s.getTime(),u=d+i;this.lastAnimation=[t,e,i],o.isAnimating=!0,o._execEvent("scrollStart"),r()},handleEvent:function(t){switch(t.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(t);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(t);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(t);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(t);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(t);break;case"keydown":this._key(t);break;case"click":t._constructed||(t.preventDefault(),t.stopPropagation())}}},n.utils=s,"undefined"!=typeof module&&module.exports?module.exports=n:t.IScroll=n}(window,document,Math),window.Modernizr=function(t,e,i){function n(t){y.cssText=t}function a(t,e){return n(b.join(t+";")+(e||""))}function s(t,e){return typeof t===e}function r(t,e){return!!~(""+t).indexOf(e)}function o(t,e){for(var n in t){var a=t[n];if(!r(a,"-")&&y[a]!==i)return"pfx"==e?a:!0}return!1}function c(t,e,n){for(var a in t){var r=e[t[a]];if(r!==i)return n===!1?t[a]:s(r,"function")?r.bind(n||e):r}return!1}function l(t,e,i){var n=t.charAt(0).toUpperCase()+t.slice(1),a=(t+" "+x.join(n+" ")+n).split(" ");return s(e,"string")||s(e,"undefined")?o(a,e):(a=(t+" "+k.join(n+" ")+n).split(" "),c(a,e,i))}var d,u,_,h="2.8.3",p={},f=!0,v=e.documentElement,m="modernizr",g=e.createElement(m),y=g.style,b=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),w="Webkit Moz O ms",x=w.split(" "),k=w.toLowerCase().split(" "),S={svg:"http://www.w3.org/2000/svg"},T={},E=[],C=E.slice,P=function(t,i,n,a){var s,r,o,c,l=e.createElement("div"),d=e.body,u=d||e.createElement("body");if(parseInt(n,10))for(;n--;)o=e.createElement("div"),o.id=a?a[n]:m+(n+1),l.appendChild(o);return s=["&#173;",'<style id="s',m,'">',t,"</style>"].join(""),l.id=m,(d?l:u).innerHTML+=s,u.appendChild(l),d||(u.style.background="",u.style.overflow="hidden",c=v.style.overflow,v.style.overflow="hidden",v.appendChild(u)),r=i(l,t),d?l.parentNode.removeChild(l):(u.parentNode.removeChild(u),v.style.overflow=c),!!r},M={}.hasOwnProperty;_=s(M,"undefined")||s(M.call,"undefined")?function(t,e){return e in t&&s(t.constructor.prototype[e],"undefined")}:function(t,e){return M.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var i=C.call(arguments,1),n=function(){if(this instanceof n){var a=function(){};a.prototype=e.prototype;var s=new a,r=e.apply(s,i.concat(C.call(arguments)));return Object(r)===r?r:s}return e.apply(t,i.concat(C.call(arguments)))};return n}),T.touch=function(){var i;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?i=!0:P(["@media (",b.join("touch-enabled),("),m,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){i=9===t.offsetTop}),i},T.rgba=function(){return n("background-color:rgba(150,255,150,.5)"),r(y.backgroundColor,"rgba")},T.opacity=function(){return a("opacity:.55"),/^0.55$/.test(y.opacity)},T.cssanimations=function(){return l("animationName")},T.cssgradients=function(){var t="background-image:",e="gradient(linear,left top,right bottom,from(#9f9),to(white));",i="linear-gradient(left top,#9f9, white);";return n((t+"-webkit- ".split(" ").join(e+t)+b.join(i+t)).slice(0,-t.length)),r(y.backgroundImage,"gradient")},T.csstransforms=function(){return!!l("transform")},T.csstransitions=function(){return l("transition")},T.video=function(){var t=e.createElement("video"),i=!1;try{(i=!!t.canPlayType)&&(i=new Boolean(i),i.ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),i.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),i.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return i},T.svg=function(){return!!e.createElementNS&&!!e.createElementNS(S.svg,"svg").createSVGRect},T.inlinesvg=function(){var t=e.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==S.svg};for(var $ in T)_(T,$)&&(u=$.toLowerCase(),p[u]=T[$](),E.push((p[u]?"":"no-")+u));return p.addTest=function(t,e){if("object"==typeof t)for(var n in t)_(t,n)&&p.addTest(n,t[n]);else{if(t=t.toLowerCase(),p[t]!==i)return p;e="function"==typeof e?e():e,"undefined"!=typeof f&&f&&(v.className+=" m-"+(e?"":"no-")+t),p[t]=e}return p},n(""),g=d=null,p._version=h,p._prefixes=b,p._domPrefixes=k,p._cssomPrefixes=x,p.testProp=function(t){return o([t])},p.testAllProps=l,p.testStyles=P,p.prefixed=function(t,e,i){return e?l(t,e,i):l(t,"pfx")},v.className=v.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" m-js m-"+E.join(" m-"):""),p}(this,this.document),function(t,e,i){function n(t){return"[object Function]"==v.call(t)}function a(t){return"string"==typeof t}function s(){}function r(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function o(){var t=m.shift();g=1,t?t.t?p(function(){("c"==t.t?_.injectCss:_.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),o()):g=0}function c(t,i,n,a,s,c,l){function d(e){if(!h&&r(u.readyState)&&(y.r=h=1,!g&&o(),u.onload=u.onreadystatechange=null,e)){"img"!=t&&p(function(){w.removeChild(u)},50);for(var n in E[i])E[i].hasOwnProperty(n)&&E[i][n].onload()}}var l=l||_.errorTimeout,u=e.createElement(t),h=0,v=0,y={t:n,s:i,e:s,a:c,x:l};1===E[i]&&(v=1,E[i]=[]),"object"==t?u.data=i:(u.src=i,u.type=t),u.width=u.height="0",u.onerror=u.onload=u.onreadystatechange=function(){d.call(this,v)},m.splice(a,0,y),"img"!=t&&(v||2===E[i]?(w.insertBefore(u,b?null:f),p(d,l)):E[i].push(u))}function l(t,e,i,n,s){return g=0,e=e||"j",a(t)?c("c"==e?k:x,t,e,this.i++,i,n,s):(m.splice(this.i++,0,t),1==m.length&&o()),this}function d(){var t=_;return t.loader={load:l,i:0},t}var u,_,h=e.documentElement,p=t.setTimeout,f=e.getElementsByTagName("script")[0],v={}.toString,m=[],g=0,y="MozAppearance"in h.style,b=y&&!!e.createRange().compareNode,w=b?h:f.parentNode,h=t.opera&&"[object Opera]"==v.call(t.opera),h=!!e.attachEvent&&!h,x=y?"object":h?"script":"img",k=h?"script":x,S=Array.isArray||function(t){return"[object Array]"==v.call(t)},T=[],E={},C={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};_=function(t){function e(t){var e,i,n,t=t.split("!"),a=T.length,s=t.pop(),r=t.length,s={url:s,origUrl:s,prefixes:t};for(i=0;r>i;i++)n=t[i].split("="),(e=C[n.shift()])&&(s=e(s,n));for(i=0;a>i;i++)s=T[i](s);return s}function r(t,a,s,r,o){var c=e(t),l=c.autoCallback;c.url.split(".").pop().split("?").shift(),c.bypass||(a&&(a=n(a)?a:a[t]||a[r]||a[t.split("/").pop().split("?")[0]]),c.instead?c.instead(t,a,s,r,o):(E[c.url]?c.noexec=!0:E[c.url]=1,s.load(c.url,c.forceCSS||!c.forceJS&&"css"==c.url.split(".").pop().split("?").shift()?"c":i,c.noexec,c.attrs,c.timeout),(n(a)||n(l))&&s.load(function(){d(),a&&a(c.origUrl,o,r),l&&l(c.origUrl,o,r),E[c.url]=2})))}function o(t,e){function i(t,i){if(t){if(a(t))i||(u=function(){var t=[].slice.call(arguments);_.apply(this,t),h()}),r(t,u,e,0,l);else if(Object(t)===t)for(c in o=function(){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i}(),t)t.hasOwnProperty(c)&&(!i&&!--o&&(n(u)?u=function(){var t=[].slice.call(arguments);_.apply(this,t),h()}:u[c]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),h()}}(_[c])),r(t[c],u,e,c,l))}else!i&&h()}var o,c,l=!!t.test,d=t.load||t.both,u=t.callback||s,_=u,h=t.complete||s;i(l?t.yep:t.nope,!!d),d&&i(d)}var c,l,u=this.yepnope.loader;if(a(t))r(t,0,u,0);else if(S(t))for(c=0;c<t.length;c++)l=t[c],a(l)?r(l,0,u,0):S(l)?_(l):Object(l)===l&&o(l,u);else Object(t)===t&&o(t,u)},_.addPrefix=function(t,e){C[t]=e},_.addFilter=function(t){T.push(t)},_.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",u=function(){e.removeEventListener("DOMContentLoaded",u,0),e.readyState="complete"},0)),t.yepnope=d(),t.yepnope.executeStack=o,t.yepnope.injectJs=function(t,i,n,a,c,l){var d,u,h=e.createElement("script"),a=a||_.errorTimeout;h.src=t;for(u in n)h.setAttribute(u,n[u]);i=l?o:i||s,h.onreadystatechange=h.onload=function(){!d&&r(h.readyState)&&(d=1,i(),h.onload=h.onreadystatechange=null)},p(function(){d||(d=1,i(1))},a),c?h.onload():f.parentNode.insertBefore(h,f)},t.yepnope.injectCss=function(t,i,n,a,r,c){var l,a=e.createElement("link"),i=c?o:i||s;a.href=t,a.rel="stylesheet",a.type="text/css";for(l in n)a.setAttribute(l,n[l]);r||(document.body.appendChild(a),p(i,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},riot.tag2("alarm-list",'<div class="section__container"> <header class="header__black"> <div class="header__title">iCalendar</div> <div class="header__left"> <div class="alarm__list__close header__icon header__icon__back"></div> </div> <div class="header__right"> <div class="alarm__list__icon__add header__icon"></div> </div> </header> <div each="{item in data}" no-reorder class="alarm__list__item alarm__list__item{utils.getBetweenDay(item.date)} {alarm__list__item--off : !item.active}"> <div onclickdelegateupdate="{switchAlarm}" class="alarm__list__item__switch"></div> <div onclickdelegate="{openAlarm}" riot-item=".alarm__settings" riot-addclass="section--show" class="alarm__list__time"><span class="alarm__list__hour">{utils.getHours(item.time)}</span>:{utils.getMinutes(item.time)}</div> <div onclickdelegate="{openPhone}" riot-item=".alarm__settings" riot-addclass="section--show" class="alarm__list__text"> <div if="{item.phone}" class="alarm__list__phone">{item.phone}</div> <div class="alarm__list__when"><strong class="alarm__list__strong">{utils.getDate(item.date)}</strong><virtual if="{item.name}">, {item.name}</virtual></div> </div> <div class="alarm__list__days"> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Пн⁗}">Пн</div> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Вт⁗}">Вт</div> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Ср⁗}">Ср</div> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Чт⁗}">Чт</div> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Пт⁗}">Пт</div> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Сб⁗}">Сб</div> <div class="alarm__list__days__item {alarm__list__days__item--active : utils.dayOfWeek(item.date) === ⁗Вс⁗}">Вс</div> </div> <div onclickdelegate="{removeAlarm}" class="alarm__list__item__remove"></div> </div> </div> <div if="{!data.length}" class="section__wrapper__alarm__empty"> <div class="section__wrapper__alarm__empty__text">Сейчас нет активных напоминаний</div> </div>',"",'id="alarm__list__scroll" class="section__wrapper section__wrapper__alarm"',function(t){var e=this,i=$$(e.root),n=$$(e.parent.root);e.data=[{id:"1",date:"2016-04-04",time:"720",phone:"89160172086",name:"Ирина",active:!0},{id:"2",date:"2016-04-04",time:"750",phone:"89160172086",name:"Ирина",active:!0},{id:"3",date:"2016-04-05",time:"960",phone:"89855216480",name:"Ирина",active:!0},{id:"4",date:"2016-04-06",time:"1020",phone:"9264571727",name:"Ирина",active:!0},{id:"5",date:"2016-04-07",time:"1080",phone:"9264571727",name:"Ирина",active:!0},{id:"6",date:"2016-04-08",time:"1080",phone:"9264571727",name:"Ирина",active:!0},{id:"7",date:"2016-04-09",time:"1080",phone:"9264571727",name:"Ирина",active:!0}],e.data.forEach(function(t,i){e.data[i].date=tempus().calc({day:i}).format("%Y-%m-%d")}),e.utils={getBetweenDay:function(t){var e=tempus(t).between(tempus(),"day");return e=1>e&&e>-7?Math.abs(e)+1:-6>e?7:0},getDate:function(t){var e=tempus(t).between(tempus(),"day");return 0===e?"сегодня":-1===e?"завтра":tempus(t).format("%d, %b")},getHours:function(t){return Math.floor(t/60)},getMinutes:function(t){var e=t-60*Math.floor(t/60);return 10>e?"0"+e:e},dayOfWeek:function(t){return tempus(t).dayOfWeek("short")}},e.switchAlarm=function(){this.item.active?this.item.active=!1:this.item.active=!0},e.openAlarm=function(){e.settings.alarmShow({alarm:this.item,section:"time"})},e.openPhone=function(){e.settings.alarmShow({alarm:this.item,section:"phone"})},e.removeAlarm=function(t){var i=this,n=this.item.id,a=$$(t.target.parentNode);a.addClass("alarm__list__item--remove"),app.utils.onEndAnimation(a[0],function(){a[0].style[prefixed.transform]="",a[0].show=!1,e.data.forEach(function(t,i){t.id===n&&e.data.splice(i,1)}),i.update(),e.iScrollAlarmList.refresh()})},this.on("mount",function(){e.settings=e.parent.tags["alarm-settings"],i.find(".header__icon__back").on(clickEvent,function(){n.removeClass("section--show")}),e.iScrollAlarmList=new IScroll(i[0],{scrollX:!0,scrollY:!0}),function a(){app.utils.raf(a),app.utils.getScroll(e.iScrollAlarmList)}();var t=function(t,e){this.el=$$(t),this.items=e,this.touchStart(),this.touchMove(),this.touchEnd()};t.prototype={isAnimating:!1,startTime:null,firstTouch:{x:null,y:null},touchDelta:{x:null,y:null},touchStart:function(){var t=this;this.el.on(app.device.isMobile?"touchstart":"mousedown",this.items,function(e){e.preventDefault(),t.isAnimating=!1,t.item=e.currentTarget,t.startTime=t.getTime(),app.device.isMobile?t.firstTouch={x:parseInt(e.changedTouches[0].clientX),y:parseInt(e.changedTouches[0].clientY)}:t.firstTouch={x:parseInt(e.clientX),y:parseInt(e.clientY)}})},touchMove:function(){var t=this;this.el.on(app.device.isMobile?"touchmove":"mousemove",this.items,function(e){e.preventDefault();var i=function(){app.device.isMobile?t.touchDelta={x:parseInt(e.changedTouches[0].clientX)-t.firstTouch.x,y:Math.abs(parseInt(e.changedTouches[0].clientY)-t.firstTouch.y)}:t.touchDelta={x:parseInt(e.clientX)-t.firstTouch.x,y:Math.abs(parseInt(e.clientY)-t.firstTouch.y)},t.touchDelta.x<0?t.direction="left":t.direction="right";var i=t.getTime()-t.startTime,n=t.item&&t.item.show;100>i&&!t.isAnimating&&!n||t.touchDelta.y>12||!n&&(t.touchDelta.x>0||t.touchDelta.x>=-10)||n&&t.touchDelta.x<0||(t.isAnimating=!0,n?t.item.style[prefixed.transform]="translate3d("+(t.touchDelta.x-150)+"px, 0, 0)":t.item.style[prefixed.transform]="translate3d("+.4*t.touchDelta.x+"px, 0, 0)")};app.utils.raf(i),i()})},touchEnd:function(){var t=this;this.el.on(app.device.isMobile?"touchend":"mouseup",this.items,function(e){e.preventDefault(),t.item.show||"left"!==t.direction?t.item.show&&"right"===t.direction&&(Math.abs(t.touchDelta.x)>50?t.slide(!1):t.slide(!0)):Math.abs(t.touchDelta.x)>75?t.slide(!0):t.slide(!1),t.isAnimating=!1})},slide:function(t){var e=this;this.$item=$$(this.item),this.$item.addClass("alarm__list__item--animate"),t?(this.item.style[prefixed.transform]="translate3d(-150px, 0, 0)",this.item.show=!0):(this.item.style[prefixed.transform]="",this.item.show=!1),app.utils.onEndTransition(this.item,function(){e.$item.removeClass("alarm__list__item--animate")})},getTime:function(){return(new Date).getTime()}},new t(i[0],".alarm__list__item")})}),riot.tag2("alarm-section","<alarm-list></alarm-list> <alarm-settings></alarm-settings>","",'class="section section__right alarm-section section__header__nofixed"',function(t){}),riot.tag2("alarm-settings",'<div class="section__down__wrapper alarm__settings__wrapper {alarm__settings--off : !alarm.active} {alarm__settings--dateSelect : section === ⁗date⁗} {alarm__settings--phone : section === ⁗phone⁗}"> <div onclickdelegateupdate="{switcher}" class="alarm__settings__switch">ON</div> <div onclickdelegateupdate="{sectionDate}" class="alarm__settings__date__select"> <div class="alarm__settings__date__text"><span class="alarm__settings__day">{utils.dayAlarm(alarm.date)}</span> {utils.monthAlarm(alarm.date)}</div> <div class="alarm__settings__weekday">{utils.dayOfWeek(alarm.date)}</div> </div> <div class="alarm__settings__date"> <div class="alarm__settings__date__container"> <div id="alarm__settings__iscroll__days" class="alarm__settings__iscroll__wrapper"> <div class="alarm__settings__iscroll__container"> <div each="{item in days}" no-reorder data-value="{item.value}" class="alarm__settings__date__item {alarm__settings__item--active : item.active}">{item.title}</div> </div> </div> </div> <div class="alarm__settings__date__container"> <div id="alarm__settings__iscroll__months" class="alarm__settings__iscroll__wrapper"> <div class="alarm__settings__iscroll__container"> <div each="{item in months}" no-reorder data-value="{item.value}" class="alarm__settings__date__item {alarm__settings__item--active : item.active}">{item.title}</div> </div> </div> </div> <div onclickdelegate="{setDateNow}" class="alarm__settings__date__now"> <span class="alarm__settings__date__now__title">Сегодня:</span>&nbsp; {dateNow} </div> </div> <div class="alarm__settings__time"> <div class="alarm__settings__time__container"> <div id="alarm__settings__iscroll__hours" class="alarm__settings__iscroll__wrapper"> <div class="alarm__settings__iscroll__container"> <div each="{item in hours}" no-reorder data-value="{item.value}" class="alarm__settings__time__item {alarm__settings__item--active : item.active}">{item.title}</div> </div> </div> </div> <div class="alarm__settings__time__dots">:</div> <div class="alarm__settings__time__container"> <div id="alarm__settings__iscroll__minutes" class="alarm__settings__iscroll__wrapper"> <div class="alarm__settings__iscroll__container"> <div each="{item in minutes}" no-reorder data-value="{item.value}" class="alarm__settings__time__item {alarm__settings__item--active : item.active}">{item.title}</div> </div> </div> </div> </div> <div class="alarm__settings__phone"> <div class="alarm__settings__phone__text">{alarm.phone}</div> <div if="{alarm.name}" class="alarm__settings__phone__name">{alarm.name}</div> <div class="alarm__settings__phone__button"> <div class="alarm__settings__phone__button__text">позвонить</div> </div> </div> <div class="alarm__settings__buttons__left"> <div onclickdelegateupdate="{sectionTime}" class="alarm__settings__buttons__left__btn alarm__settings__button__options {alarm__settings__buttons__left__btn--active : section === ⁗time⁗ || section === ⁗date⁗}"></div> <div onclickdelegateupdate="{sectionPhone}" class="alarm__settings__buttons__left__btn alarm__settings__button__phone {alarm__settings__buttons__left__btn--active : section === ⁗phone⁗}"></div> </div> <div class="alarm__settings__buttons"> <div onclickdelegate="{success}" riot-item=".alarm__settings" riot-removeclass="section--show" class="alarm__settings__button alarm__settings__button__success"></div> <div onclickdelegate="{cancel}" riot-item=".alarm__settings" riot-removeclass="section--show" class="alarm__settings__button alarm__settings__button__cancel"></div> </div> </div>',"",'class="section section__down alarm__settings"',function(t){var e=this,i=$$(e.root),n=e.parent.tags["alarm-list"];e.activity=!1,e.section="time",e.alarm={id:null,show:!1,date:"2016-04-03",time:"720",active:!0},e.utils={dateNow:function(){return tempus()},getHours:function(t){for(var e=[],i=9;20>i;i++){var n=i;10>n&&(n="0"+n),e.push({title:n,value:i,active:t===i})}return e},getMinutes:function(t){for(var e=[],i=0;12>i;i++){var n=5*i;10>n&&(n="0"+(0===n?0:n)),e.push({title:n,value:5*i,active:t===i})}return e},getDays:function(t,e){for(var i=[],n=1;e+1>n;n++){var a=n;10>a&&(a="0"+a),i.push({title:a,value:n,active:t===n})}return i},getMonths:function(t){for(var e=[],i=1;13>i;i++)e.push({title:tempus({month:i}).format("%B"),value:i,active:t===i});return e},dayOfWeek:function(t){return tempus(t).dayOfWeek("short")},dayAlarm:function(t){return tempus(t).format("%d")},monthAlarm:function(t){return tempus(t).format("%B")}};var a=e.utils.dateNow();e.dayCount=a.dayCount(),e.hours=e.utils.getHours(),e.minutes=e.utils.getMinutes(),e.days=e.utils.getDays(a.format("%d"),31),e.months=e.utils.getMonths(a.format("%m")),e.switcher=function(){e.alarm.active?e.alarm.active=!1:e.alarm.active=!0},e.sectionTime=function(){e.section="time"},e.sectionDate=function(){"date"===e.section?e.section="time":e.section="date"},e.sectionPhone=function(){e.section="phone"},e.setDateNow=function(){var t=tempus();e.alarm.date=t.format("%Y-%m-%d");var i=t.format("%d"),n=t.format("%m"),a=t.dayCount();e.dayCount!=a&&(e.days=e.utils.getDays(i,a),e.daysScroll.refresh()),e.activity=!1,e.daysScroll.scrollTo(i),e.monthsScroll.scrollTo(n),this.update(),setTimeout(function(){e.activity=!0},500)},e.alarmShow=function(t){e.alarm=JSON.stringify(t.alarm),e.alarm=JSON.parse(e.alarm),e.section=t.section;var n=tempus(e.alarm.date).format("%d"),a=tempus(e.alarm.date).format("%m"),s=tempus(e.alarm.date).dayCount();e.dayCount!=s&&(e.days=e.utils.getDays(n,s),e.daysScroll.refresh()),e.daysScroll.scrollTo(n),e.monthsScroll.scrollTo(a),e.hoursScroll.scrollTo(Math.floor(e.alarm.time/60)),e.minutesScroll.scrollTo(e.alarm.time-60*Math.floor(e.alarm.time/60)),e.dateNow=tempus().format("%d %b, %a"),app.utils.onEndTransition(i[0],function(){e.activity=!0,e.update()})},e.success=function(){var t=60*e.hoursScroll.value+e.minutesScroll.value;e.alarm.time=t,n.data.forEach(function(t,i){t.id===e.alarm.id&&(n.data[i]=e.alarm)}),n.data.sort(e.compareDate),n.update(),e.activity=!1},e.cancel=function(){e.activity=!1},e.compareDate=function(t,e){return t.date>e.date?1:t.date<e.date?-1:void 0},this.on("mount",function(){var t=function(){};t.prototype={init:function(t,n){var a=this,s=0;this.wrapper=i.find("#alarm__settings__iscroll__"+t),this.container=this.wrapper.children(),this.step=parseInt(this.container.find(".alarm__settings__"+n+"__item:first").height()),this.item=n,this.container.find(".alarm__settings__"+n+"__item").each(function(){this.setAttribute("data-step",s),s+=a.step}),this.scroll=new IScroll(this.wrapper[0],{scrollX:!1,scrollY:!0,snap:!0,snapSpeed:"time"===n?200:300,probeType:3}),function r(){app.utils.raf(r),app.utils.getScroll(a.scroll)}(),this.wrapper.on(clickEvent,".alarm__settings__"+n+"__item",function(){a.scroll.scrollToElement(this,200,null,null,IScroll.utils.ease.cubicOut)}),this.scroll.on("scrollEnd",function(){var i=Math.abs(this.y),s=a.container.find(".alarm__settings__"+n+"__item[data-step='"+i+"']");if(s.length&&(s.addClass("alarm__settings__item--active").siblings().removeClass("alarm__settings__item--active"),a.value=parseInt(s[0].getAttribute("data-value")),e.activity&&("months"===t&&a.calcDays(),"days"===t||"months"===t))){var r=e.daysScroll.value,o=e.monthsScroll.value;10>r&&(r="0"+r),10>o&&(o="0"+o),console.log("scrollEnd"),e.alarm.date=e.alarm.date.replace(/(\d+)-\d+-\d+/g,"$1-"+o+"-"+r),e.update()}})},calcDays:function(){var t=tempus({month:this.value}).dayCount();e.dayCount!=t&&(e.days=e.utils.getDays(e.daysScroll.value,t),e.dayCount=parseInt(t),e.daysScroll.value&&e.daysScroll.value>e.dayCount&&(e.daysScroll.value=e.dayCount,e.daysScroll.scrollTo(e.dayCount)),e.daysScroll.refresh())},refresh:function(){this.scroll.refresh();var t=this,e=0;t.container.find(".alarm__settings__"+t.item+"__item").each(function(){this.setAttribute("data-step",e),e+=t.step})},scrollTo:function(t){(t||0===t)&&(t=parseInt(t),this.value=t,this.scroll.scrollToElement(this.container.find("div[data-value='"+t+"']")[0],1))}},e.hoursScroll=new t,e.hoursScroll.init("hours","time"),e.minutesScroll=new t,e.minutesScroll.init("minutes","time"),e.daysScroll=new t,e.daysScroll.init("days","date"),e.monthsScroll=new t,e.monthsScroll.init("months","date")})}),riot.tag2("alert-window",'<div class="alert__window__wrapper"> <div class="alert__window__header"> <div class="alert__window__title">{data.title}</div> <div if="{data.subtitle}" class="alert__window__subtitle"></div> <input if="{data.input}" type="text" class="alert__window__input" autocomplete="off" spellcheck="off"> </div> <div class="alert__window__buttons"> <div onclickdelegateupdate="{onCancel}" class="alert__window__button {alert__window__button--active : data.button === ⁗cancel⁗}">{data.cancel && data.cancel.title ? data.cancel.title : ⁗Отмена⁗}</div> <div onclickdelegateupdate="{onSuccess}" class="alert__window__button {alert__window__button--active : data.button === ⁗success⁗}">{data.success && data.success.title ? data.success.title : ⁗OK⁗}</div> </div> </div>',"",'class="alert__window {alert__window--active : active}"',function(t){
var e=this;$$(e.root);e.active=!1,e.data={title:null,subtitle:null},e.show=function(t){t&&(e.data=t,e.active=!0,e.update())},e.onSuccess=function(){e.data.success&&"function"==typeof e.data.success.callback&&e.data.success.callback(),e.data.button="success",e.active=!1},e.onCancel=function(){e.data.cancel&&"function"==typeof e.data.cancel.callback&&e.data.cancel.callback(),e.data.button="cancel",e.active=!1}}),riot.tag2("chat-list-raw","","","",function(t){this.root.innerHTML=t.content}),riot.tag2("chat-list",'<div class="section section__primary chat__list"> <header> <div class="header__title">iMessenger</div> <div class="header__left"> <div class="chat__list__close header__icon header__icon__back"></div> </div> <div class="header__right"> <div class="chat__list__header__photo header__icon header__icon__avatar"> <div if="{lastClient.avatar}" class="header__icon__avatar__container"> <div riot-style="background-image:url({lastClient.avatar})" class="header__icon__avatar__image"></div> </div> <div if="{lastClient.id}" class="header__icon__avatar__status {lastClient.online ? \'header__icon__avatar__status--online\' : \'header__icon__avatar__status--offline\'}"></div> </div> </div> </header> <div id="chat__list__scroll" class="section__wrapper"> <div class="chat__list__container section__container"> <div onclickdelegate="{openRoom}" each="{user in users}" no-reorder class="chat__list__item"> <div class="chat__list__photo {chat__list__photo--avatar : user.avatar}"> <div if="{user.avatar}" riot-style="background-image:url({user.avatar})" class="chat__list__avatar"></div> </div> <div class="chat__list__status {user.online ? \'chat__list__status--online\' : \'chat__list__status--offline\'}"></div> <div class="chat__list__text"> <div class="chat__list__time">{user.joinTime}</div> <div class="chat__list__counts {chat__list__counts--active : user.newMessages}">{user.newMessages}</div> <div class="chat__list__title">{user.name ? user.name : \'Гость\'}</div> <div class="chat__list__message">{user.lastMessage ? user.lastMessage : \'С вами хотят пообщаться\'}</div> </div> </div> </div> </div> <div if="{!users.length}" class="chat__list__empty"><span class="chat__list__empty__text">Сейчас нет активных чатов</span></div> </div> <div class="section chat__body"> <div each="{user in users}" no-reorder id="chat__room__{user.id}" class="section section__secondary"> <header> <div class="header__title header__title__chat__room">{user.name ? user.name : \'Гость\'}</div> <div class="header__left"> <div class="chat__room__close header__icon header__icon__back"></div> </div> <div class="header__right"> <div class="chat__header__photo header__icon header__icon__avatar"> <div if="{user.avatar}" class="header__icon__avatar__container"> <div riot-style="background-image:url({user.avatar})" class="header__icon__avatar__image"></div> </div> <div if="{user.id}" class="header__icon__avatar__status {user.online ? \'header__icon__avatar__status--online\' : \'header__icon__avatar__status--offline\'}"></div> </div> </div> </header> <div id="chat__room__scroll__{user.id}" class="section__wrapper"> <div class="section__container chat__room__container"> <div each="{message in user.messages}" no-reorder class="chat__message {message.me ? \'chat__message__left\' : \'chat__message__right\'}"> <div class="{message.me ? \'chat__message__que\' : \'chat__message__answer\'} {chat__message__system : message.type !== \'chat\'} {chat__message__system--active : message.type == \'auth\' && user.auth || message.type == \'phone\' && user.phone || message.type == \'email\' && user.email} {chat__message__new : message.new} chat__message__inner"> <chat-list-raw content="{message.text}">{message.text}</chat-list-raw> <div if="{message.type === \'auth\' && !user.auth}" class="chat__message__icon--auth"></div> <div if="{message.type === \'auth\' && user.auth}" class="chat__message__icon--checked"></div> <div if="{message.type === \'phone\'}" class="chat__message__icon--phone"></div> <div if="{message.type === \'email\'}" class="chat__message__icon--email"></div> </div> </div> </div> </div> <div class="chat__panel"> <div class="chat__panel__info"> <div class="chat__panel__info__typing {chat__panel__info__typing--active : client_id && client_id == typed_id}">Вам печатают сообщение...</div> </div> <div class="chat__panel__effect {chat__panel__effect--active : client_id && client_id == typed_id}"> <div class="chat__panel__effect__bar"></div> <div class="chat__panel__effect__dots {chat__panel__effect__dots--active : client_id && client_id == typed_id}"> <div class="chat__panel__effect__dot chat__panel__effect__dot1"></div> <div class="chat__panel__effect__dot chat__panel__effect__dot2"></div> <div class="chat__panel__effect__dot chat__panel__effect__dot3"></div> </div> </div> <form class="chat__panel__form"> <div class="chat__panel__menu"> <i class="chat__panel__menu__circle"></i> <select onchange="{changeOptions}" name="chat__select__options" class="chat__select__options"> <option value="1">Предложить представиться</option> <option value="2">Предложить оставить телефон</option> <option value="3">Предложить оставить email</option> <option value="4">Прикрепить картинку</option> </select> </div> <input onclickdelegate="{focusInput}" type="text" name="chat__panel__input" class="chat__panel__input" placeholder="Набрать сообщение..." autocomplete="off"> <div onclickdelegate="{sendMessage}" class="chat__panel__button"></div> </form> </div> </div> </div> <div each="{user in users}" no-reorder id="chat__metrika__{user.id}" class="section section__right section__right__not__fully section__header__without"> <div class="chat__metrika__close"></div> <div id="chat__metrika__wrapper__{user.id}" class="section__wrapper section__wrapper__metrika"> <div class="section__container"> <div class="chat__metrika__header"> <div class="chat__metrika__time">{user.joinTime}</div> <div class="chat__metrika__photo {user.online ? \'chat__metrika__photo--online\' : \'chat__metrika__photo--offline\'}"> <div if="{user.avatar}" class="chat__metrika__avatar" riot-style="background-image:url({user.avatar})"></div> </div> <div if="{user.profile.bdate}" class="chat__metrika__bdate">{user.profile.bdate}</div> <div class="chat__metrika__title">{user.name ? user.name : \'Гость\'}</div> </div> <div class="chat__metrika__content"> <div if="{user.phone}" class="chat__metrika__tile"> <div class="chat__metrika__tile__title">Телефон: <span class="chat__metrika__text__blue">{user.phone}</span></div> </div> <div class="chat__metrika__tile"> <div class="chat__metrika__tile__subtitle">По данным счетчика</div> <div class="chat__metrika__tile__text">{user.metrika.visit}-й раз на сайте, {user.metrika.city}</div> </div> <div if="{user.metrika.start}" class="chat__metrika__tile"> <div class="chat__metrika__tile__subtitle">Страница входа</div> <div class="chat__metrika__tile__text"><a class="chat__metrika__link" href="{user.metrika.start}" target="_blank">{user.metrika.start}</a></div> </div> <div class="chat__metrika__tile"> <div class="chat__metrika__tile__subtitle">На сайт перешли {user.metrika.adv ? \'по рекламе\' : \'с\'}</div> <div class="chat__metrika__tile__text"> {⁗Яндекс.Директ⁗ : user.metrika.adv && user.metrika.referer === ⁗yandex⁗} {⁗Яндекс.Поиск⁗ : !user.metrika.adv && user.metrika.referer === ⁗yandex⁗} {⁗Google.Adwords⁗ : user.metrika.adv && user.metrika.referer === ⁗google⁗} {⁗Google.Поиск⁗ : !user.metrika.adv && user.metrika.referer === ⁗google⁗} {⁗Rambler.Поиск⁗ : user.metrika.referer === ⁗rambler⁗} {⁗Yahoo.Поиск⁗ : user.metrika.referer === ⁗yahoo⁗} {⁗Bing.Поиск⁗ : user.metrika.referer === ⁗bing⁗} {⁗Mail.ru.Поиск⁗ : user.metrika.referer === ⁗mail⁗} <virtual if="{user.metrika.referer && user.metrika.referer.match(/http/)}"> {user.metrika.referer} </virtual> <virtual if="{user.metrika.keyword}">, {user.metrika.keyword}</virtual> </div> </div> <div if="{user.metrika.pages}" class="chat__metrika__tile"> <div class="chat__metrika__tile__title">Посещено: {user.metrika.pages} страниц(ы)</div> <div class="chat__metrika__pages__container"> <div each="{link in user.metrika.pagesData}" no-reorder class="chat__metrika__tile"> <a class="chat__metrika__link" target="_blank" href="{link}">{link}</a> </div> </div> </div> </div> </div> </div> </div> <svg style="position:absolute" xmlns="http://www.w3.org/2000/svg" version="1.1"> <defs> <filter id="goo"> <fegaussianblur in="SourceGraphic" stddeviation="10" result="blur"></fegaussianblur> <fecolormatrix in="blur" mode="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 19 -9" result="goo"></fecolormatrix> <fecomposite in="SourceGraphic" in2="goo"></fecomposite> </filter> </defs> </svg>',"",'data-marquee="chat" class="section section__marquee"',function(t){var e=this,i=$$(e.root);e.sid=777,e.users=[],e.activity=!1,e.ready=!1,e.socket_id=null,e.user_id=sessionStorage.chat_uid||(new Date).getTime()+Math.round(1e4*Math.random()),e.lastClient=sessionStorage.chat_client&&JSON.parse(sessionStorage.chat_client)||{},e.client_id=null,e.timeOutTyped=null,e.typed_id=null,e.iScrollList=null,e.iScrollRoom={},e.iScrollMetrika={},e.socket=io.connect("http://5.101.124.21:8008",{reconnection:!1}),e.reconnectInterval=null,sessionStorage.chat_uid||(sessionStorage.chat_uid=e.user_id),this.on("mount",function(){setTimeout(function(){e.socket.connected||(e.reconnect(),console.log("Chat: невозможно подключиться к серверу!"))},1e3),e.socket.on("connect",function(){console.log("Chat: соединение установленно!"),clearInterval(e.reconnectInterval),e.reconnectInterval=null,e.ready=!0,e.socket_id=this.id,e.socket.emit("join",{id:e.user_id,sid:e.sid,admin:!0})});var t=$$(i.children()[0]),n=$$(i.children()[1]);i.find(".chat__list__close").on(clickEvent,function(){app.sections.nav("data-list"),app.iScrollDataList.refresh()}),e.openRoom=function(i){var n=$$(i.currentTarget),a=this._item.user.id,s=$$(e["chat__room__"+a]);try{n.addClass("chat__list__item--active").siblings().removeClass("chat__list__item--active")}catch(i){}s.addClass("section--show"),t.addClass("section--hidden"),e.client_id=a,e.scrollDown(),app.utils.onEndAnimation(e["chat__room__"+a],function(){e.activity=!0,s.addClass("section--active").removeClass("section--show"),e.users.forEach(function(t,i){(e.lastClient&&e.lastClient.id!==a||!e.lastClient&&t.id==a)&&(e.lastClient={id:t.id,avatar:t.avatar,online:t.online},sessionStorage.chat_client=JSON.stringify(e.lastClient),e.update())}),e.viewedList()})},n.on(clickEvent,".chat__room__close",function(){var i=$$(e["chat__room__"+e.client_id]);i.addClass("section--hidden"),t.removeClass("section--hidden"),app.utils.onEndAnimation(e["chat__room__"+e.client_id],function(){e.client_id=null,e.activity=!1,i.removeClass("section--active").removeClass("section--hidden"),e.update()})}),i.find(".chat__list__header__photo").on(clickEvent,function(){if(e.lastClient&&e.lastClient.id){var t=$$(e["chat__metrika__"+e.lastClient.id]);t.addClass("section--show")}}),n.on(clickEvent,".chat__header__photo",function(){if(e.client_id){var t=$$(e["chat__metrika__"+e.client_id]);t.addClass("section--show")}}),i.on(clickEvent,".chat__metrika__close",function(){if(e.lastClient&&e.lastClient.id){var t=$$(e["chat__metrika__"+e.lastClient.id]);t.removeClass("section--show")}})}),e.socket.on("update_"+e.sid,function(t){if(e.ready){if(e.users=t,e.typed_id=null,e.activity&&e.users.forEach(function(t,i){if(t.id==e.client_id){var n=t.messages.length-1;e.users[i].messages[n]["new"]=!0}}),e.update(),e.client_id)e.users.length?(e.iScrollRoom[e.client_id].refresh(),e.iScrollRoom[e.client_id].scrollTo(0,e.iScrollRoom[e.client_id].maxScrollY,400,IScroll.utils.ease.cubicOut)):(e.client_id=null,e.lastClient=null,sessionStorage.chat_client=null,e.update());else if(!e.client_id)if(e.users.length&&e.lastClient){var i=!1;e.users.forEach(function(t,n){e.lastClient.id===t.id&&(i=!0)}),i||(e.lastClient=null,sessionStorage.chat_client=null,e.update())}else e.lastClient=null,sessionStorage.chat_client=null,e.update();e.scrollContent(e.users),clearTimeout(e.timeOutTyped),e.activity&&app.utils.onEndAnimation(e["chat__room__"+e.client_id].querySelector(".chat__message__new"),function(){setTimeout(function(){e.users.forEach(function(t,i){if(t.id==e.client_id){var n=t.messages.length-1;e.users[i].messages[n]["new"]=!1}}),e.update()},300)})}}),e.socket.on("notify_"+e.sid,function(t){e.activity&&e.client_id===t&&e.viewedList()}),e.socket.on("update_offer"+e.sid,function(t){e.tags["chat-list-raw"].forEach(function(e,i){if(e.message.type===t||"auth"===e.message.type&&("name"===t||"profile"===t)){var n=e.message.text;e.root.innerHTML=n}})}),e.socket.on("typed_"+e.sid,function(t){e.ready&&e.client_id===t&&(clearTimeout(e.timeOutTyped),e.typed_id=t,e.update(),e.timeOutTyped=setTimeout(function(){e.typed_id=null,e.update()},5e3))}),e.socket.on("disconnect",function(){e.reconnect(),console.log("Chat: соединение потеряно!"),e.users=[],e.update()}),e.reconnect=function(){e.reconnectInterval||(e.reconnectInterval=setInterval(function(){e.socket.connect()},500),console.log("Chat: запуск реконнекта!"))},e.scrollContent=function(t){e.iScrollList||(e.iScrollList=new IScroll(e.chat__list__scroll,{scrollX:!1,scrollY:!0,mouseWheel:!0})),t.forEach(function(t,i){e.iScrollRoom[t.id]||(e.iScrollRoom[t.id]=new IScroll(e["chat__room__scroll__"+t.id],{scrollX:!1,scrollY:!0,mouseWheel:!0}),e.iScrollRoom[t.id].scrollTo(0,e.iScrollRoom[t.id].maxScrollY),e.iScrollMetrika[t.id]=new IScroll(e["chat__metrika__wrapper__"+t.id],{scrollX:!1,scrollY:!0,mouseWheel:!0}),function n(){app.utils.raf(n),app.utils.getScroll(e.iScrollRoom[t.id])}(),function a(){app.utils.raf(a),app.utils.getScroll(e.iScrollMetrika[t.id])}(),e["chat__room__scroll__"+t.id].addEventListener("touchstart",function(i){e["chat__room__"+t.id].querySelector(".chat__panel__input").blur()}))})},e.scrollDown=function(t){e.client_id&&e.iScrollRoom[e.client_id]&&(e.iScrollRoom[e.client_id].refresh(),e.iScrollRoom[e.client_id].scrollTo(0,e.iScrollRoom[e.client_id].maxScrollY))},e.focusInput=function(){setTimeout(function(){e.socket.emit("typed",e.client_id)},app.device.isMobile?400:0)},e.sendMessage=function(t){t.preventDefault(),t.stopPropagation();var i=this.chat__panel__input.value;i.length&&(this.chat__panel__input.value="",this.chat__panel__input.blur(),setTimeout(function(){e.socket.emit("send",{id:e.client_id,message:i})},app.device.isMobile?400:0))},e.changeOptions=function(t){var i=t.target.value;"1"===i?e.socket.emit("send",{id:e.client_id,type:"auth",message:"Предложение представиться"}):"2"===i?e.socket.emit("send",{id:e.client_id,type:"phone",message:"Предложение оставить телефон"}):"3"===i&&e.socket.emit("send",{id:e.client_id,type:"email",message:"Предложение оставить email"})},e.viewedList=function(){var t=!1;e.users.forEach(function(i,n){i.id===e.client_id&&e.users[n].newMessages>0&&(e.users[n].newMessages=0,e.users[n].messages.forEach(function(t,e){t.viewed=!0}),e.socket.emit("viewed",n),t=!0)}),t&&e.update()}}),riot.tag2("dashboard-balance",'<div id="dashboard__balance__scroll" class="section__wrapper"> <div class="section__container"> <header class="header__black"> <div class="header__title">Ваш баланс</div> <div class="header__left"> <div onclickdelegate="{onClose}" class="alarm__list__close header__icon header__icon__back"></div> </div> <div class="header__right dashboard__balance__days"> 28 дн </div> </header> <div class="dashboard__screen"> <div class="dashboard__balance__label">остаток</div> <div id="dashboard__balance__big" class="dashboard__screen__circle"></div> </div> <div class="dashboard__balance__button">Пополнить баланс</div> <div class="dashboard__table"> <div class="dashboard__table__row"> <div class="c-gray">12 мар 2016</div> <div class="t-right"><strong>1 250,0 Р</strong></div> </div> <div class="dashboard__table__row"> <div class="c-gray">7 мар 2016</div> <div class="t-right"><strong>3 480,0 Р</strong></div> </div> <div class="dashboard__table__row"> <div class="c-gray">5 мар 2016</div> <div class="t-right"><strong>900,0 Р</strong></div> </div> </div> </div> </div>',"",'class="section section__secondary section__header__nofixed"',function(t){var e=this,i=$$(e.root),n=e.parent.tags["dashboard-list"];e.onClose=function(t){n.closeSection("balance")},this.on("mount",function(){i.find("#dashboard__balance__big").circliful({foregroundColor:"#68f5ff",foregroundBorderWidth:8.5,backgroundBorderWidth:8.5,showPercent:!1,percent:88,textFamily:"roboto",textSize:"25px",target:"4 750,0"}),e.iScrollList=new IScroll(e.dashboard__balance__scroll,{scrollX:!1,scrollY:!0}),function t(){app.utils.raf(t),app.utils.getScroll(e.iScrollList)}()})}),riot.tag2("dashboard-currency",'<div id="dashboard__currency__scroll" class="section__wrapper"> <div class="section__container"> <header class="header__black"> <div class="header__title">Курсы валют</div> <div class="header__left"> <div onclickdelegate="{onClose}" class="alarm__list__close header__icon header__icon__back"></div> </div> <div class="header__right"> <div class="header__icon UI__menu__circleV UI__menu__circle--white"><div class="UI__menu__circle__item"></div></div> </div> </header> <div class="dashboard__screen dashboard__screen--currency"> <div class="dashboard__screen__label">cегодня</div> <div class="dashboard__screen__label dashboard__screen__label--left">ЦБ РФ</div> <div class="dashboard__screen__currency dashboard__screen__currency--line"> <div class="dashboard__screen__currency__item dashboard__screen__currency__value">66,69 <span class="dashboard__screen__currency__rub">Р</span></div> <div class="dashboard__screen__currency__item dashboard__screen__currency__title">$</div> </div> <div class="dashboard__screen__currency"> <div class="dashboard__screen__currency__item dashboard__screen__currency__title">&euro;</div> <div class="dashboard__screen__currency__item dashboard__screen__currency__value">75,99 <span class="dashboard__screen__currency__rub">Р</span></div> </div> </div> <div class="dashboard__table"> <div class="dashboard__table__row"> <div class="c-gray">Австралийский доллар</div> <div class="t-right"><strong>50.726 Р</strong></div> </div> <div class="dashboard__table__row"> <div class="c-gray">Белорусский рубль</div> <div class="t-right"><strong>33.604 Р</strong></div> </div> <div class="dashboard__table__row"> <div class="c-gray">Венгерский форинт</div> <div class="t-right"><strong>24.500 Р</strong></div> </div> </div> </div> </div>',"",'class="section section__secondary section__header__nofixed"',function(t){var e=this,i=($$(e.root),e.parent.tags["dashboard-list"]);e.onClose=function(t){i.closeSection("currency")},this.on("mount",function(){e.iScrollList=new IScroll(e.dashboard__currency__scroll,{scrollX:!1,scrollY:!0}),function t(){app.utils.raf(t),app.utils.getScroll(e.iScrollList)}()})}),riot.tag2("dashboard-list",'<div id="dashboard__scroll" class="section__wrapper"> <div class="section__container section__container__dashboard"> <header class="header__dashboard"> <div class="header__title">Инфо-панель</div> <div class="header__left"> <div class="dashboard__openMenu header__icon UI__menu"><div class="UI__menu__item"></div></div> </div> <div class="header__right"> <div onclickdelegate="{openDataList}" class="dashboard__next__section header__icon header__icon__next__white"></div> </div> </header> <div onclickdelegate="{openBalance}" class="dashboard__tile dashboard__tile__balance"> <div class="dashboard__tile__label">пополнить</div> <div id="dashboard__balance" class="dashboard__circle"></div> <div class="dashboard__title"> <div class="dashboard__subtitle">Ваш баланс:</div> <div class="dashboard__balance">4 750,0 <span class="dashboard__balance__rub">Р</span></div> </div> </div> <div onclickdelegate="{openTraffic}" class="dashboard__tile dashboard__tile__traffic"> <div class="dashboard__tile__label">подробнее</div> <div id="dashboard__traffic__score" class="dashboard__circle"></div> <div class="dashboard__title">Входящие</div> </div> <div class="dashboard__tile"> <span id="dashboard__traffic__graph">5,3,9,6,5,9,7,3,5,2</span> </div> <div onclickdelegate="{openWeather}" class="dashboard__tile dashboard__tile__weather"> <div class="dashboard__tile__label">сегодня</div> <canvas id="partly-cloudy-night" class="dashboard__weather__canvas"></canvas> <div class="dashboard__weather"> <div class="dashboard__weather__temp">+6</div> <div class="dashboard__weather__text">Облачно, дождь</div> <div class="dashboard__weather__text">70% / 745 мм рт.с.</div> </div> </div> <div onclickdelegate="{openCurrency}" class="dashboard__tile dashboard__tile__currency"> <div class="dashboard__currency"> <div class="dashboard__currency__title">$</div> <div class="dashboard__currency__value">68,89</div> </div> <div class="dashboard__currency"> <div class="dashboard__currency__title">&euro;</div> <div class="dashboard__currency__value">78,27</div> </div> </div> </div> </div>',"",'class="section section__primary"',function(t){var e=this,i=$$(e.root);$$(e.parent.root);e.openDataList=function(t){app.sections.nav("data-list")},e.openBalance=function(t){e.openSection("balance")},e.openTraffic=function(t){e.openSection("traffic")},e.openWeather=function(t){e.openSection("weather")},e.openCurrency=function(t){e.openSection("currency")},e.openSection=function(t){e.sections[t].section.addClass("section--show"),i.addClass("section--hidden"),app.utils.onEndAnimation(e.sections[t].section[0],function(){e.sections[t].section.addClass("section--active").removeClass("section--show"),e.sections[t].tag.iScrollList.refresh()})},e.closeSection=function(t){e.sections[t].section.addClass("section--hidden"),i.removeClass("section--hidden"),app.utils.onEndAnimation(e.sections[t].section[0],function(){e.sections[t].section.removeClass("section--active").removeClass("section--hidden")})},this.on("mount",function(){if(e.sections={balance:{tag:e.parent.tags["dashboard-balance"],section:$$(e.parent.tags["dashboard-balance"].root)},traffic:{tag:e.parent.tags["dashboard-traffic"],section:$$(e.parent.tags["dashboard-traffic"].root)},weather:{tag:e.parent.tags["dashboard-weather"],section:$$(e.parent.tags["dashboard-weather"].root)},currency:{tag:e.parent.tags["dashboard-currency"],section:$$(e.parent.tags["dashboard-currency"].root)}},i.find("#dashboard__balance").circliful({foregroundColor:"#68f5ff",backgroundColor:"#f0f4fb",textColor:"#333947",foregroundBorderWidth:10,backgroundBorderWidth:10,percent:88}),i.find("#dashboard__traffic__score").circliful({foregroundColor:"#fcde30",backgroundColor:"#f0f4fb",textColor:"#333947",foregroundBorderWidth:10,backgroundBorderWidth:10,textSize:"35px",showPercent:!1,percent:54,target:12}),i.find("#dashboard__traffic__graph").peity("bar",{fill:["#839ae3","#62e1d8"],width:"100%",height:"100px"}),"undefined"!=typeof Skycons){var t=new Skycons({color:"#839ae3"},{resizeClear:!0});t.add("partly-cloudy-night",Skycons.PARTLY_CLOUDY_NIGHT),t.play()}e.iScrollList=new IScroll(e.dashboard__scroll,{scrollX:!1,scrollY:!0}),function n(){app.utils.raf(n),app.utils.getScroll(e.iScrollList)}(),app.iScrollDashboardList=e.iScrollList})}),riot.tag2("dashboard-section","<dashboard-list></dashboard-list> <dashboard-balance></dashboard-balance> <dashboard-traffic></dashboard-traffic> <dashboard-weather></dashboard-weather> <dashboard-currency></dashboard-currency>","",'data-marquee="dashboard" class="section section__marquee section__header__nofixed"',function(t){}),riot.tag2("dashboard-traffic",'<div id="dashboard__traffic__scroll" class="section__wrapper"> <div class="section__container"> <header class="header__black"> <div class="header__title">Статистика входящих</div> <div class="header__left"> <div onclickdelegate="{onClose}" class="alarm__list__close header__icon header__icon__back"></div> </div> <div class="header__right"> <div class="header__icon UI__menu__circleV UI__menu__circle--white"><div class="UI__menu__circle__item"></div></div> </div> </header> <div class="dashboard__screen"> <div class="dashboard__screen__label">cегодня</div> <span id="dashboard__traffic__big">5,3,9,6</span> </div> <div class="dashboard__table"> <div class="dashboard__table__row"> <div class="dashboard__table__title w-70p"><span class="dashboard__table__circle" style="background:#00d1fe"></span>Обратные звонки</div> <div class="w-15p t-center c-gray">12%</div> <div class="w-15p t-center"><strong>3</strong></div> </div> <div class="dashboard__table__row"> <div class="dashboard__table__title w-70p"><span class="dashboard__table__circle" style="background:#ffe02d"></span>Онлайн-чаты</div> <div class="w-15p t-center c-gray">24%</div> <div class="w-15p t-center"><strong>5</strong></div> </div> <div class="dashboard__table__row"> <div class="dashboard__table__title w-70p"><span class="dashboard__table__circle" style="background:#b77de9"></span>Сообщения</div> <div class="w-15p t-center c-gray">27%</div> <div class="w-15p t-center"><strong>6</strong></div> </div> <div class="dashboard__table__row"> <div class="dashboard__table__title w-70p"><span class="dashboard__table__circle" style="background:#ff9498"></span>Заявки</div> <div class="w-15p t-center c-gray">18%</div> <div class="w-15p t-center"><strong>4</strong></div> </div> </div> </div> </div>',"",'class="section section__secondary section__header__nofixed"',function(t){var e=this,i=($$(e.root),e.parent.tags["dashboard-list"]);e.onClose=function(t){i.closeSection("traffic")},this.on("mount",function(){$$(e.dashboard__traffic__big).peity("donut",{fill:["#00d1fe","#ffe02d","#b77de9","#ff9498"],width:176,height:176}),e.iScrollList=new IScroll(e.dashboard__traffic__scroll,{scrollX:!1,scrollY:!0}),function t(){app.utils.raf(t),app.utils.getScroll(e.iScrollList)}()})}),riot.tag2("dashboard-weather",'<div id="dashboard__weather__scroll" class="section__wrapper"> <div class="section__container"> <header class="header__black"> <div class="header__title">Прогноз погоды</div> <div class="header__left"> <div onclickdelegate="{onClose}" class="alarm__list__close header__icon header__icon__back"></div> </div> <div class="header__right"> <div class="header__icon UI__menu__circleV UI__menu__circle--white"><div class="UI__menu__circle__item"></div></div> </div> </header> <div class="dashboard__screen"> <div class="dashboard__screen__label">cегодня</div> <div class="dashboard__screen__label dashboard__screen__label--left">Москва</div> <div class="dashboard__screen__weather"> <div class="dashboard__screen__weather__description"> <div class="dashboard__screen__weather__temp">+21</div> <div class="dashboard__screen__weather__text">Облачно, дождь</div> <div class="dashboard__screen__weather__text">Влаж. 70%</div> <div class="dashboard__screen__weather__text">745 мм рт.ст.</div> </div> <div class="dashboard__screen__weather__svg"></div> </div> </div> <div class="dashboard__weather__week"> <div class="dashboard__weather__week__item"> <div class="dashboard__weather__week__title">09/4</div> <canvas id="dashboard__weather__week1" class="dashboard__weather__week__canvas"></canvas> <div class="dashboard__weather__week__temp">+19</div> </div> <div class="dashboard__weather__week__item"> <div class="dashboard__weather__week__title">10/4</div> <canvas id="dashboard__weather__week2" class="dashboard__weather__week__canvas"></canvas> <div class="dashboard__weather__week__temp">+16</div> </div> <div class="dashboard__weather__week__item"> <div class="dashboard__weather__week__title">11/4</div> <canvas id="dashboard__weather__week3" class="dashboard__weather__week__canvas"></canvas> <div class="dashboard__weather__week__temp">+8</div> </div> <div class="dashboard__weather__week__item"> <div class="dashboard__weather__week__title">12/4</div> <canvas id="dashboard__weather__week4" class="dashboard__weather__week__canvas"></canvas> <div class="dashboard__weather__week__temp">+10</div> </div> <div class="dashboard__weather__week__item"> <div class="dashboard__weather__week__title">13/4</div> <canvas id="dashboard__weather__week5" class="dashboard__weather__week__canvas"></canvas> <div class="dashboard__weather__week__temp">+18</div> </div> </div> </div> </div>',"",'class="section section__secondary section__header__nofixed"',function(t){var e=this,i=($$(e.root),e.parent.tags["dashboard-list"]);e.onClose=function(t){i.closeSection("weather")},this.on("mount",function(){var t=new Skycons({color:"#158ffe"},{resizeClear:!0});t.add("dashboard__weather__week1",Skycons.CLEAR_DAY),t.add("dashboard__weather__week2",Skycons.CLEAR_DAY),t.add("dashboard__weather__week3",Skycons.PARTLY_CLOUDY_DAY),t.add("dashboard__weather__week4",Skycons.PARTLY_CLOUDY_NIGHT),t.add("dashboard__weather__week5",Skycons.CLOUDY),e.iScrollList=new IScroll(e.dashboard__weather__scroll,{scrollX:!1,scrollY:!0}),function i(){app.utils.raf(i),app.utils.getScroll(e.iScrollList)}()})}),riot.tag2("data-header",'<div onclickdelegate="{openMenu}" class="header__title">{headerTitle}</div> <div class="header__left"> <div class="header__icon UI__menu"><div class="UI__menu__item"></div></div> </div> <div class="header__right"> <div onclickdelegate="{openAlarm}" class="header__icon header__icon__alarm header__icon__alarm--active"> <div class="header__icon__alarm__counts">3</div> </div> <div class="header__icon UI__menu__circleV UI__menu__circle--white"><div class="UI__menu__circle__item"></div></div> </div> <div class="header__data__panel {header__data__panel--active : show}"> <div class="header__left"> <div onclickdelegateupdate="{onClear}" class="header__icon header__icon__back__white"></div> <div class="header__icon header__data__panel__count">{counts}</div> </div> <div class="header__right"> <div onclickdelegateupdate="{onViewed}" class="header__icon header__data__panel__viewed"></div> <div onclickdelegateupdate="{onImportant}" class="header__icon header__data__panel__important"></div> <div onclickdelegate="{onRemove}" class="header__icon header__data__panel__remove"></div> <div onclickdelegate="{onStatus}" class="header__icon header__data__panel__folder"></div> <div onclickdelegate="{onCheckAll}" class="header__icon UI__menu__circleV UI__menu__circle--white"><div class="UI__menu__circle__item"></div></div> </div> </div> <div class="data__list__loader"> <i class="data__list__loader__blank"></i> </div>',"",'class="header header__data__list"',function(t){var e=this,i=($$(e.root),$root.tags["alert-window"]),n=$root.tags["popup-select"],a=e.parent.tags["data-list"],s=e.parent.tags["data-menu"],r=$$(a.root);if(e.headerTitle="Входящие",this.on("mount",function(){e.loader()}),e.openMenu=function(){s.show()},e.onClear=function(t){a.unChecked(),e.show=!1,e.counts=0,t&&e.update()},e.onViewed=function(){a.data.get("isChecked",function(t){t["new"]=!1}),e.onClear()},e.onImportant=function(){a.data.get("isChecked",function(t){t.important?t.important=!1:t.important=!0}),e.onClear()},e.onRemove=function(){i.show({title:"Удалить выбранные?",success:{callback:function(){a.data.get("isChecked",function(t){t.remove=!0}),e.onClear(!0),app.utils.onEndTransition(r.find(".data__list__item--remove:first")[0],function(){for(var t=a.data._data.items,e=0;e<t.length;e++)t[e].remove&&(t.splice(e,1),e--);a.update(),a.iScrollList.refresh()})}}})},e.onStatus=function(){n.show({type:"status",data:a.data.get("status"),callback:function(t){a.data.get("isChecked",function(e){e.status=t}),e.onClear(!0)}})},e.onCheckAll=function(){var t=0;a.data.get("items",function(e){e.checked=!0,t++}),e.counts=t,e.update(),a.update()},$root.tags["alarm-section"]){var o=$$($root.tags["alarm-section"].root);e.openAlarm=function(){o.addClass("section--show")}}e.loader=function(){if(e.loader.app)return void e.loader.app.start();var t=function(t,e){return function(){return t.apply(e,arguments)}},i=function(){this.addBanner=t(this.addBanner,this)};i.prototype.loaded=0,i.prototype.loop=0,i.prototype.total=80,i.prototype.lastPicked=["blank","blank","blank"],i.prototype.colors=["red","green","blue","yellow","purple"],i.prototype.end=!0,i.prototype.init=function(){this.getElements();
},i.prototype.start=function(){if(this.end){var t=this;this.loaded=0,this.loadSim=null,this.loadCheck=null,this.end=!1,this.loop++,this.addListeners(),setTimeout(function(){t.el.setAttribute("class","data__list__loader data__list__loader--active")},350)}},i.prototype.getElements=function(){return this.el=document.getElementsByClassName("data__list__loader")[0]},i.prototype.addListeners=function(){var t=this;this.animationLoop=function(){t.loadSim=setInterval(function(t){return function(){return t.loaded+=1+Math.floor(4*Math.random())}}(t),200),t.loadCheck=setInterval(function(e){return function(){return e.loaded<e.total?e.addBanner():(e.loadSim&&setTimeout(function(){t.el.setAttribute("class","data__list__loader"),t.end=!0},1500),clearInterval(e.loadSim),e.loadSim=null,clearInterval(e.loadCheck))}}(t),200)},this.loop<2&&app.utils.raf(this.animationLoop),this.animationLoop()},i.prototype.addBanner=function(){var t,e,i;for(t=document.createElement("i"),e=this.lastPicked[0];-1!==this.lastPicked.indexOf(e);)e=this.colors[Math.floor(Math.random()*this.colors.length)];for(this.lastPicked.unshift(e),this.lastPicked.pop(),t.setAttribute("class","data__list__loader__"+e),this.el.insertBefore(t,this.el.children[0]),i=[];this.el.children.length>12;)i.push(this.el.removeChild(this.el.children[12]));return i},e.loader.app=new i,e.loader.app.init()}}),riot.tag2("data-list",'<div class="section__container section__container__data__list"> <div each="{item in data.get(\'items\')}" no-reorder class="data__list__item data__list__status--{getStatusColor(item.status)} {data__list__item--new : item.new} {data__list__item--checked : item.checked} {data__list__item--important : item.important} {data__list__item--remove : item.remove} {data__list__item--animation : item.animation}"> <div if="{item.alarm}" class="data__list__alarm"></div> <div class="data__list__date">{getDate(item.date)}</div> <div onclickdelegateupdate="{onChecked}" class="data__list__photo"> <div if="{item.type !== ⁗profile⁗}" class="data__list__photo__item data__list__icon data__list__icon--{item.type}"></div> <div if="{item.type === ⁗profile⁗}" class="data__list__photo__item"> <div class="data__list__photo__image" riot-style="background-image:url({item.image})"></div> </div> </div> <div class="data__list__textarea"> <div class="data__list__title"> <span class="data__list__name"> <virtual if="{item.type === ⁗order⁗}">#заявка,</virtual> <virtual if="{item.type === ⁗chat⁗}">#онлайн-чат,</virtual> <virtual if="{item.type === ⁗callback⁗}">#звонок,</virtual> <virtual if="{item.type === ⁗feedback⁗}">#письмо,</virtual> <virtual if="{item.type === ⁗profile⁗}">#профиль,</virtual> </span> {item.title} </div> <div class="data__list__text"> <virtual if="{item.type !== ⁗callback⁗}">{item.text}</virtual> <span if="{item.type === ⁗callback⁗}" class="data__list__strong">{item.text}</span> </div> </div> <div onclickdelegate="{selectStatus}" class="data__list__options"><div class="data__list__options__item"></div></div> </div> </div> <div onclickdelegate="{openChat}" class="chat__circle__button"> <div class="chat__circle__button__messages chat__circle__button__messages--active">4</div> </div>',"",'class="section__wrapper"',function(t){var e=this,i=$$(e.root),n=$root.tags["popup-select"];e.data=new Baobab({items:[],status:[],isChecked:Baobab.monkey(["items"],function(t){return t.filter(function(t){return t.checked===!0})})},{autoCommit:!1,asynchronous:!0,immutable:!1,lazyMonkeys:!1,persistent:!1,pure:!0}),this.on("mount",function(){$fetch("data/list/init","get").then(function(t){e.data.set("items",t.list),e.data.set("status",t.status),e.update(),e.iScrollList.refresh()}),e.panel=e.parent.tags["data-header"],e.iScrollList=new IScroll(i[0],{scrollX:!1,scrollY:!0}),function t(){app.utils.raf(t);var i=app.utils.getScroll(e.iScrollList);e.panel.show||(i.y<-80?e.panel.loader():i.y>0&&i.maxY-i.y<40)}(),app.iScrollDataList=e.iScrollList}),e.getDate=function(t){var e=tempus().between(tempus(t),"day");return e>0?tempus(t).format("%H:%M"):-1===e?"вчера":tempus(t).format("%d %b")},e.getStatusColor=function(t){return e.data.get("status",{_id:t},"color")},e.onChecked=function(){this.item.checked?(this.item.checked=!1,e.data.select("items",{_id:this.item._id}).set("checked",!1)):(this.item.checked=!0,e.data.select("items",{_id:this.item._id}).set("checked",!0));var t=e.data.get("isChecked").length;t?e.panel.show=!0:e.panel.show=!1,e.panel.counts=t,e.panel.update()},e.unChecked=function(){e.data.get("isChecked",function(t){t.checked=!1}),e.update()},e.selectStatus=function(){var t=this,i=this.item._id;n.show({type:"status",icon:{type:this.item.type,image:this.item.image},data:e.data.get("status"),value:this.item.status,callback:function(n){e.data.select("items",{_id:i}).set("status",n),t.update()}})},e.openChat=function(){app.sections.nav("chat")}}),riot.tag2("data-menu",'<div onclickdelegateupdateall="{onSelect}" each="{items}" no-reorder class="data__menu__item {data__menu__item--active : name == value}"> <span class="data__menu__item__icon data__menu__item--{name}">{subtitle}</span> </div>',"",'class="data__menu {data__menu--active : active}"',function(t){var e=this,i=($$(e.root),e.parent.tags["data-header"]);e.active=!1,e.value="inbox",e.items=[{title:"Звонки",subtitle:"Звонки c сайта",name:"callback"},{title:"Письма",subtitle:"Все письма",name:"feedback"},{title:"Онлайн-чаты",subtitle:"Онлайн-чаты",name:"chat"},{title:"Заявки",subtitle:"Все заявки",name:"order"},{title:"Входящие",subtitle:"Все входящие",name:"inbox"}],e.show=function(){e.active=!0,e.update()},e.onSelect=function(){e.value=this.name,e.active=!1,i.headerTitle=this.title,i.update()}}),riot.tag2("data-section","<data-header></data-header> <data-list></data-list> <data-menu></data-menu>","",'data-marquee="data" class="section section__marquee section__data__list"',function(t){}),riot.tag2("login-section",'<div class="login__section__logo"></div> <div class="login__section__form"> <div class="login__section__item login__section__item--login"> <div class="login__section__item__title">логин</div> <div class="login__section__item__circle login__section__item__circle--login"></div> <input class="login__section__input" name="login" type="text" placeholder="логин" spellcheck="false" autocomplete="off"> </div> <div class="login__section__item login__section__item--pass"> <div class="login__section__item__circle login__section__item__circle--pass"></div> <div class="login__section__item__title">пароль</div> <input class="login__section__input" name="password" type="text" placeholder="пароль" spellcheck="false" autocomplete="off"> </div> </div> <div class="login__section__footer"> <div class="login__section__button">Войти</div> </div>',"",'class="login__section"',function(t){var e=this,i=$$(e.root);this.on("mount",function(){i.find(".login__section__item__circle").on("click",function(){i.addClass("login__section--input"),i.find(".login__section__input[name=login]").focus()}),i.find(".login__section__input").on("focus blur",function(t){"focus"===t.type?i.addClass("login__section--focus"):"blur"===t.type&&i.removeClass("login__section--focus")}),i.find(".login__section__button").on("click",function(t){i.addClass("login__section--loading"),setTimeout(function(){i.addClass("login__section--enter")},1500)})})}),riot.tag2("popup-select",'<div class="popup__select__wrapper"> <div if="{type === ⁗status⁗}" class="popup__select__container"> <div onclickdelegateupdateall="{onSelect}" each="{items}" no-reorder class="popup__select__item {popup__select__item--active : _id == value}"> <div class="popup__select__status__color popup__select__status__{color}"> <span class="popup__select__item__title">{title}</span> </div> </div> </div> <div if="{type === ⁗status⁗ && icon.type}" class="popup__select__status__icon"> <div if="{icon.type !== ⁗profile⁗}" class="popup__select__status__icon__item popup__select__status__icon__item--{icon.type}"></div> <div if="{icon.type === ⁗profile⁗}" class="popup__select__status__icon__item" riot-style="background-image:url({icon.image})"></div> </div> <div if="{!type}" class="popup__select__container"> <div onclickdelegateupdateall="{onSelect}" each="{items}" no-reorder class="popup__select__item"> <span class="popup__select__item__title">{title}</span> </div> </div> </div>',"",'class="popup__select {popup__select--active : active}"',function(t){var e=this,i=$$(e.root);e.active=!1,e.items={},e.show=function(t){t&&(e.type=t.type,e.icon=t.icon,e.items=t.data,e.value=t.value,e.callback=t.callback,e.active=!0,e.update())},e.onSelect=function(){var t=this._id;e.value=t,e.active=!1,e.callback&&e.callback(t)},this.on("mount",function(){i.on(clickEvent,function(t){t.target.getAttribute("class")&&t.target.getAttribute("class").match(/popup__select--active/)&&(e.active=!1,e.update())})})}),riot.tag2("root-section",'<section id="sections"> <dashboard-section></dashboard-section> <data-section></data-section> </section> <popup-select></popup-select> <alert-window></alert-window> <alarm-section></alarm-section>',"",'id="root"',function(t){$root=this,this.on("mount",function(){app.sections.init("data")})}),function(){$document.on("touchmove MSPointerMove",function(t){t.preventDefault()}),$window.on("mousewheel",function(t){t.preventDefault()}),$window.on("scroll",function(){$html.add($body).scrollTop(0)}),$sid=777,riot.mount("*")}();