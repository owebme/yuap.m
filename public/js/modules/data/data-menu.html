<data-menu class="data__menu { data__menu--active : active }">

    <div onclickDelegateUpdateAll={ onSelect } each={ items } no-reorder class="data__menu__item { data__menu__item--active : name == value }">
        <span class="data__menu__item__title data__menu__item--{ name }">
            { subtitle }
            <span if={ count > 0 } class="data__menu__item__count">{ count }</span>
        </span>
    </div>

<script>

    var $ = this,
    $scope = $$($.root),
    $dataHeader = $.parent.tags["data-header"];

    $.active = false;

    $.value = "inbox";

    $.items = [
        {
            title: "Звонки",
            subtitle: "Звонки c сайта",
            name: "callback",
            count: 0
        },
        {
            title: "Письма",
            subtitle: "Все письма",
            name: "feedback",
            count: 1
        },
        {
            title: "Онлайн-чаты",
            subtitle: "Онлайн-чаты",
            name: "chat",
            count: 2
        },
        {
            title: "Заявки",
            subtitle: "Все заявки",
            name: "order",
            count: 0
        },
        {
            title: "Входящие",
            subtitle: "Все входящие",
            name: "inbox",
            count: 0
        }
    ];

    $.show = function(){
        $.active = true;
        $.update();
    };

    $.onSelect = function(){
        $.value = this.name;
        $.active = false;
        $dataHeader.headerTitle = this.title;
        $dataHeader.update();
    };

</script>

</data-menu>
